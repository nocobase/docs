"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[25401],{678846:function(r,t,a){a.r(t);var i=a(572269),_=a(793359),u=a(861788),h=a(719977),x=a(20190),m=a(24268),p=a(496057),g=a(585939),I=a(28484),j=a(635206),v=a(375553),b=a(156266),f=a(572333),o=a(841118),E=a(39297),M=a(868526),P=a(605019),s=a(614651),d=a(280936),l=a(667294),n=a(97148),e=a(785893);function c(){return(0,e.jsx)(s.dY,{children:(0,e.jsx)(l.Suspense,{fallback:(0,e.jsx)(d.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h1",{id:"migration-manager",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#migration-manager",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Migration Manager"]})}),(0,e.jsx)(o.Z,{name:"migration-manager",licenseBundled:"professional",licensebundled:"professional"}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"introduction",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#introduction",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Introduction"]}),(0,e.jsxs)("p",{children:[n.texts[0].value,(0,e.jsx)(s.rU,{to:"/handbook/backups",children:n.texts[1].value}),n.texts[2].value]}),(0,e.jsxs)("h2",{id:"installation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#installation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Installation"]}),(0,e.jsxs)("p",{children:[n.texts[3].value,(0,e.jsx)(s.rU,{to:"/handbook/backups",children:n.texts[4].value}),n.texts[5].value,(0,e.jsx)(s.rU,{to:"/welcome/getting-started/plugin",children:n.texts[6].value}),n.texts[7].value]}),(0,e.jsxs)("h2",{id:"process-and-principles",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#process-and-principles",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Process and Principles"]}),(0,e.jsx)("p",{children:n.texts[8].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102202546.png",alt:"20250102202546"})}),(0,e.jsxs)("h2",{id:"migration-rules",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#migration-rules",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Migration Rules"]}),(0,e.jsxs)("h3",{id:"built-in-rules",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#built-in-rules",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Built-in Rules"]}),(0,e.jsx)("p",{children:n.texts[9].value}),(0,e.jsxs)("ol",{children:[(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:n.texts[10].value}),(0,e.jsx)("br",{}),n.texts[11].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:n.texts[12].value}),(0,e.jsx)("br",{}),n.texts[13].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:n.texts[14].value}),(0,e.jsx)("br",{}),n.texts[15].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:n.texts[16].value}),(0,e.jsx)("br",{}),n.texts[17].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:n.texts[18].value}),(0,e.jsx)("br",{}),n.texts[19].value]})})]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:n.texts[20].value})}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:n.texts[21].value}),(0,e.jsx)("li",{children:n.texts[22].value}),(0,e.jsx)("li",{children:n.texts[23].value})]}),(0,e.jsxs)("h3",{id:"detailed-design",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#detailed-design",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Detailed Design"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102204909.png",alt:"20250102204909"})}),(0,e.jsxs)("h3",{id:"configuration-interface",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#configuration-interface",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Configuration Interface"]}),(0,e.jsx)("p",{children:n.texts[24].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102205450.png",alt:"20250102205450"})}),(0,e.jsx)("p",{children:n.texts[25].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250107105005.png",alt:"20250107105005"})}),(0,e.jsx)("p",{children:n.texts[26].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250107104644.png",alt:"20250107104644"})}),(0,e.jsxs)("h2",{id:"migration-files",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#migration-files",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Migration Files"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102205844.png",alt:"20250102205844"})}),(0,e.jsxs)("h3",{id:"creating-a-new-migration",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-new-migration",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Creating a New Migration"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102205857.png",alt:"20250102205857"})}),(0,e.jsxs)("h3",{id:"executing-a-migration",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#executing-a-migration",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Executing a Migration"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102205915.png",alt:"20250102205915"})}),(0,e.jsxs)("p",{children:[n.texts[27].value,(0,e.jsx)(s.rU,{to:"/handbook/environment-variables",children:n.texts[28].value}),n.texts[29].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102212311.png",alt:"20250102212311"})}),(0,e.jsx)("p",{children:n.texts[30].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102210009.png",alt:"20250102210009"})}),(0,e.jsxs)("h2",{id:"migration-logs",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#migration-logs",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Migration Logs"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250102205738.png",alt:"20250102205738"})}),(0,e.jsxs)("h2",{id:"rollback",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#rollback",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Rollback"]}),(0,e.jsxs)("p",{children:[n.texts[31].value,(0,e.jsx)(s.rU,{to:"/handbook/backups",children:n.texts[32].value}),n.texts[33].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20250105195029.png",alt:"20250105195029"})})]})]})})})}t.default=c},97148:function(r,t,a){a.r(t),a.d(t,{texts:function(){return i}});const i=[{value:"The Migration Manager helps you transfer application configurations from one environment to another. Its main focus is on migrating \u201Capplication configurations.\u201D If you need a complete data migration, we recommend using the \u201C",paraId:0,tocIndex:1},{value:"Backup Manager",paraId:1,tocIndex:1},{value:"\u201D to back up and restore your entire application.",paraId:0,tocIndex:1},{value:"The Migration Manager depends on the ",paraId:2,tocIndex:2},{value:"Backup Manager",paraId:3,tocIndex:2},{value:". Make sure that the Backup Manager plugin is already installed and activated. For more information, refer to ",paraId:2,tocIndex:2},{value:"Installing and Upgrading Commercial Plugins",paraId:4,tocIndex:2},{value:".",paraId:2,tocIndex:2},{value:"The Migration Manager transfers tables and data from the primary database based on specified migration rules, moving them from one application instance to another. Note that it does not migrate data from external databases or sub-applications.",paraId:5,tocIndex:3},{value:"Migration Manager can migrate all tables in the primary database and supports five built-in rules:",paraId:6,tocIndex:5},{value:"Schema-only",paraId:7,tocIndex:5},{value:`
Only migrates the structure (schema) of tables\u2014no data is inserted or updated.`,paraId:7,tocIndex:5},{value:"Overwrite (clear and re-insert)",paraId:8,tocIndex:5},{value:`
Deletes all existing records from the target database table, then inserts the new data.`,paraId:8,tocIndex:5},{value:"Upsert (Insert or update)",paraId:9,tocIndex:5},{value:`
Checks whether each record exists (by primary key). If it does, it updates that record; if not, it inserts it.`,paraId:9,tocIndex:5},{value:"Insert-ignore",paraId:10,tocIndex:5},{value:`
Inserts new records, but if a record already exists (by primary key), the insertion is ignored (no updates occur).`,paraId:10,tocIndex:5},{value:"Skip",paraId:11,tocIndex:5},{value:`
Skips processing for the table entirely (no structure changes, no data migration).`,paraId:11,tocIndex:5},{value:"Additional notes:",paraId:12,tocIndex:5},{value:"\u201COverwrite,\u201D \u201CUpsert,\u201D and \u201CInsert-ignore\u201D all synchronize table structure changes as well.",paraId:13,tocIndex:5},{value:"If a table uses an auto-increment ID as its primary key, or if it has no primary key, neither \u201CUpsert\u201D nor \u201CInsert-ignore\u201D can be applied.",paraId:13,tocIndex:5},{value:"\u201CUpsert\u201D and \u201CInsert-ignore\u201D rely on the primary key to determine whether the record already exists.",paraId:13,tocIndex:5},{value:"You can configure the migration rules in the interface:",paraId:14,tocIndex:7},{value:"Enable independent rules:",paraId:15,tocIndex:7},{value:"Select which tables should be managed by these independent rules:",paraId:16,tocIndex:7},{value:"During execution, the system checks for environment variables (learn more about ",paraId:17,tocIndex:10},{value:"Environment Variables",paraId:18,tocIndex:10},{value:"):",paraId:17,tocIndex:10},{value:"If any required environment variables are missing, a prompt appears so you can add them before continuing:",paraId:19,tocIndex:10},{value:"Before any migration runs, the current application is automatically backed up. If the migration fails or the results are not as expected, you can roll back using the ",paraId:20,tocIndex:12},{value:"Backup Manager",paraId:21,tocIndex:12},{value:".",paraId:20,tocIndex:12}]}}]);
