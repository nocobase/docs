"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[67244],{805176:function(c,t,a){a.r(t);var r=a(572269),x=a(793359),_=a(861788),h=a(719977),v=a(20190),s=a(24268),d=a(496057),I=a(585939),m=a(28484),p=a(635206),j=a(375553),D=a(156266),f=a(572333),E=a(841118),g=a(39297),y=a(868526),P=a(605019),i=a(614651),o=a(280936),l=a(667294),n=a(961664),e=a(785893);function u(){return(0,e.jsx)(i.dY,{children:(0,e.jsx)(l.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"extending-synchronized-data-sources",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#extending-synchronized-data-sources",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Extending Synchronized Data Sources"]}),(0,e.jsxs)("h2",{id:"overview",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#overview",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Overview"]}),(0,e.jsx)("p",{children:n.texts[0].value}),(0,e.jsxs)("h2",{id:"server-side",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#server-side",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Server Side"]}),(0,e.jsxs)("h3",{id:"data-source-interface",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#data-source-interface",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Data Source Interface"]}),(0,e.jsxs)("p",{children:[n.texts[1].value,(0,e.jsx)("code",{children:n.texts[2].value}),n.texts[3].value]}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[4].value}),(0,e.jsxs)("p",{children:[n.texts[5].value,(0,e.jsx)("code",{children:n.texts[6].value}),n.texts[7].value,(0,e.jsx)("code",{children:n.texts[8].value}),n.texts[9].value]}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[10].value}),(0,e.jsxs)("h3",{id:"description-of-userdata-fields",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#description-of-userdata-fields",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Description of ",(0,e.jsx)("code",{children:n.texts[11].value})," Fields"]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:n.texts[12].value}),(0,e.jsx)("th",{children:n.texts[13].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[14].value})}),(0,e.jsxs)("td",{children:[n.texts[15].value,(0,e.jsx)("code",{children:n.texts[16].value}),n.texts[17].value,(0,e.jsx)("code",{children:n.texts[18].value})]})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[19].value})}),(0,e.jsx)("td",{children:n.texts[20].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[21].value})}),(0,e.jsx)("td",{children:n.texts[22].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[23].value})}),(0,e.jsx)("td",{children:n.texts[24].value})]})]})]}),(0,e.jsxs)("p",{children:[n.texts[25].value,(0,e.jsx)("code",{children:n.texts[26].value}),n.texts[27].value,(0,e.jsx)("code",{children:n.texts[28].value}),n.texts[29].value,(0,e.jsx)("code",{children:n.texts[30].value}),n.texts[31].value]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:n.texts[32].value}),(0,e.jsx)("th",{children:n.texts[33].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[34].value})}),(0,e.jsx)("td",{children:n.texts[35].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[36].value})}),(0,e.jsx)("td",{children:n.texts[37].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[38].value})}),(0,e.jsx)("td",{children:n.texts[39].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[40].value})}),(0,e.jsx)("td",{children:n.texts[41].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[42].value})}),(0,e.jsx)("td",{children:n.texts[43].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[44].value})}),(0,e.jsx)("td",{children:n.texts[45].value})]})]})]}),(0,e.jsxs)("p",{children:[n.texts[46].value,(0,e.jsx)("code",{children:n.texts[47].value}),n.texts[48].value,(0,e.jsx)("code",{children:n.texts[49].value}),n.texts[50].value,(0,e.jsx)("code",{children:n.texts[51].value}),n.texts[52].value]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:n.texts[53].value}),(0,e.jsx)("th",{children:n.texts[54].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[55].value})}),(0,e.jsx)("td",{children:n.texts[56].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[57].value})}),(0,e.jsx)("td",{children:n.texts[58].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:n.texts[59].value})}),(0,e.jsx)("td",{children:n.texts[60].value})]})]})]}),(0,e.jsxs)("h3",{id:"example-implementation-of-the-data-source-interface",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example-implementation-of-the-data-source-interface",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example Implementation of the Data Source Interface"]}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[61].value}),(0,e.jsxs)("h3",{id:"registering-a-data-source-type",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#registering-a-data-source-type",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Registering a Data Source Type"]}),(0,e.jsx)("p",{children:n.texts[62].value}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[63].value}),(0,e.jsx)("hr",{}),(0,e.jsxs)("h2",{id:"client-side",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#client-side",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Client Side"]}),(0,e.jsxs)("p",{children:[n.texts[64].value,(0,e.jsx)("code",{children:n.texts[65].value}),n.texts[66].value]}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[67].value}),(0,e.jsxs)("h3",{id:"backend-management-form",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#backend-management-form",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Backend Management Form"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/202412041429835.png",alt:"Backend Management Form"})}),(0,e.jsx)("p",{children:n.texts[68].value})]})})})})}t.default=u},961664:function(c,t,a){a.r(t),a.d(t,{texts:function(){return r}});const r=[{value:"NocoBase allows users to extend data source types for user data synchronization as needed.",paraId:0,tocIndex:1},{value:"The built-in user data synchronization plugin provides registration and management for data source types. To extend a data source type, inherit the ",paraId:1,tocIndex:3},{value:"SyncSource",paraId:1,tocIndex:3},{value:" abstract class provided by the plugin and implement the relevant standard interfaces.",paraId:1,tocIndex:3},{value:`import { SyncSource, UserData } from '@nocobase/plugin-user-data-sync';

class CustomSyncSource extends SyncSource {
  async pull(): Promise<UserData[]> {
    return [];
  }
}
`,paraId:2,tocIndex:3},{value:"The ",paraId:3,tocIndex:3},{value:"SyncSource",paraId:3,tocIndex:3},{value:" class includes an ",paraId:3,tocIndex:3},{value:"options",paraId:3,tocIndex:3},{value:" property to retrieve custom configurations for the data source.",paraId:3,tocIndex:3},{value:`import { SyncSource, UserData } from '@nocobase/plugin-user-data-sync';

class CustomSyncSource extends SyncSource {
  async pull(): Promise<UserData[]> {
    //...
    const { appid, secret } = this.options;
    //...
    return [];
  }
}
`,paraId:4,tocIndex:3},{value:"UserData",paraId:5},{value:"Field",paraId:6,tocIndex:4},{value:"Description",paraId:6,tocIndex:4},{value:"dataType",paraId:6,tocIndex:4},{value:"Data type, options are ",paraId:6,tocIndex:4},{value:"user",paraId:6,tocIndex:4},{value:" and ",paraId:6,tocIndex:4},{value:"department",paraId:6,tocIndex:4},{value:"uniqueKey",paraId:6,tocIndex:4},{value:"Unique identifier field",paraId:6,tocIndex:4},{value:"records",paraId:6,tocIndex:4},{value:"Data records",paraId:6,tocIndex:4},{value:"sourceName",paraId:6,tocIndex:4},{value:"Data source name",paraId:6,tocIndex:4},{value:"If ",paraId:7,tocIndex:4},{value:"dataType",paraId:7,tocIndex:4},{value:" is ",paraId:7,tocIndex:4},{value:"user",paraId:7,tocIndex:4},{value:", the ",paraId:7,tocIndex:4},{value:"records",paraId:7,tocIndex:4},{value:" field contains the following fields:",paraId:7,tocIndex:4},{value:"Field",paraId:8,tocIndex:4},{value:"Description",paraId:8,tocIndex:4},{value:"id",paraId:8,tocIndex:4},{value:"User ID",paraId:8,tocIndex:4},{value:"nickname",paraId:8,tocIndex:4},{value:"User nickname",paraId:8,tocIndex:4},{value:"avatar",paraId:8,tocIndex:4},{value:"User avatar",paraId:8,tocIndex:4},{value:"email",paraId:8,tocIndex:4},{value:"Email",paraId:8,tocIndex:4},{value:"phone",paraId:8,tocIndex:4},{value:"Phone number",paraId:8,tocIndex:4},{value:"departments",paraId:8,tocIndex:4},{value:"Array of department IDs",paraId:8,tocIndex:4},{value:"If ",paraId:9,tocIndex:4},{value:"dataType",paraId:9,tocIndex:4},{value:" is ",paraId:9,tocIndex:4},{value:"department",paraId:9,tocIndex:4},{value:", the ",paraId:9,tocIndex:4},{value:"records",paraId:9,tocIndex:4},{value:" field contains the following fields:",paraId:9,tocIndex:4},{value:"Field",paraId:10,tocIndex:4},{value:"Description",paraId:10,tocIndex:4},{value:"id",paraId:10,tocIndex:4},{value:"Department ID",paraId:10,tocIndex:4},{value:"name",paraId:10,tocIndex:4},{value:"Department name",paraId:10,tocIndex:4},{value:"parentId",paraId:10,tocIndex:4},{value:"Parent department ID",paraId:10,tocIndex:4},{value:`import { SyncSource, UserData } from '@nocobase/plugin-user-data-sync';

class CustomSyncSource extends SyncSource {
  async pull(): Promise<UserData[]> {
    // ...
    const ThirdClientApi = new ThirdClientApi(
      this.options.appid,
      this.options.secret,
    );
    const departments = await this.clientapi.getDepartments();
    const users = await this.clientapi.getUsers();
    // ...
    return [
      {
        dataType: 'department',
        uniqueKey: 'id',
        records: departments,
        sourceName: this.instance.name,
      },
      {
        dataType: 'user',
        uniqueKey: 'id',
        records: users,
        sourceName: this.instance.name,
      },
    ];
  }
}
`,paraId:11,tocIndex:5},{value:"The extended data source must be registered with the data management module.",paraId:12,tocIndex:6},{value:`import UserDataSyncPlugin from '@nocobase/plugin-user-data-sync';

class CustomSourcePlugin extends Plugin {
  async load() {
    const syncPlugin = this.app.pm.get(
      UserDataSyncPlugin,
    ) as UserDataSyncPlugin;
    if (syncPlugin) {
      syncPlugin.sourceManager.registerType('custom-source-type', {
        syncSource: CustomSyncSource,
        title: 'Custom Source',
      });
    }
  }
}
`,paraId:13,tocIndex:6},{value:"The client user interface registers data source types using the ",paraId:14,tocIndex:7},{value:"registerType",paraId:14,tocIndex:7},{value:" method provided by the user data synchronization plugin's client interface:",paraId:14,tocIndex:7},{value:`import SyncPlugin from '@nocobase/plugin-user-data-sync/client';

class CustomSourcePlugin extends Plugin {
  async load() {
    const sync = this.app.pm.get(SyncPlugin);
    sync.registerType(authType, {
      components: {
        AdminSettingsForm, // Backend management form
      },
    });
  }
}
`,paraId:15,tocIndex:7},{value:"The top section provides general data source configuration, while the bottom section allows for registration of custom configuration forms.",paraId:16,tocIndex:8}]}}]);
