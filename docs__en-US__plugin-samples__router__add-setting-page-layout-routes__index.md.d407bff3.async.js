"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[24499],{230095:function(d,i,t){t.r(i);var o=t(572269),c=t(793359),_=t(861788),p=t(719977),x=t(20190),a=t(24268),h=t(496057),g=t(585939),m=t(28484),v=t(635206),I=t(375553),j=t(156266),f=t(572333),P=t(841118),E=t(39297),y=t(868526),b=t(605019),s=t(614651),l=t(280936),u=t(667294),n=t(736578),e=t(785893);function r(){return(0,e.jsx)(s.dY,{children:(0,e.jsx)(u.Suspense,{fallback:(0,e.jsx)(l.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"add-plugin-setting-page-different-layout",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#add-plugin-setting-page-different-layout",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Add Plugin Setting Page (Different Layout)"]}),(0,e.jsxs)("h2",{id:"description",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#description",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Description"]}),(0,e.jsxs)("p",{children:[n.texts[0].value,(0,e.jsx)(s.rU,{to:"/development/client/router#existing-page-routes",children:n.texts[1].value}),n.texts[2].value,(0,e.jsx)("code",{children:n.texts[3].value}),n.texts[4].value,(0,e.jsx)("code",{children:n.texts[5].value}),n.texts[6].value]}),(0,e.jsxs)("h2",{id:"example-description",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example-description",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example Description"]}),(0,e.jsx)("p",{children:n.texts[7].value}),(0,e.jsxs)("p",{children:[n.texts[8].value,(0,e.jsx)(s.rU,{to:"/plugin-samples/plugin-settings",children:n.texts[9].value}),n.texts[10].value]}),(0,e.jsxs)("p",{children:[n.texts[11].value,(0,e.jsx)("a",{href:"https://github.com/nocobase/plugin-samples/tree/main/packages/plugins/%40nocobase-sample/plugin-add-setting-page-layout-routes",children:n.texts[12].value}),n.texts[13].value]}),(0,e.jsxs)("video",{width:"100%",controls:!0,children:[n.texts[14].value,(0,e.jsx)("source",{src:"https://static-docs.nocobase.com/10.mp4",type:"video/mp4"})]}),(0,e.jsxs)("h2",{id:"initialize-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#initialize-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Initialize the Plugin"]}),(0,e.jsxs)("p",{children:[n.texts[15].value,(0,e.jsx)(s.rU,{to:"/development/your-fisrt-plugin",children:n.texts[16].value}),n.texts[17].value]}),(0,e.jsx)(a.Z,{lang:"bash",children:n.texts[18].value}),(0,e.jsx)("p",{children:n.texts[19].value}),(0,e.jsx)(a.Z,{lang:"bash",children:n.texts[20].value}),(0,e.jsx)("p",{children:n.texts[21].value}),(0,e.jsx)(a.Z,{lang:"bash",children:n.texts[22].value}),(0,e.jsxs)("p",{children:[n.texts[23].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/pm/list/local/",children:n.texts[24].value}),n.texts[25].value]}),(0,e.jsxs)("h2",{id:"function-implementation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#function-implementation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Function Implementation"]}),(0,e.jsxs)("h3",{id:"1--register-the-plugin-setting-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1--register-the-plugin-setting-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1.  Register the Plugin Setting Page"]}),(0,e.jsxs)("p",{children:[n.texts[26].value,(0,e.jsx)(s.rU,{to:"/development/client/router#plugin-setting-page-extension",children:n.texts[27].value}),n.texts[28].value,(0,e.jsx)("code",{children:n.texts[29].value}),n.texts[30].value]}),(0,e.jsx)(a.Z,{lang:"tsx",children:n.texts[31].value}),(0,e.jsxs)("p",{children:[n.texts[32].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/settings/@nocobase-sample/plugin-add-setting-page-layout-routes",children:n.texts[33].value}),n.texts[34].value]}),(0,e.jsxs)("h3",{id:"2--add-detail-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2--add-detail-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2.  Add Detail Page"]}),(0,e.jsxs)("p",{children:[n.texts[35].value,(0,e.jsx)("code",{children:n.texts[36].value}),n.texts[37].value,(0,e.jsx)("code",{children:n.texts[38].value}),n.texts[39].value]}),(0,e.jsx)(a.Z,{lang:"diff",children:n.texts[40].value}),(0,e.jsxs)("p",{children:[n.texts[41].value,(0,e.jsx)("code",{children:n.texts[42].value}),n.texts[43].value,(0,e.jsx)("code",{children:n.texts[44].value}),n.texts[45].value]}),(0,e.jsxs)("video",{width:"100%",controls:!0,children:[n.texts[46].value,(0,e.jsx)("source",{src:"https://static-docs.nocobase.com/10.mp4",type:"video/mp4"})]}),(0,e.jsxs)("h2",{id:"permission-configuration",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#permission-configuration",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Permission Configuration"]}),(0,e.jsx)("p",{children:n.texts[47].value}),(0,e.jsxs)("p",{children:[n.texts[48].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/settings/users-permissions/roles",children:n.texts[49].value}),n.texts[50].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240512201624.png",alt:"20240512201624"})}),(0,e.jsxs)("h2",{id:"packaging-and-uploading-to-production-environment",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#packaging-and-uploading-to-production-environment",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Packaging and Uploading to Production Environment"]}),(0,e.jsxs)("p",{children:[n.texts[51].value,(0,e.jsx)(s.rU,{to:"/development/your-fisrt-plugin#building-and-packaging-plugins",children:n.texts[52].value}),n.texts[53].value]}),(0,e.jsx)("p",{children:n.texts[54].value}),(0,e.jsx)(a.Z,{lang:"bash",children:n.texts[55].value}),(0,e.jsxs)("p",{children:[n.texts[56].value,(0,e.jsx)("code",{children:n.texts[57].value}),n.texts[58].value]}),(0,e.jsx)(a.Z,{lang:"bash",children:n.texts[59].value}),(0,e.jsxs)("p",{children:[n.texts[60].value,(0,e.jsx)("code",{children:n.texts[61].value}),n.texts[62].value,(0,e.jsx)(s.rU,{to:"/welcome/getting-started/plugin",children:n.texts[63].value}),n.texts[64].value]})]})})})})}i.default=r},736578:function(d,i,t){t.r(i),t.d(i,{texts:function(){return o}});const o=[{value:"The plugin requires multiple configuration pages, and some pages are not under ",paraId:0,tocIndex:1},{value:"AdminSettingsLayout",paraId:1,tocIndex:1},{value:", usually for detail pages, such as the ",paraId:0,tocIndex:1},{value:"@nocobase/plugin-mobile-client",paraId:0,tocIndex:1},{value:" plugin or the ",paraId:0,tocIndex:1},{value:"@nocobase/plugin-workflow",paraId:0,tocIndex:1},{value:".",paraId:0,tocIndex:1},{value:"This example will have a configuration page, and inside the configuration page, there will be a detail link that, when clicked, will navigate to a new page.",paraId:2,tocIndex:2},{value:"This document will not go into much detail about the content development. It is only used to demonstrate how to add a plugin configuration page. For specific content and logic of the configuration page, please refer to the ",paraId:3,tocIndex:2},{value:"Plugin Settings plugin example",paraId:4,tocIndex:2},{value:" documentation.",paraId:3,tocIndex:2},{value:"You can find the complete example code for this document in the ",paraId:5,tocIndex:2},{value:"plugin-samples",paraId:5,tocIndex:2},{value:" repository.",paraId:5,tocIndex:2},{value:`
  `,paraId:6},{value:"Following the instructions in the ",paraId:7,tocIndex:3},{value:"Writing Your First Plugin",paraId:8,tocIndex:3},{value:" documentation, if you don't have a project yet, you can create one. If you already have one or have cloned the source code, you can skip this step.",paraId:7,tocIndex:3},{value:`yarn create nocobase-app my-nocobase-app -d postgres
cd my-nocobase-app
yarn install
yarn nocobase install
`,paraId:9,tocIndex:3},{value:"Then initialize a plugin and add it to the application:",paraId:10,tocIndex:3},{value:`yarn pm create @nocobase-sample/plugin-add-setting-page-layout-routes
yarn pm enable @nocobase-sample/plugin-add-setting-page-layout-routes
`,paraId:11,tocIndex:3},{value:"Then start the project:",paraId:12,tocIndex:3},{value:`yarn dev
`,paraId:13,tocIndex:3},{value:"Then, after logging in, visit ",paraId:14,tocIndex:3},{value:"http://localhost:13000/admin/pm/list/local/",paraId:14,tocIndex:3},{value:" to see that the plugin has been installed and enabled.",paraId:14,tocIndex:3},{value:"Following the instructions in the ",paraId:15,tocIndex:5},{value:"Plugin Setting Page Extension",paraId:16,tocIndex:5},{value:" section of the plugin development tutorial, we need to modify the ",paraId:15,tocIndex:5},{value:"packages/plugins/@nocobase-sample/plugin-add-setting-page-layout-routes/src/client/index.tsx",paraId:15,tocIndex:5},{value:" file:",paraId:15,tocIndex:5},{value:`import React from 'react';
import { Plugin } from '@nocobase/client';

// @ts-ignore
import { name } from '../../package.json';

const PluginSettingPage = () => <div>
  details
</div>

export class PluginAddSettingPageLayoutRoutesClient extends Plugin {
  async load() {
    this.app.pluginSettingsManager.add(name, {
      title: 'Different Layout',
      icon: 'ApiOutlined',
      Component: PluginSettingPage,
    });
  }
}

export default PluginAddSettingPageLayoutRoutesClient;
`,paraId:17,tocIndex:5},{value:"Then we can visit ",paraId:18,tocIndex:5},{value:"http://localhost:13000/admin/settings/@nocobase-sample/plugin-add-setting-page-layout-routes",paraId:18,tocIndex:5},{value:" to view the plugin configuration page.",paraId:18,tocIndex:5},{value:"\u6211\u4EEC\u51C6\u5907\u5728 ",paraId:19,tocIndex:6},{value:"AdminLayout",paraId:19,tocIndex:6},{value:" \u4E0B\u9762\u65B0\u589E\u4E00\u4E2A\u8BE6\u60C5\u9875\u9762\uFF0C\u6211\u4EEC\u7EE7\u7EED\u4FEE\u6539 ",paraId:19,tocIndex:6},{value:"packages/plugins/@nocobase-sample/plugin-add-setting-page-layout-routes/src/client/index.tsx",paraId:19,tocIndex:6},{value:"\uFF1A",paraId:19,tocIndex:6},{value:`+ import { Link } from 'react-router-dom'

const PluginSettingPage = () => <div>
- details
+ <Link path={\`/admin/\${name}-detail\`}>details</Link>
</div>

export class PluginAddSettingPageLayoutRoutesClient extends Plugin {
  async load() {
    // ...
+   this.app.router.add(\`admin.\${name}-details\`, {
+     path: \`/admin/\${name}-detail\`,
+     Component: () => <div>detail</div>,
+   });
  }
}
`,paraId:20,tocIndex:6},{value:"When we click on the ",paraId:21,tocIndex:6},{value:"details",paraId:21,tocIndex:6},{value:" link, it will navigate to the ",paraId:21,tocIndex:6},{value:"/admin/@nocobase-sample/plugin-add-setting-page-layout-routes-detail",paraId:21,tocIndex:6},{value:" page.",paraId:21,tocIndex:6},{value:`
  `,paraId:6},{value:"By default, the plugin configuration page does not have any permissions. Anyone can access and configure it. To configure permissions for the plugin, we need to configure them in the plugin settings.",paraId:22,tocIndex:7},{value:"We can visit ",paraId:23,tocIndex:7},{value:"http://localhost:13000/admin/settings/users-permissions/roles",paraId:23,tocIndex:7},{value:" to see all the roles. We can configure permissions in the plugin settings.",paraId:23,tocIndex:7},{value:"According to the documentation on ",paraId:24,tocIndex:8},{value:"Building and Packaging Plugins",paraId:25,tocIndex:8},{value:", we can package the plugin and upload it to the production environment.",paraId:24,tocIndex:8},{value:"If you have cloned the source code, you need to perform a full build first to build the dependencies of the plugin as well.",paraId:26,tocIndex:8},{value:`yarn build
`,paraId:27,tocIndex:8},{value:"If you are using ",paraId:28,tocIndex:8},{value:"create-nocobase-app",paraId:28,tocIndex:8},{value:" to create your project, you can directly execute:",paraId:28,tocIndex:8},{value:`yarn build @nocobase-sample/plugin-add-setting-page-layout-routes --tar
`,paraId:29,tocIndex:8},{value:"This way you can see the ",paraId:30,tocIndex:8},{value:"storage/tar/@nocobase-sample/plugin-add-setting-page-layout-routes.tar.gz",paraId:30,tocIndex:8},{value:" file, and then install it through the ",paraId:30,tocIndex:8},{value:"upload method",paraId:31,tocIndex:8},{value:".",paraId:30,tocIndex:8}]}}]);
