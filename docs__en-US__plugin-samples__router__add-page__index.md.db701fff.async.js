"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[2451],{645757:function(i,l,t){t.r(l);var s=t(572269),u=t(793359),x=t(861788),p=t(719977),h=t(20190),n=t(24268),v=t(496057),_=t(585939),m=t(28484),I=t(635206),g=t(375553),j=t(156266),f=t(572333),P=t(841118),E=t(39297),M=t(868526),b=t(605019),d=t(614651),o=t(280936),r=t(667294),a=t(613734),e=t(785893);function c(){return(0,e.jsx)(d.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"add-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#add-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Add Page"]}),(0,e.jsxs)("h2",{id:"description",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#description",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Description"]}),(0,e.jsx)("p",{children:a.texts[0].value}),(0,e.jsxs)("h2",{id:"example-description",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example-description",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example Description"]}),(0,e.jsx)("p",{children:a.texts[1].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[2].value}),a.texts[3].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[4].value}),a.texts[5].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[6].value}),a.texts[7].value,(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[8].value}),a.texts[9].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[10].value}),a.texts[11].value]})]})]})]}),(0,e.jsx)("p",{children:a.texts[12].value}),(0,e.jsxs)("p",{children:[a.texts[13].value,(0,e.jsx)("a",{href:"https://github.com/nocobase/plugin-samples/tree/main/packages/plugins/%40nocobase-sample/plugin-add-page",children:a.texts[14].value}),a.texts[15].value]}),(0,e.jsxs)("h2",{id:"initialize-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#initialize-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Initialize the Plugin"]}),(0,e.jsxs)("p",{children:[a.texts[16].value,(0,e.jsx)(d.rU,{to:"/development/your-fisrt-plugin",children:a.texts[17].value}),a.texts[18].value]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[19].value}),(0,e.jsx)("p",{children:a.texts[20].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[21].value}),(0,e.jsx)("p",{children:a.texts[22].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[23].value}),(0,e.jsxs)("p",{children:[a.texts[24].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/pm/list/local/",children:a.texts[25].value}),a.texts[26].value]}),(0,e.jsxs)("h2",{id:"function-implementation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#function-implementation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Function Implementation"]}),(0,e.jsxs)("h3",{id:"1--add-about-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1--add-about-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1.  Add ",(0,e.jsx)("code",{children:a.texts[27].value})," page"]}),(0,e.jsxs)("p",{children:[a.texts[28].value,(0,e.jsx)(d.rU,{to:"/development/client/router",children:a.texts[29].value}),a.texts[30].value,(0,e.jsx)("code",{children:a.texts[31].value}),a.texts[32].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[33].value}),(0,e.jsxs)("p",{children:[a.texts[34].value,(0,e.jsx)("code",{children:a.texts[35].value}),a.texts[36].value,(0,e.jsx)("code",{children:a.texts[37].value}),a.texts[38].value,(0,e.jsx)("code",{children:a.texts[39].value}),a.texts[40].value]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[41].value}),a.texts[42].value]}),(0,e.jsxs)("p",{children:[a.texts[43].value,(0,e.jsx)("a",{href:"http://localhost:13000/about",children:a.texts[44].value}),a.texts[45].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240512200508.png",alt:"20240512200508"})}),(0,e.jsxs)("h3",{id:"2--add-admindata-view-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2--add-admindata-view-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2.  Add ",(0,e.jsx)("code",{children:a.texts[46].value})," page"]}),(0,e.jsxs)("p",{children:[a.texts[47].value,(0,e.jsx)(d.rU,{to:"/development/client/router#existing-page-routes",children:a.texts[48].value}),a.texts[49].value,(0,e.jsx)("code",{children:a.texts[50].value}),a.texts[51].value,(0,e.jsx)("code",{children:a.texts[52].value}),a.texts[53].value,(0,e.jsx)("code",{children:a.texts[54].value}),a.texts[55].value,(0,e.jsx)("code",{children:a.texts[56].value}),a.texts[57].value,(0,e.jsx)("code",{children:a.texts[58].value}),a.texts[59].value]}),(0,e.jsx)(n.Z,{lang:"tsx",children:a.texts[60].value}),(0,e.jsxs)("p",{children:[a.texts[61].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/data-view",children:a.texts[62].value}),a.texts[63].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240512200555.png",alt:"20240512200555"})}),(0,e.jsxs)("h3",{id:"3--add-adminmaterial-manage-and-its-sub-pages",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3--add-adminmaterial-manage-and-its-sub-pages",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3.  Add ",(0,e.jsx)("code",{children:a.texts[64].value})," and its sub-pages"]}),(0,e.jsxs)("p",{children:[a.texts[65].value,(0,e.jsx)("code",{children:a.texts[66].value}),a.texts[67].value]}),(0,e.jsx)(n.Z,{lang:"tsx",children:a.texts[68].value}),(0,e.jsxs)("p",{children:[a.texts[69].value,(0,e.jsx)("code",{children:a.texts[70].value}),a.texts[71].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[72].value}),(0,e.jsxs)("p",{children:[a.texts[73].value,(0,e.jsx)("code",{children:a.texts[74].value}),a.texts[75].value,(0,e.jsx)("code",{children:a.texts[76].value}),a.texts[77].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[78].value}),(0,e.jsxs)("p",{children:[a.texts[79].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/material",children:a.texts[80].value}),a.texts[81].value,(0,e.jsx)("code",{children:a.texts[82].value}),a.texts[83].value,(0,e.jsx)("code",{children:a.texts[84].value}),a.texts[85].value,(0,e.jsx)("code",{children:a.texts[86].value}),a.texts[87].value]}),(0,e.jsxs)("video",{width:"100%",controls:!0,children:[a.texts[88].value,(0,e.jsx)("source",{src:"https://static-docs.nocobase.com/3.mp4",type:"video/mp4"})]}),(0,e.jsxs)("h2",{id:"packaging-and-uploading-to-production-environment",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#packaging-and-uploading-to-production-environment",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Packaging and Uploading to Production Environment"]}),(0,e.jsxs)("p",{children:[a.texts[89].value,(0,e.jsx)(d.rU,{to:"/development/your-fisrt-plugin#building-and-packaging-plugins",children:a.texts[90].value}),a.texts[91].value]}),(0,e.jsx)("p",{children:a.texts[92].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[93].value}),(0,e.jsxs)("p",{children:[a.texts[94].value,(0,e.jsx)("code",{children:a.texts[95].value}),a.texts[96].value]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[97].value}),(0,e.jsxs)("p",{children:[a.texts[98].value,(0,e.jsx)("code",{children:a.texts[99].value}),a.texts[100].value,(0,e.jsx)(d.rU,{to:"/welcome/getting-started/plugin",children:a.texts[101].value}),a.texts[102].value]})]})})})})}l.default=c},613734:function(i,l,t){t.r(l),t.d(l,{texts:function(){return s}});const s=[{value:"Add some pages for personalized display.",paraId:0,tocIndex:1},{value:"This example will add 4 pages:",paraId:1,tocIndex:2},{value:"/about",paraId:2,tocIndex:2},{value:": About page, used to display system-related information, accessible without logging in.",paraId:2,tocIndex:2},{value:"/admin/data-view",paraId:2,tocIndex:2},{value:": Data dashboard page, requires login to access.",paraId:2,tocIndex:2},{value:"/admin/material-manage",paraId:2,tocIndex:2},{value:`: Material management center, including image and video management, is a parent route page.
`,paraId:2,tocIndex:2},{value:"/admin/material-manage/image",paraId:3,tocIndex:2},{value:": Image management.",paraId:3,tocIndex:2},{value:"/admin/material-manage/video",paraId:3,tocIndex:2},{value:": Video management.",paraId:3,tocIndex:2},{value:"However, the content development will not be extensive, only for demonstration purposes.",paraId:4,tocIndex:2},{value:"You can find the complete example code in the ",paraId:5,tocIndex:2},{value:"plugin-samples",paraId:5,tocIndex:2},{value:" repository.",paraId:5,tocIndex:2},{value:"Following the instructions in the ",paraId:6,tocIndex:3},{value:"Writing Your First Plugin",paraId:7,tocIndex:3},{value:" documentation, if you don't have a project yet, you can create one. If you already have one or have cloned the source code, you can skip this step.",paraId:6,tocIndex:3},{value:`yarn create nocobase-app my-nocobase-app -d postgres
cd my-nocobase-app
yarn install
yarn nocobase install
`,paraId:8,tocIndex:3},{value:"Then initialize a plugin and add it to the application:",paraId:9,tocIndex:3},{value:`yarn pm create @nocobase-sample/plugin-add-page
yarn pm enable @nocobase-sample/plugin-add-page
`,paraId:10,tocIndex:3},{value:"Then start the project:",paraId:11,tocIndex:3},{value:`yarn dev
`,paraId:12,tocIndex:3},{value:"Then, after logging in, visit ",paraId:13,tocIndex:3},{value:"http://localhost:13000/admin/pm/list/local/",paraId:13,tocIndex:3},{value:" to see that the plugin has been installed and enabled.",paraId:13,tocIndex:3},{value:"/about",paraId:14},{value:"According to the ",paraId:15,tocIndex:5},{value:"Page Routing and Extension",paraId:16,tocIndex:5},{value:" documentation in the plugin development tutorial, we need to modify the ",paraId:15,tocIndex:5},{value:"packages/plugins/@nocobase-sample/plugin-add-page/src/client/index.tsx",paraId:15,tocIndex:5},{value:" file of the plugin:",paraId:15,tocIndex:5},{value:`import React, { useEffect } from 'react';
import { Plugin, useDocumentTitle } from '@nocobase/client';

const AboutPage = () => {
  const { setTitle } = useDocumentTitle();

  useEffect(() => {
    setTitle('About');
  }, [])

  return <div>About Page</div>;
}

export class PluginAddPageClient extends Plugin {
  async load() {
    this.app.router.add('about', {
      path: '/about',
      Component: AboutPage,
    })
  }
}

export default PluginAddPageClient;
`,paraId:17,tocIndex:5},{value:"The ",paraId:18,tocIndex:5},{value:"router.add()",paraId:18,tocIndex:5},{value:" function takes two parameters. The first parameter is the name of the page, which is used for CRUD operations and hierarchical nesting. The second parameter is the configuration of the page, where ",paraId:18,tocIndex:5},{value:"path",paraId:18,tocIndex:5},{value:" is the path of the page and ",paraId:18,tocIndex:5},{value:"Component",paraId:18,tocIndex:5},{value:" is the component of the page.",paraId:18,tocIndex:5},{value:"useDocumentTitle()",paraId:19,tocIndex:5},{value:" is used to modify the title of the page.",paraId:19,tocIndex:5},{value:"Then, when we visit ",paraId:20,tocIndex:5},{value:"http://localhost:13000/about",paraId:20,tocIndex:5},{value:', we can see that the page displays "About Page".',paraId:20,tocIndex:5},{value:"/admin/data-view",paraId:14},{value:"According to the ",paraId:21,tocIndex:6},{value:"Existing Page Routes",paraId:22,tocIndex:6},{value:" documentation, we know that ",paraId:21,tocIndex:6},{value:"/admin/*",paraId:21,tocIndex:6},{value:" corresponds to the ",paraId:21,tocIndex:6},{value:"name",paraId:21,tocIndex:6},{value:" ",paraId:21,tocIndex:6},{value:"admin",paraId:21,tocIndex:6},{value:". If we want to add a new page under it, we can use the ",paraId:21,tocIndex:6},{value:"admin.",paraId:21,tocIndex:6},{value:" prefix, for example ",paraId:21,tocIndex:6},{value:"admin.dataView",paraId:21,tocIndex:6},{value:".",paraId:21,tocIndex:6},{value:`// ...
const DataViewPage = () => {
  const { setTitle } = useDocumentTitle();

  useEffect(() => {
    setTitle('DataView');
  }, [])

  return <div>DataView</div>
};

export class PluginAddPageClient extends Plugin {
  async load() {
    // ...
    this.app.router.add('admin.dataView', {
      path: '/admin/data-view',
      Component: DataViewPage,
    })
  }
}

export default PluginAddPageClient;
`,paraId:23,tocIndex:6},{value:"Then we visit ",paraId:24,tocIndex:6},{value:"http://localhost:13000/admin/data-view",paraId:24,tocIndex:6},{value:', we can see that the page displays "DataView", and if we visit it again after logging out, it will redirect to the login page.',paraId:24,tocIndex:6},{value:"/admin/material-manage",paraId:14},{value:"We can create a ",paraId:25,tocIndex:7},{value:"packages/plugins/@nocobase-sample/plugin-add-page/src/client/MaterialPage.tsx",paraId:25,tocIndex:7},{value:" file with the following content:",paraId:25,tocIndex:7},{value:`import React, { useEffect } from 'react';
import { Outlet, Link } from 'react-router-dom';
import { useDocumentTitle } from '@nocobase/client';

export const MaterialPage = () => {
  return <div>
    <h1>Material Page</h1>
    <ul>
      <li>
        <Link to="video">Video</Link>
      </li>
      <li>
        <Link to="img">Img</Link>
      </li>
    </ul>
    <Outlet />
  </div>
}

export const MaterialVideo = () => {
  const { setTitle } = useDocumentTitle();

  useEffect(() => {
    setTitle('Material Video');
  }, [])

  return <div>Material Video</div>
}
export const MaterialImg = () => {
  const { setTitle } = useDocumentTitle();

  useEffect(() => {
    setTitle('Material Img');
  }, [])

  return <div>Material Img</div>;
}
`,paraId:26,tocIndex:7},{value:"Then in ",paraId:27,tocIndex:7},{value:"packages/plugins/@nocobase-sample/plugin-add-page/src/client/index.tsx",paraId:27,tocIndex:7},{value:" import and use:",paraId:27,tocIndex:7},{value:`// ...
import { MaterialImg, MaterialPage, MaterialVideo } from './MaterialPage';

export class PluginAddPageClient extends Plugin {
  async load() {
    // ...

    this.app.router.add('admin.material', {
      path: '/admin/material',
      Component: MaterialPage,
    })

    this.app.router.add('admin.material.video', {
      path: '/admin/material/video',
      Component: MaterialVideo,
    })

    this.app.router.add('admin.material.img', {
      path: '/admin/material/img',
      Component: MaterialImg,
    })
  }
}
`,paraId:28,tocIndex:7},{value:"If ",paraId:29,tocIndex:7},{value:"MaterialPage",paraId:29,tocIndex:7},{value:" is used as a parent page and does not need a custom layout, the ",paraId:29,tocIndex:7},{value:"Component",paraId:29,tocIndex:7},{value:" property can be omitted.",paraId:29,tocIndex:7},{value:`this.app.router.add('admin.material', {
  path: '/admin/material',
})
`,paraId:30,tocIndex:7},{value:"Then we visit ",paraId:31,tocIndex:7},{value:"http://localhost:13000/admin/material",paraId:31,tocIndex:7},{value:" and we can see that the ",paraId:31,tocIndex:7},{value:"Material Page",paraId:31,tocIndex:7},{value:" is already displayed on the page, and clicking on the ",paraId:31,tocIndex:7},{value:"Video",paraId:31,tocIndex:7},{value:" and ",paraId:31,tocIndex:7},{value:"Img",paraId:31,tocIndex:7},{value:" links can switch to the corresponding pages.",paraId:31,tocIndex:7},{value:`
      `,paraId:14},{value:"According to the documentation on ",paraId:32,tocIndex:8},{value:"Building and Packaging Plugins",paraId:33,tocIndex:8},{value:", we can package the plugin and upload it to the production environment.",paraId:32,tocIndex:8},{value:"If you have cloned the source code, you need to perform a full build first to build the dependencies of the plugin as well.",paraId:34,tocIndex:8},{value:`yarn build
`,paraId:35,tocIndex:8},{value:"If you are using ",paraId:36,tocIndex:8},{value:"create-nocobase-app",paraId:36,tocIndex:8},{value:" to create your project, you can directly execute:",paraId:36,tocIndex:8},{value:`yarn build @nocobase-sample/plugin-add-page --tar
`,paraId:37,tocIndex:8},{value:"This way you can see the ",paraId:38,tocIndex:8},{value:"storage/tar/@nocobase-sample/plugin-add-page.tar.gz",paraId:38,tocIndex:8},{value:" file, and then install it through the ",paraId:38,tocIndex:8},{value:"upload method",paraId:39,tocIndex:8},{value:".",paraId:38,tocIndex:8}]}}]);
