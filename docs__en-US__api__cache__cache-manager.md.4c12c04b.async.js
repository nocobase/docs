"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[54700],{420045:function(i,n,t){t.r(n);var r=t(572269),h=t(793359),u=t(861788),_=t(719977),v=t(20190),d=t(24268),s=t(496057),I=t(585939),j=t(28484),p=t(635206),m=t(375553),g=t(156266),f=t(572333),E=t(841118),y=t(39297),O=t(868526),M=t(605019),o=t(614651),c=t(280936),l=t(667294),a=t(689524),e=t(785893);function x(){return(0,e.jsx)(o.dY,{children:(0,e.jsx)(l.Suspense,{fallback:(0,e.jsx)(c.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"cachemanager",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#cachemanager",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"CacheManager"]}),(0,e.jsxs)("h2",{id:"overview",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#overview",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Overview"]}),(0,e.jsxs)("p",{children:[a.texts[0].value,(0,e.jsx)("a",{href:"https://github.com/node-cache-manager/node-cache-manager",children:a.texts[1].value}),a.texts[2].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:a.texts[3].value}),a.texts[4].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:a.texts[5].value}),a.texts[6].value]})]}),(0,e.jsx)("p",{children:a.texts[7].value}),(0,e.jsxs)("h3",{id:"concepts",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#concepts",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Concepts"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:a.texts[8].value}),a.texts[9].value,(0,e.jsx)("code",{children:a.texts[10].value}),a.texts[11].value,(0,e.jsx)("code",{children:a.texts[12].value}),a.texts[13].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:a.texts[14].value}),a.texts[15].value,(0,e.jsx)("code",{children:a.texts[16].value}),a.texts[17].value,(0,e.jsx)("code",{children:a.texts[18].value}),a.texts[19].value,(0,e.jsx)("code",{children:a.texts[20].value}),a.texts[21].value,(0,e.jsx)("code",{children:a.texts[22].value}),a.texts[23].value,(0,e.jsx)("code",{children:a.texts[24].value}),a.texts[25].value,(0,e.jsx)(o.rU,{to:"#storeoptions",children:(0,e.jsx)("code",{children:a.texts[26].value})}),a.texts[27].value,(0,e.jsx)("code",{children:a.texts[28].value}),a.texts[29].value,(0,e.jsx)("code",{children:a.texts[30].value}),a.texts[31].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:a.texts[32].value}),a.texts[33].value,(0,e.jsx)("code",{children:a.texts[34].value}),a.texts[35].value,(0,e.jsx)("code",{children:a.texts[36].value}),a.texts[37].value]})})]}),(0,e.jsxs)("h2",{id:"class-methods",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#class-methods",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Class Methods"]}),(0,e.jsxs)("h3",{id:"constructor",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#constructor",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:a.texts[38].value})]}),(0,e.jsxs)("h4",{id:"signature",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#signature",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Signature"]}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:a.texts[39].value})})}),(0,e.jsxs)("h4",{id:"type",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#type",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Type"]}),(0,e.jsx)(d.Z,{lang:"ts",children:a.texts[40].value}),(0,e.jsxs)("h4",{id:"details",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#details",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Details"]}),(0,e.jsxs)("h5",{id:"cachemanageroptions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#cachemanageroptions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"CacheManagerOptions"]}),(0,e.jsxs)(s.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:a.texts[41].value}),(0,e.jsx)("th",{children:a.texts[42].value}),(0,e.jsx)("th",{children:a.texts[43].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[44].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[45].value})}),(0,e.jsx)("td",{children:a.texts[46].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[47].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[48].value})}),(0,e.jsx)("td",{children:a.texts[49].value})]})]})]}),(0,e.jsxs)("h5",{id:"storeoptions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#storeoptions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"StoreOptions"]}),(0,e.jsxs)(s.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:a.texts[50].value}),(0,e.jsx)("th",{children:a.texts[51].value}),(0,e.jsx)("th",{children:a.texts[52].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[53].value})}),(0,e.jsxs)("td",{children:[(0,e.jsx)("code",{children:a.texts[54].value}),a.texts[55].value,(0,e.jsx)("code",{children:a.texts[56].value})]}),(0,e.jsxs)("td",{children:[a.texts[57].value,(0,e.jsx)("code",{children:a.texts[58].value}),a.texts[59].value]})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[60].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[61].value})}),(0,e.jsx)("td",{children:a.texts[62].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[63].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[64].value})}),(0,e.jsxs)("td",{children:[a.texts[65].value,(0,e.jsx)("code",{children:a.texts[66].value}),a.texts[67].value]})]})]})]}),(0,e.jsxs)("h4",{id:"default-options",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#default-options",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Default ",(0,e.jsx)("code",{children:a.texts[68].value})]}),(0,e.jsx)(d.Z,{lang:"ts",children:a.texts[69].value}),(0,e.jsxs)("p",{children:[a.texts[70].value,(0,e.jsx)("code",{children:a.texts[71].value}),a.texts[72].value]}),(0,e.jsx)(d.Z,{lang:"ts",children:a.texts[73].value}),(0,e.jsxs)("h3",{id:"registerstore",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#registerstore",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:a.texts[74].value})]}),(0,e.jsx)("p",{children:a.texts[75].value}),(0,e.jsx)(d.Z,{lang:"ts",children:a.texts[76].value}),(0,e.jsxs)("h4",{id:"signature-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#signature-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Signature"]}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:a.texts[77].value})})}),(0,e.jsxs)("h3",{id:"createcache",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#createcache",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:a.texts[78].value})]}),(0,e.jsx)("p",{children:a.texts[79].value}),(0,e.jsx)(d.Z,{lang:"ts",children:a.texts[80].value}),(0,e.jsxs)("h4",{id:"signature-2",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#signature-2",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Signature"]}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:a.texts[81].value})})}),(0,e.jsxs)("h4",{id:"details-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#details-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Details"]}),(0,e.jsxs)("h5",{id:"options",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#options",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"options"]}),(0,e.jsxs)(s.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:a.texts[82].value}),(0,e.jsx)("th",{children:a.texts[83].value}),(0,e.jsx)("th",{children:a.texts[84].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[85].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[86].value})}),(0,e.jsx)("td",{children:a.texts[87].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[88].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[89].value})}),(0,e.jsx)("td",{children:a.texts[90].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[91].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[92].value})}),(0,e.jsx)("td",{children:a.texts[93].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[94].value})}),(0,e.jsx)("td",{children:(0,e.jsx)("code",{children:a.texts[95].value})}),(0,e.jsx)("td",{children:a.texts[96].value})]})]})]}),(0,e.jsxs)("p",{children:[a.texts[97].value,(0,e.jsx)("code",{children:a.texts[98].value}),a.texts[99].value,(0,e.jsx)("code",{children:a.texts[100].value}),a.texts[101].value]})]})})})})}n.default=x},689524:function(i,n,t){t.r(n),t.d(n,{texts:function(){return r}});const r=[{value:"CacheManager is based on ",paraId:0,tocIndex:1},{value:"node-cache-manager",paraId:0,tocIndex:1},{value:" and provides caching module management for NocoBase. The built-in cache types are:",paraId:0,tocIndex:1},{value:"memory",paraId:1,tocIndex:1},{value:": Provided by the default lru-cache of node-cache-manager.",paraId:1,tocIndex:1},{value:"redis",paraId:1,tocIndex:1},{value:": Supported by node-cache-manager-redis-yet for Redis caching.",paraId:1,tocIndex:1},{value:"More types can be extended and registered through the API.",paraId:2,tocIndex:1},{value:"Store",paraId:3,tocIndex:2},{value:": Defines a caching method, including a factory method for creating caches and other related configurations. Each caching method has a unique identifier provided during registration. The two built-in caching methods correspond to the unique identifiers ",paraId:3,tocIndex:2},{value:"memory",paraId:3,tocIndex:2},{value:" and ",paraId:3,tocIndex:2},{value:"redis",paraId:3,tocIndex:2},{value:".",paraId:3,tocIndex:2},{value:"Store Factory Method",paraId:4,tocIndex:2},{value:": Provided by ",paraId:4,tocIndex:2},{value:"node-cache-manager",paraId:4,tocIndex:2},{value:" and related extension packages, used to create caches. Examples include ",paraId:4,tocIndex:2},{value:"memory",paraId:4,tocIndex:2},{value:" provided by ",paraId:4,tocIndex:2},{value:"node-cache-manager",paraId:4,tocIndex:2},{value:" by default, and ",paraId:4,tocIndex:2},{value:"redisStore",paraId:4,tocIndex:2},{value:" provided by ",paraId:4,tocIndex:2},{value:"node-cache-manager-redis-yet",paraId:4,tocIndex:2},{value:". In this context, the object to be provided corresponds to ",paraId:4,tocIndex:2},{value:"StoreOptions",paraId:5,tocIndex:2},{value:", which is the first parameter of the ",paraId:4,tocIndex:2},{value:"caching",paraId:4,tocIndex:2},{value:" method in ",paraId:4,tocIndex:2},{value:"node-cache-manager",paraId:4,tocIndex:2},{value:".",paraId:4,tocIndex:2},{value:"Cache",paraId:6,tocIndex:2},{value:": A class encapsulated by NocoBase, providing methods related to cache usage. When actually using caching, operations are performed on instances of ",paraId:6,tocIndex:2},{value:"Cache",paraId:6,tocIndex:2},{value:". Each ",paraId:6,tocIndex:2},{value:"Cache",paraId:6,tocIndex:2},{value:" instance has a unique identifier, which serves as a namespace for distinguishing different modules.",paraId:6,tocIndex:2},{value:"constructor()",paraId:7},{value:"constructor(options?: CacheManagerOptions)",paraId:8,tocIndex:5},{value:`export type CacheManagerOptions = Partial<{
  defaultStore: string;
  stores: {
    [storeType: string]: StoreOptions;
  };
}>;

type StoreOptions = {
  store?: 'memory' | FactoryStore<Store, any>;
  close?: (store: Store) => Promise<void>;
  // global config
  [key: string]: any;
};
`,paraId:9,tocIndex:6},{value:"Property",paraId:10,tocIndex:8},{value:"Type",paraId:10,tocIndex:8},{value:"Description",paraId:10,tocIndex:8},{value:"defaultStore",paraId:10,tocIndex:8},{value:"string",paraId:10,tocIndex:8},{value:"Unique identifier for the default cache type.",paraId:10,tocIndex:8},{value:"stores",paraId:10,tocIndex:8},{value:"Record<string, StoreOptions>",paraId:10,tocIndex:8},{value:"Registers cache types. The key is the unique identifier for the cache type, and the value is an object containing the registration method and global configurations.",paraId:10,tocIndex:8},{value:"Property",paraId:11,tocIndex:9},{value:"Type",paraId:11,tocIndex:9},{value:"Description",paraId:11,tocIndex:9},{value:"store",paraId:11,tocIndex:9},{value:"memory",paraId:11,tocIndex:9},{value:" | ",paraId:11,tocIndex:9},{value:"FactoryStore<Store, any>",paraId:11,tocIndex:9},{value:"The store factory method, corresponding to the first parameter of the ",paraId:11,tocIndex:9},{value:"caching",paraId:11,tocIndex:9},{value:" method.",paraId:11,tocIndex:9},{value:"close",paraId:11,tocIndex:9},{value:"(store: Store) => Promise<void>",paraId:11,tocIndex:9},{value:"Optional. For middleware that requires establishing a connection, such as Redis, provide a callback method for closing the connection. The parameter is the object returned by the store factory method.",paraId:11,tocIndex:9},{value:"[key: string]",paraId:11,tocIndex:9},{value:"any",paraId:11,tocIndex:9},{value:"Other global configurations for the store, corresponding to the second parameter of the ",paraId:11,tocIndex:9},{value:"caching",paraId:11,tocIndex:9},{value:" method.",paraId:11,tocIndex:9},{value:"options",paraId:7},{value:`import { redisStore, RedisStore } from 'cache-manager-redis-yet';

const defaultOptions: CacheManagerOptions = {
  defaultStore: 'memory',
  stores: {
    memory: {
      store: 'memory',
      // global config
      max: 2000,
    },
    redis: {
      store: redisStore,
      close: async (redis: RedisStore) => {
        await redis.client.quit();
      },
    },
  },
};
`,paraId:12,tocIndex:10},{value:"The ",paraId:13,tocIndex:10},{value:"options",paraId:13,tocIndex:10},{value:" parameter will be merged with the default options. Existing default options can be omitted. For example:",paraId:13,tocIndex:10},{value:`const cacheManager = new CacheManager({
  stores: {
    defaultStore: 'redis',
    redis: {
      // redisStore is already provided in the default options, so only need to provide redisStore configuration.
      url: 'redis://localhost:6379',
    },
  },
});
`,paraId:14,tocIndex:10},{value:"registerStore()",paraId:7},{value:"Register a new caching method. Example:",paraId:15,tocIndex:11},{value:`import { redisStore } from 'cache-manager-redis-yet';

cacheManager.registerStore({
  // Unique identifier for the store
  name: 'redis',
  // Factory method for creating the store
  store: redisStore,
  // Callback method for closing the store connection
  close: async (redis: RedisStore) => {
    await redis.client.quit();
  },
  // Global configurations
  url: 'xxx',
});
`,paraId:16,tocIndex:11},{value:"registerStore(options: { name: string } & StoreOptions)",paraId:17,tocIndex:12},{value:"createCache()",paraId:7},{value:"Create a cache. Example:",paraId:18,tocIndex:13},{value:`await cacheManager.createCache({
  name: 'default', // Unique identifier for the cache
  store: 'memory', // Unique identifier for the store
  prefix: 'mycache', // Automatically adds the 'mycache:' prefix to cache keys, optional
  // Other store configurations, custom configurations that will be merged with global store configurations
  max: 2000,
});
`,paraId:19,tocIndex:13},{value:"createCache(options: { name: string; prefix?: string; store?: string; [key: string]: any }): Promise<Cache>",paraId:20,tocIndex:14},{value:"Property",paraId:21,tocIndex:16},{value:"Type",paraId:21,tocIndex:16},{value:"Description",paraId:21,tocIndex:16},{value:"name",paraId:21,tocIndex:16},{value:"string",paraId:21,tocIndex:16},{value:"Unique identifier for the cache",paraId:21,tocIndex:16},{value:"store",paraId:21,tocIndex:16},{value:"string",paraId:21,tocIndex:16},{value:"Unique identifier for the store",paraId:21,tocIndex:16},{value:"prefix",paraId:21,tocIndex:16},{value:"string",paraId:21,tocIndex:16},{value:"Optional. Prefix automatically added to cache keys",paraId:21,tocIndex:16},{value:"[key: string]",paraId:21,tocIndex:16},{value:"any",paraId:21,tocIndex:16},{value:"Other custom store configurations",paraId:21,tocIndex:16},{value:"When ",paraId:22,tocIndex:16},{value:"store",paraId:22,tocIndex:16},{value:" is omitted, the ",paraId:22,tocIndex:16},{value:"defaultStore",paraId:22,tocIndex:16},{value:" will be used. In this case, the caching",paraId:22,tocIndex:16}]}}]);
