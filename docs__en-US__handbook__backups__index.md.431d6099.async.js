"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[98690],{876100:function(s,n,t){t.r(n);var d=t(572269),x=t(793359),_=t(861788),r=t(719977),m=t(20190),l=t(24268),v=t(496057),b=t(585939),I=t(28484),j=t(635206),g=t(375553),k=t(156266),f=t(572333),c=t(841118),w=t(39297),E=t(868526),o=t(605019),i=t(614651),u=t(280936),h=t(667294),a=t(793085),e=t(785893);function p(){return(0,e.jsx)(i.dY,{children:(0,e.jsx)(h.Suspense,{fallback:(0,e.jsx)(u.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h1",{id:"backups-manager",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#backups-manager",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Backups Manager"]})}),(0,e.jsx)(c.Z,{name:"backups",licenseBundled:"professional",licensebundled:"professional"}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"introduction",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#introduction",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Introduction"]}),(0,e.jsx)("p",{children:a.texts[0].value})]}),(0,e.jsx)(r.Z,{type:"warning",children:(0,e.jsxs)("p",{children:[a.texts[1].value,(0,e.jsx)("a",{href:"https://www.nocobase.com/en/blog/nocobase-backup-restore",children:(0,e.jsx)("code",{children:a.texts[2].value})})]})}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"installation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#installation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Installation"]}),(0,e.jsxs)("h3",{id:"install-database-client",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#install-database-client",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Install Database Client"]}),(0,e.jsx)("p",{children:a.texts[3].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[a.texts[4].value,(0,e.jsx)("a",{href:"https://dev.mysql.com/downloads/",children:a.texts[5].value})]}),(0,e.jsxs)("li",{children:[a.texts[6].value,(0,e.jsx)("a",{href:"https://www.postgresql.org/download/",children:a.texts[7].value})]})]}),(0,e.jsxs)("p",{children:[a.texts[8].value,(0,e.jsx)("code",{children:a.texts[9].value}),a.texts[10].value]}),(0,e.jsx)(l.Z,{lang:"bash",children:a.texts[11].value}),(0,e.jsxs)("p",{children:[a.texts[12].value,(0,e.jsx)("code",{children:a.texts[13].value}),a.texts[14].value]})]}),(0,e.jsxs)(o.Z,{children:[(0,e.jsx)("div",{label:"PostgreSQL",name:"PostgreSQL",children:(0,e.jsx)(l.Z,{lang:"bash",children:a.texts[15].value})}),(0,e.jsx)("div",{label:"MySQL/MariaDB",name:"MySQL/MariaDB",children:(0,e.jsx)(l.Z,{lang:"bash",children:a.texts[16].value})})]}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsx)("p",{children:a.texts[17].value}),(0,e.jsx)(l.Z,{lang:"bash",children:a.texts[18].value}),(0,e.jsx)("p",{children:a.texts[19].value})]}),(0,e.jsxs)(o.Z,{children:[(0,e.jsx)("div",{label:"PostgreSQL",name:"PostgreSQL",children:(0,e.jsx)(l.Z,{lang:"bash",children:a.texts[20].value})}),(0,e.jsx)("div",{label:"MySQL/MariaDB",name:"MySQL/MariaDB",children:(0,e.jsx)(l.Z,{lang:"bash",children:a.texts[21].value})})]}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h3",{id:"install-plugins",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#install-plugins",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Install Plugins"]}),(0,e.jsxs)("p",{children:[a.texts[22].value,(0,e.jsx)(i.rU,{to:"/welcome/getting-started/plugin",children:a.texts[23].value})]}),(0,e.jsxs)("h2",{id:"usage-instructions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#usage-instructions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Usage Instructions"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"Main Interface",src:t(961299)})}),(0,e.jsxs)("h3",{id:"create-new-backup",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#create-new-backup",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Create New Backup"]}),(0,e.jsxs)("p",{children:[a.texts[24].value,(0,e.jsx)("img",{alt:"Create New Backup",src:t(622198)})]}),(0,e.jsxs)("h3",{id:"restore-backup",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#restore-backup",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Restore Backup"]}),(0,e.jsx)("p",{children:a.texts[25].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[26].value}),(0,e.jsxs)("li",{children:[a.texts[27].value,(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[28].value}),(0,e.jsx)("li",{children:a.texts[29].value}),(0,e.jsx)("li",{children:a.texts[30].value}),(0,e.jsx)("li",{children:a.texts[31].value})]})]}),(0,e.jsxs)("li",{children:[a.texts[32].value,(0,e.jsx)("code",{children:a.texts[33].value}),a.texts[34].value]})]}),(0,e.jsx)("blockquote",{children:(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:a.texts[35].value})})}),(0,e.jsxs)("h4",{id:"restore-from-the-backup-list",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#restore-from-the-backup-list",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Restore from the backup list"]}),(0,e.jsx)("p",{children:a.texts[36].value}),(0,e.jsx)("blockquote",{children:(0,e.jsx)("p",{children:a.texts[37].value})}),(0,e.jsx)("blockquote",{children:(0,e.jsx)("p",{children:a.texts[38].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"Restore Backup",src:t(753357)})}),(0,e.jsxs)("h4",{id:"restore-from-local-backup-file",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#restore-from-local-backup-file",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Restore from local backup file"]}),(0,e.jsxs)("p",{children:[a.texts[39].value,(0,e.jsx)("code",{children:a.texts[40].value}),a.texts[41].value]}),(0,e.jsx)("blockquote",{children:(0,e.jsx)("p",{children:a.texts[42].value})}),(0,e.jsx)("blockquote",{children:(0,e.jsx)("p",{children:a.texts[43].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"Restore from Local Backup",src:t(70166)})}),(0,e.jsxs)("h4",{id:"download-backup-file",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#download-backup-file",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Download Backup File"]}),(0,e.jsxs)("p",{children:[a.texts[44].value,(0,e.jsx)("code",{children:a.texts[45].value}),a.texts[46].value]}),(0,e.jsxs)("h4",{id:"delete-backup",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#delete-backup",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Delete Backup"]}),(0,e.jsxs)("p",{children:[a.texts[47].value,(0,e.jsx)("code",{children:a.texts[48].value}),a.texts[49].value]}),(0,e.jsxs)("h2",{id:"backup-settings",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#backup-settings",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Backup Settings"]}),(0,e.jsxs)("p",{children:[a.texts[50].value,(0,e.jsx)("code",{children:a.texts[51].value}),a.texts[52].value,(0,e.jsx)("img",{alt:"Backup Settings",src:t(152468)})]}),(0,e.jsxs)("h3",{id:"backup-settings-description",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#backup-settings-description",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Backup Settings Description"]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[53].value}),a.texts[54].value,(0,e.jsx)("code",{children:a.texts[55].value}),a.texts[56].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[57].value}),a.texts[58].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[59].value}),a.texts[60].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[61].value}),a.texts[62].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[63].value}),a.texts[64].value]})]}),(0,e.jsx)("blockquote",{children:(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:a.texts[65].value})})})]})]})})})}n.default=p},793085:function(s,n,t){t.r(n),t.d(n,{texts:function(){return d}});const d=[{value:"The NocoBase backup manager plugin provides features for fully backing up of the NocoBase database and user uploaded files, including backup's scheduling, downloading, deleting, and restoring operation.",paraId:0,tocIndex:1},{value:"The Backup Manager plugin is included in the Professional and Enterprise editions. For Community and Standard edition users, you can directly back up the database; see details at: ",paraId:1},{value:"How to Backup and Restore NocoBase",paraId:1},{value:"Visit the official website to download the client that matches the version of the database you are using:",paraId:2,tocIndex:3},{value:"MySQL: ",paraId:3,tocIndex:3},{value:"https://dev.mysql.com/downloads/",paraId:3,tocIndex:3},{value:"PostgreSQL: ",paraId:3,tocIndex:3},{value:"https://www.postgresql.org/download/",paraId:3,tocIndex:3},{value:"For Docker versions, you can directly write a script in the ",paraId:4,tocIndex:3},{value:"./storage/scripts",paraId:4,tocIndex:3},{value:" directory",paraId:4,tocIndex:3},{value:`mkdir ./storage/scripts
cd ./storage/scripts
vim install-database-client.sh
`,paraId:5,tocIndex:3},{value:"The content of ",paraId:6,tocIndex:3},{value:"install-database-client.sh",paraId:6,tocIndex:3},{value:" is as follows:",paraId:6,tocIndex:3},{value:`#!/bin/bash

# Check if pg_dump is installed
if [ ! -f /usr/bin/pg_dump ]; then
    echo "pg_dump is not installed, starting PostgreSQL client installation..."

    # Install necessary tools and clean cache
    apt-get update && apt-get install -y --no-install-recommends wget gnupg \\
      && rm -rf /var/lib/apt/lists/*

    # Configure PostgreSQL source
    echo "deb [signed-by=/usr/share/keyrings/pgdg.asc] https://apt.postgresql.org/pub/repos/apt bookworm-pgdg main" > /etc/apt/sources.list.d/pgdg.list
    wget --quiet -O /usr/share/keyrings/pgdg.asc https://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc

    # Install PostgreSQL client
    apt-get update && apt-get install -y --no-install-recommends postgresql-client-16 \\
      && rm -rf /var/lib/apt/lists/*

    echo "PostgreSQL client installation completed."
else
    echo "pg_dump is already installed, skipping PostgreSQL client installation."
fi
`,paraId:7},{value:`#!/bin/bash

if [ ! -f /usr/bin/mysql ]; then
    echo "MySQL client is not installed, starting MySQL client installation..."
    echo "Updating package list and installing necessary tools..."
    apt-get update && apt-get install -y --no-install-recommends wget gnupg \\
        && rm -rf /var/lib/apt/lists/*

    wget --no-check-certificate https://downloads.mysql.com/archives/get/p/23/file/mysql-community-client-core_8.0.39-1debian12_amd64.deb && \\
        dpkg -x mysql-community-client-core_8.0.39-1debian12_amd64.deb /tmp/mysql-client && \\
        cp /tmp/mysql-client/usr/bin/mysqldump /usr/bin/ && \\
        cp /tmp/mysql-client/usr/bin/mysql /usr/bin/

    echo "MySQL client installation completed."
else
    echo "MySQL client is already installed, skipping installation."
fi
`,paraId:8},{value:"Then restart the app container",paraId:9},{value:`docker compose restart app
# View logs
docker compose logs app
`,paraId:10},{value:"Check the database client version number, which must match the database server version number",paraId:11},{value:`docker compose exec app bash -c "pg_dump -V"
`,paraId:12},{value:`docker compose exec app bash -c "mysql -V"
`,paraId:13},{value:"Refer to ",paraId:14,tocIndex:4},{value:"Installation and Upgrade of Commercial Plugins",paraId:15,tocIndex:4},{value:`Click the "New backup" button to create a new backup based on the backup configuration and display the backup status in the backup list.
`,paraId:16,tocIndex:6},{value:`Supports restoring backups from the backup list or uploading local backup files to restore backups.
Restore operations are not allowed in the following scenarios:`,paraId:17,tocIndex:7},{value:"When the current NocoBase version is lower than the NocoBase version in the backup file.",paraId:18,tocIndex:7},{value:`When the current NocoBase database is inconsistent with the following configurations in the backup file:
`,paraId:18,tocIndex:7},{value:"dialect",paraId:19,tocIndex:7},{value:"underscored",paraId:19,tocIndex:7},{value:"table prefix",paraId:19,tocIndex:7},{value:"schema",paraId:19,tocIndex:7},{value:"When the ",paraId:18,tocIndex:7},{value:"Tolerant mode",paraId:18,tocIndex:7},{value:" is not enabled, and the database version when creating the backup is higher than the current application database version.",paraId:18,tocIndex:7},{value:"Restore is a full database operation. It is recommended to back up the current database before restoring a backup.",paraId:20,tocIndex:7},{value:'Click the "Restore" button of the backup item in the backup list, enter the backup file encryption password in the pop-up window, and click "Confirm" to restore the backup.',paraId:21,tocIndex:8},{value:"Leave password empty for unencrypted backup.",paraId:22,tocIndex:8},{value:"If you need to restore the backup to a lower version of the database, you need to enable the tolerant mode.",paraId:23,tocIndex:8},{value:"Click the ",paraId:24,tocIndex:9},{value:"Restore from local backup",paraId:24,tocIndex:9},{value:' button, select the local backup file in the pop-up window, enter the backup file encryption password, and click "Confirm" to restore the backup.',paraId:24,tocIndex:9},{value:"Leave password empty for unencrypted backup.",paraId:25,tocIndex:9},{value:"If you need to restore the backup to a lower version of the database, you need to enable the tolerant mode.",paraId:26,tocIndex:9},{value:"Click the ",paraId:27,tocIndex:10},{value:"Download",paraId:27,tocIndex:10},{value:" button of the backup item in the backup list to download the backup file.",paraId:27,tocIndex:10},{value:"Click the ",paraId:28,tocIndex:11},{value:"Delete",paraId:28,tocIndex:11},{value:" button of the backup item in the backup list to delete the backup file.",paraId:28,tocIndex:11},{value:'Switch to the "Settings" tab, modify the backup settings, and click ',paraId:29,tocIndex:12},{value:"Save",paraId:29,tocIndex:12},{value:` to take effect.
`,paraId:29,tocIndex:12},{value:"Automatic backup",paraId:30,tocIndex:13},{value:": When enable ",paraId:30,tocIndex:13},{value:"Run automatic backup on the cron schedule",paraId:30,tocIndex:13},{value:", you can set automatic backups at specified times.",paraId:30,tocIndex:13},{value:"Maximum number of backups",paraId:30,tocIndex:13},{value:": Set the maximum number of locally saved backup files. After exceeding the number, the earliest backup files will be automatically deleted.",paraId:30,tocIndex:13},{value:"Sync backup to cloud storage",paraId:30,tocIndex:13},{value:": Set the cloud storage location where the backup files are automatically uploaded after successful backup, only support cloud storage.",paraId:30,tocIndex:13},{value:"Backup local storage files",paraId:30,tocIndex:13},{value:": Whether to include files uploaded by users to the server's local storage (storage/uploads) in the backup.",paraId:30,tocIndex:13},{value:"Restore password",paraId:30,tocIndex:13},{value:": If a restore password is set, it must be entered when restoring the backup.",paraId:30,tocIndex:13},{value:"Please keep the restore password safe. Forgetting the password will make it impossible to restore the backup file.",paraId:31,tocIndex:13}]},152468:function(s,n,t){s.exports=t.p+"static/backup-settings.a905d8f6.png"},961299:function(s,n,t){s.exports=t.p+"static/main-screen.3867e9a8.png"},622198:function(s,n,t){s.exports=t.p+"static/new-backup.75094cb5.png"},753357:function(s,n,t){s.exports=t.p+"static/restore-backup.8139deb9.png"},70166:function(s,n,t){s.exports=t.p+"static/restore-from-local.5f29753c.png"}}]);
