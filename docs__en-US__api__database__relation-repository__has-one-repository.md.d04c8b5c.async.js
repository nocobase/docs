"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[81065],{168212:function(r,s,a){a.r(s);var l=a(572269),x=a(793359),u=a(861788),h=a(719977),_=a(20190),n=a(24268),v=a(496057),p=a(585939),I=a(28484),j=a(635206),m=a(375553),f=a(156266),y=a(572333),E=a(841118),P=a(39297),g=a(868526),O=a(605019),d=a(614651),i=a(280936),o=a(667294),t=a(927783),e=a(785893);function c(){return(0,e.jsx)(d.dY,{children:(0,e.jsx)(o.Suspense,{fallback:(0,e.jsx)(i.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"hasonerepository",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#hasonerepository",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"HasOneRepository"]}),(0,e.jsxs)("h2",{id:"overview",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#overview",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Overview"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:t.texts[0].value}),t.texts[1].value,(0,e.jsx)("code",{children:t.texts[2].value}),t.texts[3].value]}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[4].value}),(0,e.jsxs)("h2",{id:"class-methods",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#class-methods",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Class Methods"]}),(0,e.jsxs)("h3",{id:"find",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#find",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:t.texts[5].value})]}),(0,e.jsx)("p",{children:t.texts[6].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[7].value})}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:t.texts[8].value})})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[9].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[10].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[11].value})}),(0,e.jsxs)("p",{children:[t.texts[12].value,(0,e.jsx)(d.rU,{to:"/api/database/repository#find",children:(0,e.jsx)("code",{children:t.texts[13].value})}),t.texts[14].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[15].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[16].value}),(0,e.jsxs)("h3",{id:"create",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#create",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:t.texts[17].value})]}),(0,e.jsx)("p",{children:t.texts[18].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[19].value})}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:t.texts[20].value})})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[21].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[22].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[23].value})}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[24].value}),t.texts[25].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[26].value}),t.texts[27].value,(0,e.jsx)("strong",{children:t.texts[28].value}),t.texts[29].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[30].value}),t.texts[31].value,(0,e.jsx)("strong",{children:t.texts[32].value}),t.texts[33].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[34].value}),t.texts[35].value]})]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[36].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[37].value}),(0,e.jsxs)("h3",{id:"update",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#update",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:t.texts[38].value})]}),(0,e.jsx)("p",{children:t.texts[39].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[40].value})}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:t.texts[41].value})})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[42].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[43].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[44].value})}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[45].value}),t.texts[46].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[47].value}),t.texts[48].value,(0,e.jsx)(d.rU,{to:"#find",children:(0,e.jsx)("code",{children:t.texts[49].value})}),t.texts[50].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[51].value}),t.texts[52].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[53].value}),t.texts[54].value,(0,e.jsx)("code",{children:t.texts[55].value}),t.texts[56].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[57].value}),t.texts[58].value,(0,e.jsx)("code",{children:t.texts[59].value}),t.texts[60].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[61].value}),t.texts[62].value]})]}),(0,e.jsxs)("p",{children:[t.texts[63].value,(0,e.jsx)("code",{children:t.texts[64].value}),t.texts[65].value,(0,e.jsx)("code",{children:t.texts[66].value}),t.texts[67].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[68].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[69].value}),(0,e.jsxs)("h3",{id:"remove",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#remove",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:t.texts[70].value})]}),(0,e.jsx)("p",{children:t.texts[71].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[72].value})}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:t.texts[73].value})})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[74].value})}),(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[75].value}),t.texts[76].value]})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[77].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[78].value}),(0,e.jsxs)("h3",{id:"destroy",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#destroy",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:t.texts[79].value})]}),(0,e.jsx)("p",{children:t.texts[80].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[81].value})}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:t.texts[82].value})})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[83].value})}),(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[84].value}),t.texts[85].value]})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[86].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[87].value}),(0,e.jsxs)("h3",{id:"set",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#set",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:t.texts[88].value})]}),(0,e.jsx)("p",{children:t.texts[89].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[90].value})}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:(0,e.jsx)("code",{children:t.texts[91].value})})}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[92].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[93].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[94].value})}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:t.texts[95].value}),(0,e.jsx)("li",{children:t.texts[96].value})]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[97].value})}),(0,e.jsx)(n.Z,{lang:"typescript",children:t.texts[98].value})]})})})})}s.default=c},927783:function(r,s,a){a.r(s),a.d(s,{texts:function(){return l}});const l=[{value:"HasOneRepository",paraId:0,tocIndex:1},{value:" is the associated repository of type ",paraId:0,tocIndex:1},{value:"HasOne",paraId:0,tocIndex:1},{value:".",paraId:0,tocIndex:1},{value:`const User = db.collection({
  name: 'users',
  fields: [
    { type: 'hasOne', name: 'profile' },
    { type: 'string', name: 'name' },
  ],
});

const Profile = db.collection({
  name: 'profiles',
  fields: [{ type: 'string', name: 'avatar' }],
});

const user = await User.repository.create({
  values: { name: 'u1' },
});

// Get the associated repository
const userProfileRepository = User.repository
  .relation('profile')
  .of(user.get('id'));

// Or to initialize directly
new HasOneRepository(User, 'profile', user.get('id'));
`,paraId:1,tocIndex:1},{value:"find()",paraId:2},{value:"Find associated objects.",paraId:3,tocIndex:3},{value:"Signature",paraId:4,tocIndex:3},{value:"async find(options?: SingleRelationFindOption): Promise<Model<any> | null>",paraId:5,tocIndex:3},{value:"Type",paraId:6,tocIndex:3},{value:`interface SingleRelationFindOption extends Transactionable {
  fields?: Fields;
  except?: Except;
  appends?: Appends;
  filter?: Filter;
}
`,paraId:7,tocIndex:3},{value:"Detailed Information",paraId:8,tocIndex:3},{value:"Query parameters are the same as ",paraId:9,tocIndex:3},{value:"Repository.find()",paraId:10,tocIndex:3},{value:".",paraId:9,tocIndex:3},{value:"Example",paraId:11,tocIndex:3},{value:`const profile = await UserProfileRepository.find();
// Return null if the associated object does not exist
`,paraId:12,tocIndex:3},{value:"create()",paraId:2},{value:"Create associated objects.",paraId:13,tocIndex:4},{value:"Signature",paraId:14,tocIndex:4},{value:"async create(options?: CreateOptions): Promise<Model>",paraId:15,tocIndex:4},{value:"Type",paraId:16,tocIndex:4},{value:`type WhiteList = string[];
type BlackList = string[];
type AssociationKeysToBeUpdate = string[];

interface CreateOptions extends SequelizeCreateOptions {
  values?: Values;
  whitelist?: WhiteList;
  blacklist?: BlackList;
  updateAssociationValues?: AssociationKeysToBeUpdate;
  context?: any;
}
`,paraId:17,tocIndex:4},{value:"Details",paraId:18,tocIndex:4},{value:"values",paraId:19,tocIndex:4},{value:": The data object of the record to be created.",paraId:19,tocIndex:4},{value:"whitelist",paraId:19,tocIndex:4},{value:": Specifies which fields in the data object of the record to be created ",paraId:19,tocIndex:4},{value:"can be written",paraId:19,tocIndex:4},{value:". If this parameter is not passed, all fields are allowed to be written by default.",paraId:19,tocIndex:4},{value:"blacklist",paraId:19,tocIndex:4},{value:": Specifies which fields in the data object of the record to be created ",paraId:19,tocIndex:4},{value:"are not allowed to be written",paraId:19,tocIndex:4},{value:". If this parameter is not passed, all fields are allowed to be written by default.",paraId:19,tocIndex:4},{value:"transaction",paraId:19,tocIndex:4},{value:": The transaction object. If no transaction parameter is passed, the method will automatically create an internal transaction.",paraId:19,tocIndex:4},{value:"Example",paraId:20,tocIndex:4},{value:`const profile = await UserProfileRepository.create({
  values: { avatar: 'avatar1' },
});

console.log(profile.toJSON());
/*
{
  id: 1,
  avatar: 'avatar1',
  userId: 1,
  updatedAt: 2022-09-24T13:59:40.025Z,
  createdAt: 2022-09-24T13:59:40.025Z
}
*/
`,paraId:21,tocIndex:4},{value:"update()",paraId:2},{value:"Update associated objects.",paraId:22,tocIndex:5},{value:"Signature",paraId:23,tocIndex:5},{value:"async update(options: UpdateOptions): Promise<Model>",paraId:24,tocIndex:5},{value:"Type",paraId:25,tocIndex:5},{value:`interface UpdateOptions extends Omit<SequelizeUpdateOptions, 'where'> {
  values: Values;
  filter?: Filter;
  filterByTk?: TargetKey;
  whitelist?: WhiteList;
  blacklist?: BlackList;
  updateAssociationValues?: AssociationKeysToBeUpdate;
  context?: any;
}
`,paraId:26,tocIndex:5},{value:"Details",paraId:27,tocIndex:5},{value:"values",paraId:28,tocIndex:5},{value:": The data object of the records to be updated.",paraId:28,tocIndex:5},{value:"filter",paraId:28,tocIndex:5},{value:": Specifies the filter conditions for the records to be updated. For detailed usage of Filter, refer to the ",paraId:28,tocIndex:5},{value:"find()",paraId:29,tocIndex:5},{value:" method.",paraId:28,tocIndex:5},{value:"filterByTk",paraId:28,tocIndex:5},{value:": Specifies the filter conditions for the records to be updated by TargetKey.",paraId:28,tocIndex:5},{value:"whitelist",paraId:28,tocIndex:5},{value:": A whitelist for the ",paraId:28,tocIndex:5},{value:"values",paraId:28,tocIndex:5},{value:" fields. Only fields listed will be written.",paraId:28,tocIndex:5},{value:"blacklist",paraId:28,tocIndex:5},{value:": A blacklist for the ",paraId:28,tocIndex:5},{value:"values",paraId:28,tocIndex:5},{value:" fields. Fields listed will not be written.",paraId:28,tocIndex:5},{value:"transaction",paraId:28,tocIndex:5},{value:": The transaction object. If no transaction parameter is passed, the method will automatically create an internal transaction.",paraId:28,tocIndex:5},{value:"At least one of ",paraId:30,tocIndex:5},{value:"filterByTk",paraId:30,tocIndex:5},{value:" or ",paraId:30,tocIndex:5},{value:"filter",paraId:30,tocIndex:5},{value:" must be provided.",paraId:30,tocIndex:5},{value:"Example",paraId:31,tocIndex:5},{value:`const profile = await UserProfileRepository.update({
  values: { avatar: 'avatar2' },
});

profile.get('avatar'); // 'avatar2'
`,paraId:32,tocIndex:5},{value:"remove()",paraId:2},{value:"Remove associated objects. Only to unassociate, not to delete the associated object.",paraId:33,tocIndex:6},{value:"Signature",paraId:34,tocIndex:6},{value:"async remove(options?: Transactionable): Promise<void>",paraId:35,tocIndex:6},{value:"Detailed Information",paraId:36,tocIndex:6},{value:"transaction",paraId:37,tocIndex:6},{value:": Transaction object. If no transaction parameter is passed, the method will automatically create an internal transaction.",paraId:37,tocIndex:6},{value:"Example",paraId:38,tocIndex:6},{value:`await UserProfileRepository.remove();
(await UserProfileRepository.find()) == null; // true

(await Profile.repository.count()) === 1; // true
`,paraId:39,tocIndex:6},{value:"destroy()",paraId:2},{value:"Delete associated objects.",paraId:40,tocIndex:7},{value:"Signature",paraId:41,tocIndex:7},{value:"async destroy(options?: Transactionable): Promise<Boolean>",paraId:42,tocIndex:7},{value:"Detailed Information",paraId:43,tocIndex:7},{value:"transaction",paraId:44,tocIndex:7},{value:": Transaction object. If no transaction parameter is passed, the method will automatically create an internal transaction.",paraId:44,tocIndex:7},{value:"Example",paraId:45,tocIndex:7},{value:`await UserProfileRepository.destroy();
(await UserProfileRepository.find()) == null; // true
(await Profile.repository.count()) === 0; // true
`,paraId:46,tocIndex:7},{value:"set()",paraId:2},{value:"Set associated objects.",paraId:47,tocIndex:8},{value:"Signature",paraId:48,tocIndex:8},{value:"async set(options: TargetKey | SetOption): Promise<void>",paraId:49,tocIndex:8},{value:"Type",paraId:50,tocIndex:8},{value:`interface SetOption extends Transactionable {
  tk?: TargetKey;
}
`,paraId:51,tocIndex:8},{value:"Detailed Information",paraId:52,tocIndex:8},{value:"tk: Set the targetKey of the associated object.",paraId:53,tocIndex:8},{value:"transaction: Transaction object. If no transaction parameter is passed, the method will automatically create an internal transaction.",paraId:53,tocIndex:8},{value:"Example",paraId:54,tocIndex:8},{value:`const newProfile = await Profile.repository.create({
  values: { avatar: 'avatar2' },
});

await UserProfileRepository.set(newProfile.get('id'));

(await UserProfileRepository.find()).get('id') === newProfile.get('id'); // true
`,paraId:55,tocIndex:8}]}}]);
