"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[81316],{716682:function(c,d,t){t.r(d);var s=t(572269),o=t(793359),x=t(861788),p=t(719977),I=t(20190),n=t(24268),v=t(496057),h=t(585939),j=t(28484),_=t(635206),m=t(375553),f=t(156266),E=t(572333),y=t(841118),g=t(39297),b=t(868526),C=t(605019),l=t(614651),r=t(280936),u=t(667294),a=t(326788),e=t(785893);function i(){return(0,e.jsx)(l.dY,{children:(0,e.jsx)(u.Suspense,{fallback:(0,e.jsx)(r.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"field-interface",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#field-interface",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Field Interface"]}),(0,e.jsxs)("p",{children:[a.texts[0].value,(0,e.jsx)("code",{children:a.texts[1].value}),a.texts[2].value,(0,e.jsx)("code",{children:a.texts[3].value}),a.texts[4].value,(0,e.jsx)("code",{children:a.texts[5].value}),a.texts[6].value]}),(0,e.jsxs)("h2",{id:"\u793A\u4F8B\u8BF4\u660E",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u793A\u4F8B\u8BF4\u660E",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u793A\u4F8B\u8BF4\u660E"]}),(0,e.jsxs)("p",{children:[a.texts[7].value,(0,e.jsx)("code",{children:a.texts[8].value}),a.texts[9].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[10].value}),(0,e.jsx)("li",{children:a.texts[11].value}),(0,e.jsx)("li",{children:a.texts[12].value})]}),(0,e.jsx)("p",{children:a.texts[13].value}),(0,e.jsxs)("p",{children:[a.texts[14].value,(0,e.jsx)("a",{href:"https://github.com/nocobase/plugin-samples/tree/main/packages/plugins/%40nocobase-sample/plugin-field-interface",children:a.texts[15].value}),a.texts[16].value]}),(0,e.jsxs)("video",{width:"100%",controls:!0,children:[a.texts[17].value,(0,e.jsx)("source",{src:"https://static-docs.nocobase.com/1721993076851.mov",type:"video/mp4"})]}),(0,e.jsxs)("h2",{id:"\u521D\u59CB\u5316\u63D2\u4EF6",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u521D\u59CB\u5316\u63D2\u4EF6",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u521D\u59CB\u5316\u63D2\u4EF6"]}),(0,e.jsxs)("p",{children:[a.texts[18].value,(0,e.jsx)(l.rU,{to:"/development/your-fisrt-plugin",children:a.texts[19].value}),a.texts[20].value]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[21].value}),(0,e.jsx)("p",{children:a.texts[22].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[23].value}),(0,e.jsx)("p",{children:a.texts[24].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[25].value}),(0,e.jsxs)("p",{children:[a.texts[26].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/pm/list/locale/",children:a.texts[27].value}),a.texts[28].value]}),(0,e.jsxs)("h2",{id:"\u6587\u6863\u77E5\u8BC6\u548C\u76EE\u5F55\u7ED3\u6784",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6587\u6863\u77E5\u8BC6\u548C\u76EE\u5F55\u7ED3\u6784",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6587\u6863\u77E5\u8BC6\u548C\u76EE\u5F55\u7ED3\u6784"]}),(0,e.jsx)("p",{children:a.texts[29].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:(0,e.jsx)("a",{href:"https://nodejs.org/api/crypto.html",children:a.texts[30].value})}),(0,e.jsxs)("li",{children:[(0,e.jsx)(l.rU,{to:"/api/database",children:a.texts[31].value}),a.texts[32].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("a",{href:"https://client.docs.nocobase.com/core/data-source/collection-field-interface",children:a.texts[33].value}),a.texts[34].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("a",{href:"https://client.docs.nocobase.com/core/data-source/collection-field-interface-manager",children:a.texts[35].value}),a.texts[36].value,(0,e.jsx)("code",{children:a.texts[37].value}),a.texts[38].value]})]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[39].value}),(0,e.jsxs)("h2",{id:"\u524D\u7AEF\u5B9E\u73B0",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u524D\u7AEF\u5B9E\u73B0",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u524D\u7AEF\u5B9E\u73B0"]}),(0,e.jsxs)("h3",{id:"1-\u7EC4\u4EF6",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-\u7EC4\u4EF6",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. \u7EC4\u4EF6"]}),(0,e.jsxs)("p",{children:[a.texts[40].value,(0,e.jsx)("code",{children:a.texts[41].value}),a.texts[42].value]}),(0,e.jsxs)("p",{children:[a.texts[43].value,(0,e.jsx)(l.rU,{to:"/plugin-samples/field/value",children:a.texts[44].value}),a.texts[45].value]}),(0,e.jsxs)("h3",{id:"2-field-interface",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-field-interface",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. Field Interface"]}),(0,e.jsxs)("h4",{id:"21-\u5B9A\u4E49",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#21-\u5B9A\u4E49",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2.1 \u5B9A\u4E49"]}),(0,e.jsxs)("p",{children:[a.texts[46].value,(0,e.jsx)("code",{children:a.texts[47].value}),a.texts[48].value]}),(0,e.jsx)(n.Z,{lang:"tsx",children:a.texts[49].value}),(0,e.jsxs)("p",{children:[a.texts[50].value,(0,e.jsx)("code",{children:a.texts[51].value}),a.texts[52].value,(0,e.jsx)("code",{children:a.texts[53].value}),a.texts[54].value,(0,e.jsx)("code",{children:a.texts[55].value}),a.texts[56].value,(0,e.jsx)("code",{children:a.texts[57].value}),a.texts[58].value,(0,e.jsx)("code",{children:a.texts[59].value}),a.texts[60].value,(0,e.jsx)("code",{children:a.texts[61].value}),a.texts[62].value,(0,e.jsx)("code",{children:a.texts[63].value}),a.texts[64].value,(0,e.jsx)("code",{children:a.texts[65].value}),a.texts[66].value,(0,e.jsx)("code",{children:a.texts[67].value}),a.texts[68].value,(0,e.jsx)("code",{children:a.texts[69].value}),a.texts[70].value,(0,e.jsx)("code",{children:a.texts[71].value}),a.texts[72].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[73].value}),a.texts[74].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[75].value}),a.texts[76].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[77].value}),a.texts[78].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[79].value}),a.texts[80].value,(0,e.jsx)("code",{children:a.texts[81].value})]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[82].value}),a.texts[83].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[84].value}),a.texts[85].value]})}),(0,e.jsxs)("li",{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[86].value}),a.texts[87].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[88].value}),a.texts[89].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[90].value}),a.texts[91].value,(0,e.jsx)("code",{children:a.texts[92].value}),a.texts[93].value]})]})]}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[94].value}),a.texts[95].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[96].value}),a.texts[97].value]})}),(0,e.jsxs)("li",{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[98].value}),a.texts[99].value,(0,e.jsx)("code",{children:a.texts[100].value}),a.texts[101].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[102].value}),a.texts[103].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[104].value}),a.texts[105].value]})]})]}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:a.texts[106].value}),a.texts[107].value]})})]}),(0,e.jsxs)("p",{children:[a.texts[108].value,(0,e.jsx)("code",{children:a.texts[109].value}),a.texts[110].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[a.texts[111].value,(0,e.jsx)("strong",{children:a.texts[112].value}),a.texts[113].value]}),(0,e.jsxs)("li",{children:[a.texts[114].value,(0,e.jsx)("code",{children:a.texts[115].value}),a.texts[116].value,(0,e.jsx)("code",{children:a.texts[117].value}),a.texts[118].value,(0,e.jsx)("code",{children:a.texts[119].value}),a.texts[120].value,(0,e.jsx)("code",{children:a.texts[121].value}),a.texts[122].value]})]}),(0,e.jsxs)("p",{children:[a.texts[123].value,(0,e.jsx)("a",{href:"https://client.docs.nocobase.com/core/data-source/collection-field-interface",children:a.texts[124].value}),a.texts[125].value]}),(0,e.jsxs)("h4",{id:"22-\u6CE8\u518C",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#22-\u6CE8\u518C",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2.2 \u6CE8\u518C"]}),(0,e.jsxs)("p",{children:[a.texts[126].value,(0,e.jsx)("code",{children:a.texts[127].value}),a.texts[128].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[129].value}),(0,e.jsxs)("p",{children:[a.texts[130].value,(0,e.jsx)("code",{children:a.texts[131].value}),a.texts[132].value,(0,e.jsx)("code",{children:a.texts[133].value}),a.texts[134].value]}),(0,e.jsxs)("p",{children:[a.texts[135].value,(0,e.jsx)("code",{children:a.texts[136].value}),a.texts[137].value,(0,e.jsx)("a",{href:"https://client.docs.nocobase.com/core/data-source/collection-field-interface-manager",children:a.texts[138].value}),a.texts[139].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240726193638.png",alt:"20240726193638"})}),(0,e.jsxs)("p",{children:[a.texts[140].value,(0,e.jsx)("code",{children:a.texts[141].value}),a.texts[142].value,(0,e.jsx)("strong",{children:a.texts[143].value}),a.texts[144].value]}),(0,e.jsxs)("h2",{id:"\u540E\u7AEF\u5B9E\u73B0",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u540E\u7AEF\u5B9E\u73B0",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u540E\u7AEF\u5B9E\u73B0"]}),(0,e.jsxs)("h3",{id:"1-\u5B9E\u73B0\u52A0\u89E3\u5BC6",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-\u5B9E\u73B0\u52A0\u89E3\u5BC6",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. \u5B9E\u73B0\u52A0\u89E3\u5BC6"]}),(0,e.jsxs)("p",{children:[a.texts[145].value,(0,e.jsx)("code",{children:a.texts[146].value}),a.texts[147].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[148].value}),(0,e.jsxs)("p",{children:[a.texts[149].value,(0,e.jsx)("code",{children:a.texts[150].value}),a.texts[151].value,(0,e.jsx)("code",{children:a.texts[152].value}),a.texts[153].value,(0,e.jsx)("code",{children:a.texts[154].value}),a.texts[155].value,(0,e.jsx)("code",{children:a.texts[156].value}),a.texts[157].value,(0,e.jsx)("code",{children:a.texts[158].value}),a.texts[159].value,(0,e.jsx)("code",{children:a.texts[160].value}),a.texts[161].value]}),(0,e.jsxs)("p",{children:[a.texts[162].value,(0,e.jsx)("code",{children:a.texts[163].value}),a.texts[164].value,(0,e.jsx)("a",{href:"https://nodejs.org/api/crypto.html",children:a.texts[165].value}),a.texts[166].value]}),(0,e.jsxs)("h3",{id:"2-\u5B9E\u73B0-field",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-\u5B9E\u73B0-field",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. \u5B9E\u73B0 Field"]}),(0,e.jsxs)("h4",{id:"21-\u5B9A\u4E49-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#21-\u5B9A\u4E49-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2.1 \u5B9A\u4E49"]}),(0,e.jsxs)("p",{children:[a.texts[167].value,(0,e.jsx)("code",{children:a.texts[168].value}),a.texts[169].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[170].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[a.texts[171].value,(0,e.jsx)("code",{children:a.texts[172].value}),a.texts[173].value]}),(0,e.jsx)("li",{children:a.texts[174].value}),(0,e.jsx)("li",{children:a.texts[175].value})]}),(0,e.jsxs)("h4",{id:"22-\u6CE8\u518C-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#22-\u6CE8\u518C-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2.2 \u6CE8\u518C"]}),(0,e.jsxs)("p",{children:[a.texts[176].value,(0,e.jsx)("code",{children:a.texts[177].value}),a.texts[178].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[179].value}),(0,e.jsxs)("p",{children:[a.texts[180].value,(0,e.jsx)("code",{children:a.texts[181].value}),a.texts[182].value,(0,e.jsx)("code",{children:a.texts[183].value}),a.texts[184].value,(0,e.jsx)(l.rU,{to:"/api/database#registerfieldtypes",children:a.texts[185].value}),a.texts[186].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240726192559.png",alt:"20240726192559"})}),(0,e.jsx)("p",{children:a.texts[187].value}),(0,e.jsxs)("h3",{id:"3-\u5B9E\u73B0\u64CD\u4F5C\u7B26",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3-\u5B9E\u73B0\u64CD\u4F5C\u7B26",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3. \u5B9E\u73B0\u64CD\u4F5C\u7B26"]}),(0,e.jsxs)("h4",{id:"31-\u5B9A\u4E49",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#31-\u5B9A\u4E49",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3.1 \u5B9A\u4E49"]}),(0,e.jsx)("p",{children:a.texts[188].value}),(0,e.jsxs)("h5",{id:"311-\u5C01\u88C5\u516C\u5171\u65B9\u6CD5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#311-\u5C01\u88C5\u516C\u5171\u65B9\u6CD5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3.1.1 \u5C01\u88C5\u516C\u5171\u65B9\u6CD5"]}),(0,e.jsxs)("p",{children:[a.texts[189].value,(0,e.jsx)("code",{children:a.texts[190].value}),a.texts[191].value,(0,e.jsx)("code",{children:a.texts[192].value}),a.texts[193].value,(0,e.jsx)("code",{children:a.texts[194].value}),a.texts[195].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[196].value}),(0,e.jsx)("p",{children:a.texts[197].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[198].value}),a.texts[199].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[200].value}),a.texts[201].value]})]}),(0,e.jsxs)("h5",{id:"312-\u5B9E\u73B0-encryptioneq",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#312-\u5B9E\u73B0-encryptioneq",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3.1.2 \u5B9E\u73B0 ",(0,e.jsx)("code",{children:a.texts[202].value})]}),(0,e.jsxs)("p",{children:[a.texts[203].value,(0,e.jsx)("code",{children:a.texts[204].value}),a.texts[205].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[206].value}),(0,e.jsxs)("p",{children:[a.texts[207].value,(0,e.jsx)("code",{children:a.texts[208].value}),a.texts[209].value]}),(0,e.jsxs)("h5",{id:"313-\u5B9E\u73B0-encryptionne",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#313-\u5B9E\u73B0-encryptionne",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3.1.3 \u5B9E\u73B0 ",(0,e.jsx)("code",{children:a.texts[210].value})]}),(0,e.jsxs)("p",{children:[a.texts[211].value,(0,e.jsx)("code",{children:a.texts[212].value}),a.texts[213].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[214].value}),(0,e.jsxs)("p",{children:[a.texts[215].value,(0,e.jsx)("code",{children:a.texts[216].value}),a.texts[217].value]}),(0,e.jsxs)("h4",{id:"32-\u6CE8\u518C\u64CD\u4F5C\u7B26",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#32-\u6CE8\u518C\u64CD\u4F5C\u7B26",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3.2 \u6CE8\u518C\u64CD\u4F5C\u7B26"]}),(0,e.jsxs)("p",{children:[a.texts[218].value,(0,e.jsx)("code",{children:a.texts[219].value}),a.texts[220].value]}),(0,e.jsx)(n.Z,{lang:"ts",children:a.texts[221].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240726192832.png",alt:"20240726192832"})}),(0,e.jsxs)("h2",{id:"\u591A\u8BED\u8A00",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u591A\u8BED\u8A00",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u591A\u8BED\u8A00"]}),(0,e.jsxs)("p",{children:[a.texts[222].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/settings/system-settings",children:a.texts[223].value}),a.texts[224].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240611113758.png",alt:"20240611113758"})}),(0,e.jsxs)("h3",{id:"\u82F1\u8BED",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u82F1\u8BED",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u82F1\u8BED"]}),(0,e.jsxs)("p",{children:[a.texts[225].value,(0,e.jsx)("code",{children:a.texts[226].value}),a.texts[227].value]}),(0,e.jsx)(n.Z,{lang:"diff",children:a.texts[228].value}),(0,e.jsxs)("h3",{id:"\u4E2D\u6587",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4E2D\u6587",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u4E2D\u6587"]}),(0,e.jsxs)("p",{children:[a.texts[229].value,(0,e.jsx)("code",{children:a.texts[230].value}),a.texts[231].value]}),(0,e.jsx)(n.Z,{lang:"diff",children:a.texts[232].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240726193259.png",alt:"20240726193259"})}),(0,e.jsxs)("h2",{id:"\u6253\u5305\u548C\u4E0A\u4F20\u5230\u751F\u4EA7\u73AF\u5883",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6253\u5305\u548C\u4E0A\u4F20\u5230\u751F\u4EA7\u73AF\u5883",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6253\u5305\u548C\u4E0A\u4F20\u5230\u751F\u4EA7\u73AF\u5883"]}),(0,e.jsxs)("p",{children:[a.texts[233].value,(0,e.jsx)(l.rU,{to:"/development/your-fisrt-plugin#%E6%9E%84%E5%BB%BA%E5%B9%B6%E6%89%93%E5%8C%85%E6%8F%92%E4%BB%B6",children:a.texts[234].value}),a.texts[235].value]}),(0,e.jsx)("p",{children:a.texts[236].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[237].value}),(0,e.jsxs)("p",{children:[a.texts[238].value,(0,e.jsx)("code",{children:a.texts[239].value}),a.texts[240].value]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[241].value}),(0,e.jsxs)("p",{children:[a.texts[242].value,(0,e.jsx)("code",{children:a.texts[243].value}),a.texts[244].value,(0,e.jsx)(l.rU,{to:"/welcome/getting-started/plugin",children:a.texts[245].value}),a.texts[246].value]})]})})})})}d.default=i},326788:function(c,d,t){t.r(d),t.d(d,{texts:function(){return s}});const s=[{value:"\u524D\u9762\u5DF2\u7ECF\u4ECB\u7ECD\u4E86\u57FA\u4E8E\u5DF2\u6709\u7684 ",paraId:0,tocIndex:0},{value:"Field interface",paraId:0,tocIndex:0},{value:" \u589E\u52A0\u7EC4\u4EF6\u7C7B\u578B\u7684\u65B9\u5F0F\u5B9E\u73B0\u5B57\u6BB5\u7EC4\u4EF6\u7684\u66FF\u6362\uFF0C\u4F46\u662F\u67D0\u4E9B\u573A\u666F\u4E0B\u65B0\u589E\u7684\u7EC4\u4EF6\u4E0D\u5C5E\u4E8E\u5DF2\u6709\u7684 ",paraId:0,tocIndex:0},{value:"Field interface",paraId:0,tocIndex:0},{value:"\uFF0C\u8FD9\u65F6\u5019\u6211\u4EEC\u5C31\u9700\u8981\u81EA\u5B9A\u4E49 ",paraId:0,tocIndex:0},{value:"Field interface",paraId:0,tocIndex:0},{value:"\u3002",paraId:0,tocIndex:0},{value:"\u672C\u6587\u4F1A\u65B0\u589E\u4E00\u4E2A ",paraId:1,tocIndex:1},{value:"Encryption",paraId:1,tocIndex:1},{value:" interface \u7C7B\u578B\u5373\u52A0\u89E3\u5BC6\u5B57\u6BB5\u3002\u5177\u4F53\u9700\u6C42\u5982\u4E0B\uFF1A",paraId:1,tocIndex:1},{value:"\u4F7F\u7528\u5BF9\u79F0\u52A0\u5BC6\u7B97\u6CD5\u5BF9\u5B57\u6BB5\u8FDB\u884C\u52A0\u5BC6\u548C\u89E3\u5BC6",paraId:2,tocIndex:1},{value:"\u52A0\u5BC6\u540E\uFF0C\u4EE5\u5BC6\u6587\u7684\u65B9\u5F0F\u88AB\u5B58\u50A8\u81F3\u6570\u636E\u5E93\u4E2D\uFF0C\u5728\u67E5\u770B\u6570\u636E\u65F6\u8FDB\u884C\u89E3\u5BC6\u660E\u6587\u663E\u793A",paraId:2,tocIndex:1},{value:"\u52A0\u5BC6\u540E\u7684\u5B57\u6BB5\u4E0D\u652F\u6301\u6A21\u7CCA\u641C\u7D22\uFF0C\u53EA\u652F\u6301\u7B49\u4E8E\u3001\u4E0D\u7B49\u4E8E\u3001\u4E3A\u7A7A\u3001\u4E0D\u4E3A\u7A7A\u7B49\u64CD\u4F5C",paraId:2,tocIndex:1},{value:"\u6B64\u529F\u80FD\u9700\u8981\u524D\u540E\u7AEF\u914D\u5408\u5B9E\u73B0\uFF0C\u524D\u7AEF\u9700\u8981\u5B9E\u73B0\u52A0\u5BC6\u548C\u89E3\u5BC6\u7684 Field interface\uFF0C\u540E\u7AEF\u9700\u8981\u5B9E\u73B0\u52A0\u5BC6\u548C\u89E3\u5BC6\u7684\u903B\u8F91\u3002",paraId:3,tocIndex:1},{value:"\u672C\u6587\u6863\u5B8C\u6574\u7684\u793A\u4F8B\u4EE3\u7801\u53EF\u4EE5\u5728 ",paraId:4,tocIndex:1},{value:"plugin-samples",paraId:4,tocIndex:1},{value:" \u4E2D\u67E5\u770B\u3002",paraId:4,tocIndex:1},{value:`
  `,paraId:5},{value:"\u6211\u4EEC\u6309\u7167 ",paraId:6,tocIndex:2},{value:"\u7F16\u5199\u7B2C\u4E00\u4E2A\u63D2\u4EF6",paraId:7,tocIndex:2},{value:" \u6587\u6863\u8BF4\u660E\uFF0C\u5982\u679C\u6CA1\u6709\u4E00\u4E2A\u9879\u76EE\uFF0C\u53EF\u4EE5\u5148\u521B\u5EFA\u4E00\u4E2A\u9879\u76EE\uFF0C\u5982\u679C\u5DF2\u7ECF\u6709\u4E86\u6216\u8005\u662F clone \u7684\u6E90\u7801\uFF0C\u5219\u8DF3\u8FC7\u8FD9\u4E00\u6B65\u3002",paraId:6,tocIndex:2},{value:`yarn create nocobase-app my-nocobase-app -d postgres
cd my-nocobase-app
yarn install
yarn nocobase install
`,paraId:8,tocIndex:2},{value:"\u7136\u540E\u521D\u59CB\u5316\u4E00\u4E2A\u63D2\u4EF6\uFF0C\u5E76\u6DFB\u52A0\u5230\u7CFB\u7EDF\u4E2D\uFF1A",paraId:9,tocIndex:2},{value:`yarn pm create @nocobase-sample/plugin-field-interface
yarn pm enable @nocobase-sample/plugin-field-interface
`,paraId:10,tocIndex:2},{value:"\u7136\u540E\u542F\u52A8\u9879\u76EE\u5373\u53EF\uFF1A",paraId:11,tocIndex:2},{value:`yarn dev
`,paraId:12,tocIndex:2},{value:"\u7136\u540E\u767B\u5F55\u540E\u8BBF\u95EE ",paraId:13,tocIndex:2},{value:"http://localhost:13000/admin/pm/list/locale/",paraId:13,tocIndex:2},{value:" \u5C31\u53EF\u4EE5\u770B\u5230\u63D2\u4EF6\u5DF2\u7ECF\u5B89\u88C5\u5E76\u542F\u7528\u4E86\u3002",paraId:13,tocIndex:2},{value:"\u5728\u5B9E\u73B0\u672C\u793A\u4F8B\u4E4B\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u5148\u4E86\u89E3\u4E00\u4E9B\u57FA\u7840\u77E5\u8BC6\uFF1A",paraId:14,tocIndex:3},{value:"NodeJS crypto \u6A21\u5757",paraId:15,tocIndex:3},{value:"Database",paraId:16,tocIndex:3},{value:"\uFF1A\u7528\u4E8E\u7BA1\u7406\u6570\u636E\u3001\u5B57\u6BB5\u3001\u6A21\u578B\u3001\u64CD\u4F5C\u7B49",paraId:15,tocIndex:3},{value:"CollectionFieldInterface",paraId:15,tocIndex:3},{value:"\uFF1A\u524D\u7AEF\u6570\u636E\u5B57\u6BB5\u7C7B",paraId:15,tocIndex:3},{value:"CollectionFieldInterfaceManager",paraId:15,tocIndex:3},{value:"\uFF1A\u524D\u7AEF\u7528\u6765\u7BA1\u7406 ",paraId:15,tocIndex:3},{value:"CollectionFieldInterface",paraId:15,tocIndex:3},{value:" \u7684\u7C7B",paraId:15,tocIndex:3},{value:`.
\u251C\u2500\u2500 client # \u5BA2\u6237\u7AEF\u63D2\u4EF6
\u2502   \u251C\u2500\u2500 EncryptionFieldInterface.tsx # \u524D\u7AEF Field Interface
\u2502   \u251C\u2500\u2500 locale.ts # \u591A\u8BED\u8A00\u5DE5\u5177\u51FD\u6570
\u2502   \u2514\u2500\u2500 index.ts # \u524D\u7AEF\u5165\u53E3\u6587\u4EF6
\u251C\u2500\u2500 locale
\u2502   \u251C\u2500\u2500 en-US.json # \u82F1\u8BED
\u2502   \u2514\u2500\u2500 zh-CN.json # \u4E2D\u6587
\u251C\u2500\u2500 index.ts # \u670D\u52A1\u7AEF\u63D2\u4EF6\u5165\u53E3
\u2514\u2500\u2500 server
      \u251C\u2500\u2500 encryption-field.ts # \u52A0\u89E3\u5BC6\u5B57\u6BB5
      \u251C\u2500\u2500 index.ts # \u670D\u52A1\u7AEF\u5165\u53E3\u6587\u4EF6
      \u251C\u2500\u2500 operators # \u67E5\u8BE2\u64CD\u4F5C\u7B26
      \u2502   \u251C\u2500\u2500 eq.ts # \u7B49\u4E8E
      \u2502   \u251C\u2500\u2500 ne.ts # \u4E0D\u7B49\u4E8E
      \u2502   \u2514\u2500\u2500 utils.ts # \u5DE5\u5177\u51FD\u6570
      \u251C\u2500\u2500 plugin.ts  # \u670D\u52A1\u7AEF\u63D2\u4EF6
      \u2514\u2500\u2500 utils.ts # \u5DE5\u5177\u51FD\u6570
`,paraId:17,tocIndex:3},{value:"\u7531\u4E8E\u52A0\u89E3\u5BC6\u7528\u7684\u662F\u5B57\u7B26\u4E32\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 ",paraId:18,tocIndex:5},{value:"Input",paraId:18,tocIndex:5},{value:" \u7EC4\u4EF6\uFF0C\u5E76\u4E0D\u9700\u8981\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u3002",paraId:18,tocIndex:5},{value:"\u5982\u679C\u5176\u4ED6\u9700\u6C42\u9700\u8981\u81EA\u5B9A\u4E49\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u53C2\u8003 ",paraId:19,tocIndex:5},{value:"\u6709\u503C\u5B57\u6BB5\u7EC4\u4EF6",paraId:20,tocIndex:5},{value:" \u6587\u6863\u3002",paraId:19,tocIndex:5},{value:"\u6211\u4EEC\u65B0\u5EFA ",paraId:21,tocIndex:7},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/client/EncryptionFieldInterface.tsx",paraId:21,tocIndex:7},{value:" \u6587\u4EF6\uFF1A",paraId:21,tocIndex:7},{value:`import { CollectionFieldInterface, defaultProps } from '@nocobase/client';
import { uid } from '@nocobase/utils/client';
import { tStr } from './locale';

export class EncryptionFieldInterface extends CollectionFieldInterface {
  name = 'encryption';
  type = 'object';
  group = 'advanced';
  order = 10;
  title = tStr('Encryption');
  default = {
    type: 'encryption',
    iv: uid(16),
    uiSchema: {
      type: 'string',
      'x-component': 'Input',
    },
  };
  availableTypes = ['string'];
  hasDefaultValue = true;
  properties = {
    ...defaultProps,
  };
  filterable = {
    operators: [
      { label: '{{t("is")}}', value: '$encryptionEq', selected: true },
      { label: '{{t("is not")}}', value: '$encryptionNe' },
      { label: '{{t("exists")}}', value: '$exists', noValue: true },
      { label: '{{t("not exists")}}', value: '$notExists', noValue: true },
    ],
  };
}
`,paraId:22,tocIndex:7},{value:"\u6240\u6709\u7684 Field interface \u90FD\u9700\u8981\u7EE7\u627F ",paraId:23,tocIndex:7},{value:"CollectionFieldInterface",paraId:23,tocIndex:7},{value:" \u7C7B\uFF0C\u7136\u540E\u5B9E\u73B0 ",paraId:23,tocIndex:7},{value:"name",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"type",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"group",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"order",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"title",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"default",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"availableTypes",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"hasDefaultValue",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"properties",paraId:23,tocIndex:7},{value:"\u3001",paraId:23,tocIndex:7},{value:"filterable",paraId:23,tocIndex:7},{value:" \u7B49\u5C5E\u6027\uFF0C\u5177\u4F53\u6BCF\u4E2A\u5C5E\u6027\u7684\u542B\u4E49\u4E3A\uFF1A",paraId:23,tocIndex:7},{value:"tStr",paraId:24,tocIndex:7},{value:"\uFF1A\u751F\u6210\u591A\u8BED\u8A00\u5B57\u7B26\u4E32\u6A21\u677F",paraId:24,tocIndex:7},{value:"name",paraId:25,tocIndex:7},{value:"\uFF1AField interface \u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u533A\u5206\u4E0D\u540C\u7684 Field interface",paraId:25,tocIndex:7},{value:"type",paraId:26,tocIndex:7},{value:"\uFF1A\uFF1F",paraId:26,tocIndex:7},{value:"group",paraId:27,tocIndex:7},{value:"\uFF1A\u5206\u7EC4\uFF0C\u7528\u4E8E\u5728\u5B57\u6BB5\u8BBE\u7F6E\u4E2D\u5206\u7EC4\u663E\u793A\uFF0C\u8FD9\u91CC\u6211\u4EEC\u8BBE\u7F6E\u4E3A ",paraId:27,tocIndex:7},{value:"advanced",paraId:27,tocIndex:7},{value:"order",paraId:28,tocIndex:7},{value:"\uFF1A\u6392\u5E8F\uFF0C\u7528\u4E8E\u5728\u5B57\u6BB5\u8BBE\u7F6E\u4E2D\u6392\u5E8F\u663E\u793A",paraId:28,tocIndex:7},{value:"title",paraId:29,tocIndex:7},{value:"\uFF1A\u6807\u9898\uFF0C\u7528\u4E8E\u5728\u5B57\u6BB5\u8BBE\u7F6E\u4E2D\u663E\u793A",paraId:29,tocIndex:7},{value:"default",paraId:30,tocIndex:7},{value:"\uFF1A\u5B57\u6BB5\u914D\u7F6E\uFF0C\u63D2\u5165\u5230\u6570\u636E\u5E93\u4E2D\u7684\u9ED8\u8BA4\u503C",paraId:30,tocIndex:7},{value:"iv",paraId:31,tocIndex:7},{value:"\uFF1A\u521D\u59CB\u5316\u5411\u91CF\uFF0C\u968F\u673A\u5B57\u7B26\u4E32\uFF0C\u7528\u4E8E\u52A0\u5BC6",paraId:31,tocIndex:7},{value:"uiSchema",paraId:31,tocIndex:7},{value:"\uFF1A\u5B57\u6BB5\u7684 UI \u914D\u7F6E\uFF0C\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528 ",paraId:31,tocIndex:7},{value:"Input",paraId:31,tocIndex:7},{value:" \u7EC4\u4EF6",paraId:31,tocIndex:7},{value:"availableTypes",paraId:32,tocIndex:7},{value:"\uFF1A\u53EF\u7528\u7684\u5B57\u6BB5\u7C7B\u578B",paraId:32,tocIndex:7},{value:"hasDefaultValue",paraId:33,tocIndex:7},{value:"\uFF1A\u662F\u5426\u6709\u9ED8\u8BA4\u503C\u914D\u7F6E",paraId:33,tocIndex:7},{value:"properties",paraId:34,tocIndex:7},{value:"\uFF1A\u5C5E\u6027\u914D\u7F6E\uFF0C\u5176\u4E2D ",paraId:34,tocIndex:7},{value:"defaultProps",paraId:34,tocIndex:7},{value:" \u5305\u542B",paraId:34,tocIndex:7},{value:"name",paraId:35,tocIndex:7},{value:"\uFF1A\u5B57\u6BB5\u540D",paraId:35,tocIndex:7},{value:"displayName",paraId:35,tocIndex:7},{value:"\uFF1A\u5B57\u6BB5\u663E\u793A\u540D",paraId:35,tocIndex:7},{value:"filterable",paraId:36,tocIndex:7},{value:"\uFF1A\u53EF\u8FC7\u6EE4\u7684\u64CD\u4F5C\u7B26\u3002",paraId:36,tocIndex:7},{value:"\u5176\u4E2D\u5173\u4E8E ",paraId:37,tocIndex:7},{value:"filterable",paraId:37,tocIndex:7},{value:" \u6709 2 \u70B9\u6CE8\u610F\uFF1A",paraId:37,tocIndex:7},{value:"\u56E0\u4E3A\u5B58\u50A8\u5230\u6570\u636E\u5E93\u4E2D\u662F\u5BC6\u6587\uFF0C\u6240\u4EE5\u4EC5\u652F\u6301 ",paraId:38,tocIndex:7},{value:"\u76F8\u7B49\u3001\u4E0D\u7B49\u3001\u5B58\u5728\u3001\u4E0D\u5B58\u5728",paraId:38,tocIndex:7},{value:" \u64CD\u4F5C\u7B26",paraId:38,tocIndex:7},{value:"\u641C\u7D22\u5B57\u7B26\u4E32\u7684\u65F6\u5019\uFF0C\u9700\u8981\u5C06\u5B57\u7B26\u4E32\u89E3\u5BC6\u540E\u518D\u8FDB\u884C\u641C\u7D22\uFF0C\u6240\u4EE5\u8FD9\u91CC\u4E0D\u80FD\u4F7F\u7528\u9ED8\u8BA4\u7684 ",paraId:38,tocIndex:7},{value:"$eq",paraId:38,tocIndex:7},{value:"\u3001",paraId:38,tocIndex:7},{value:"$ne",paraId:38,tocIndex:7},{value:" \u64CD\u4F5C\u7B26\uFF0C\u9700\u8981\u81EA\u5B9A\u4E49\u64CD\u4F5C\u7B26\u4E3A ",paraId:38,tocIndex:7},{value:"$encryptionEq",paraId:38,tocIndex:7},{value:"\u3001",paraId:38,tocIndex:7},{value:"$encryptionNe",paraId:38,tocIndex:7},{value:"\u3002",paraId:38,tocIndex:7},{value:"\u66F4\u591A\u5173\u4E8E CollectionFieldInterface \u7684\u5C5E\u6027\u548C\u65B9\u6CD5\u53EF\u4EE5\u67E5\u770B ",paraId:39,tocIndex:7},{value:"CollectionFieldInterface",paraId:39,tocIndex:7},{value:" \u6587\u6863\u3002",paraId:39,tocIndex:7},{value:"\u6211\u4EEC\u4FEE\u6539 ",paraId:40,tocIndex:8},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/client/index.ts",paraId:40,tocIndex:8},{value:" \u6587\u4EF6\uFF1A",paraId:40,tocIndex:8},{value:`import { Plugin } from '@nocobase/client';
import { EncryptionFieldInterface } from './EncryptionFieldInterface';

export class PluginFieldInterfaceClient extends Plugin {
  async load() {
    this.app.dataSourceManager.collectionFieldInterfaceManager.addFieldInterfaces([EncryptionFieldInterface]);
  }
}

export default PluginFieldInterfaceClient;
`,paraId:41,tocIndex:8},{value:"\u6211\u4EEC\u901A\u8FC7 ",paraId:42,tocIndex:8},{value:"collectionFieldInterfaceManager.addFieldInterfaces()",paraId:42,tocIndex:8},{value:" \u5C06 ",paraId:42,tocIndex:8},{value:"EncryptionFieldInterface",paraId:42,tocIndex:8},{value:" \u6CE8\u518C\u5230\u7CFB\u7EDF\u4E2D\u3002",paraId:42,tocIndex:8},{value:"\u66F4\u591A\u5173\u4E8E ",paraId:43,tocIndex:8},{value:"CollectionFieldInterfaceManager",paraId:43,tocIndex:8},{value:" \u7684\u5C5E\u6027\u548C\u65B9\u6CD5\u53EF\u4EE5\u67E5\u770B ",paraId:43,tocIndex:8},{value:"\u6587\u6863",paraId:43,tocIndex:8},{value:"\u3002",paraId:43,tocIndex:8},{value:"\u6B64\u65F6\u754C\u9762\u4E0A\u5C31\u53EF\u4EE5\u770B\u5230 ",paraId:44,tocIndex:8},{value:"Encryption",paraId:44,tocIndex:8},{value:" \u5B57\u6BB5\u4E86\uFF0C\u4F46\u662F\u540E\u7AEF\u8FD8\u6CA1\u6709\u5B9E\u73B0\u52A0\u89E3\u5BC6\u903B\u8F91\uFF0C\u6240\u4EE5\u8FD8",paraId:44,tocIndex:8},{value:"\u4E0D\u80FD\u521B\u5EFA\u5B57\u6BB5",paraId:44,tocIndex:8},{value:"\u3002",paraId:44,tocIndex:8},{value:"\u6211\u4EEC\u65B0\u5EFA ",paraId:45,tocIndex:10},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/utils.ts",paraId:45,tocIndex:10},{value:" \u6587\u4EF6\uFF1A",paraId:45,tocIndex:10},{value:`import crypto from 'crypto';
const algorithm = 'aes-256-cbc';

const keyString = process.env.ENCRYPTION_KEY || '12345678901234567890123456789012';;

const key = Buffer.from(keyString, 'utf8');

export function encryptSync(text: string, ivString: string) {
  const iv = Buffer.from(ivString, 'utf8');
  const cipher = crypto.createCipheriv(algorithm, key, iv);
  let encrypted = cipher.update(text, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  return encrypted;
}

export function decryptSync(encrypted: string, ivString: string) {
  const iv = Buffer.from(ivString, 'utf8');
  const decipher = crypto.createDecipheriv(algorithm, key, iv);
  let decrypted = decipher.update(encrypted, 'hex', 'utf8');
  decrypted += decipher.final('utf8');
  return decrypted;
}
`,paraId:46,tocIndex:10},{value:"\u6211\u4EEC\u4F7F\u7528 ",paraId:47,tocIndex:10},{value:"crypto",paraId:47,tocIndex:10},{value:" \u6A21\u5757\u5B9E\u73B0\u52A0\u89E3\u5BC6\uFF0C\u5176\u4E2D ",paraId:47,tocIndex:10},{value:"encryptSync",paraId:47,tocIndex:10},{value:" \u65B9\u6CD5\u7528\u4E8E\u52A0\u5BC6\uFF0C",paraId:47,tocIndex:10},{value:"decryptSync",paraId:47,tocIndex:10},{value:" \u65B9\u6CD5\u7528\u4E8E\u89E3\u5BC6\u3002\u5177\u4F53\u7684\u52A0\u5BC6\u7B97\u6CD5\u662F ",paraId:47,tocIndex:10},{value:"aes-256-cbc",paraId:47,tocIndex:10},{value:"\uFF0C\u5BC6\u94A5\u662F ",paraId:47,tocIndex:10},{value:"ENCRYPTION_KEY",paraId:47,tocIndex:10},{value:" \u73AF\u5883\u53D8\u91CF\uFF0C\u5982\u679C\u6CA1\u6709\u8BBE\u7F6E\u5219\u4F7F\u7528\u9ED8\u8BA4\u503C ",paraId:47,tocIndex:10},{value:"12345678901234567890123456789012",paraId:47,tocIndex:10},{value:"\u3002",paraId:47,tocIndex:10},{value:"\u5173\u4E8E ",paraId:48,tocIndex:10},{value:"crypto",paraId:48,tocIndex:10},{value:" \u6A21\u5757\u7684\u66F4\u591A\u4FE1\u606F\u53EF\u4EE5\u67E5\u770B ",paraId:48,tocIndex:10},{value:"NodeJS crypto \u6A21\u5757",paraId:48,tocIndex:10},{value:" \u6587\u6863\u3002",paraId:48,tocIndex:10},{value:"\u6211\u4EEC\u65B0\u5EFA ",paraId:49,tocIndex:12},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/encryption-field.ts",paraId:49,tocIndex:12},{value:" \u6587\u4EF6\uFF1A",paraId:49,tocIndex:12},{value:`import { BaseColumnFieldOptions, Field, FieldContext } from '@nocobase/database';
import { DataTypes } from 'sequelize';
import { decryptSync, encryptSync } from './utils';

export interface EncryptionFieldOptions extends BaseColumnFieldOptions {
  type: 'encryption';
}

export class EncryptionField extends Field {
  get dataType() {
    return DataTypes.STRING;
  }

  constructor(options?: any, context?: FieldContext) {
    const { name, iv } = options;
    super(
      {
        get() {
          const value = this.getDataValue(name);
          if (!value) return null;
          return decryptSync(value, iv);
        },
        set(value) {
          if (!value?.length) value = null;
          else {
            value = encryptSync(value, iv);
          }
          this.setDataValue(name, value);
        },
        ...options,
      },
      context,
    );
  }
}
`,paraId:50,tocIndex:12},{value:"dataType\uFF1A\u52A0\u89E3\u5BC6\u5BF9\u5E94\u5230\u6570\u636E\u5E93\u4E2D\u662F\u5B57\u7B26\u4E32\uFF0C\u6240\u4EE5\u6211\u4EEC\u4F7F\u7528 ",paraId:51,tocIndex:12},{value:"DataTypes.STRING",paraId:51,tocIndex:12},{value:" \u7C7B\u578B",paraId:51,tocIndex:12},{value:"get\uFF1A\u83B7\u53D6\u5B57\u6BB5\u503C\u65F6\uFF0C\u89E3\u5BC6",paraId:51,tocIndex:12},{value:"set\uFF1A\u8BBE\u7F6E\u5B57\u6BB5\u503C\u65F6\uFF0C\u52A0\u5BC6",paraId:51,tocIndex:12},{value:"\u6211\u4EEC\u65B0\u5EFA ",paraId:52,tocIndex:13},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/plugin.ts",paraId:52,tocIndex:13},{value:" \u6587\u4EF6\uFF1A",paraId:52,tocIndex:13},{value:`import { Plugin } from '@nocobase/server';
import { EncryptionField } from './encryption-field';
import { $encryptionEq } from './operators/eq';
import { $encryptionNe } from './operators/ne';

export class PluginFieldInterfaceServer extends Plugin {
  async load() {
    this.db.registerFieldTypes({
      encryption: EncryptionField,
    });
  }
}

export default PluginFieldInterfaceServer;
`,paraId:53,tocIndex:13},{value:"\u6211\u4EEC\u901A\u8FC7 ",paraId:54,tocIndex:13},{value:"db.registerFieldTypes()",paraId:54,tocIndex:13},{value:" \u5C06 ",paraId:54,tocIndex:13},{value:"EncryptionField",paraId:54,tocIndex:13},{value:" \u6CE8\u518C\u5230\u7CFB\u7EDF\u4E2D\uFF0C\u5177\u4F53\u53EF\u4EE5\u67E5\u770B ",paraId:54,tocIndex:13},{value:"registerFieldTypes()",paraId:55,tocIndex:13},{value:" \u6587\u6863\u3002",paraId:54,tocIndex:13},{value:"\u6B64\u65F6\u6211\u4EEC\u5DF2\u7ECF\u5B8C\u6210\u4E86\u524D\u540E\u7AEF\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u521B\u5EFA\u5B57\u6BB5\u4E86\uFF0C\u4F46\u662F\u8FD8\u9700\u8981\u5B9E\u73B0\u67E5\u8BE2\u64CD\u4F5C\u7B26\u3002",paraId:56,tocIndex:13},{value:"\u6211\u4EEC\u8981\u505A\u7684\u5C31\u662F\u5728\u67E5\u8BE2\u65F6\uFF0C\u5C06\u5B57\u7B26\u4E32\u52A0\u5BC6\u540E\u518D\u8FDB\u884C\u67E5\u8BE2\u3002",paraId:57,tocIndex:15},{value:"\u56E0\u4E3A ",paraId:58,tocIndex:16},{value:"$encryptionEq",paraId:58,tocIndex:16},{value:"\u3001",paraId:58,tocIndex:16},{value:"$encryptionNe",paraId:58,tocIndex:16},{value:" \u90FD\u662F\u9700\u8981\u5728\u52A0\u5BC6\u540E\u518D\u8FDB\u884C\u67E5\u8BE2\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u5C06\u8FD9\u4E24\u4E2A\u64CD\u4F5C\u7B26\u7684\u903B\u8F91\u62BD\u79BB\u51FA\u6765\uFF0C\u6240\u4EE5\u6211\u4EEC\u65B0\u5EFA ",paraId:58,tocIndex:16},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/operators/utils.ts",paraId:58,tocIndex:16},{value:" \u6587\u4EF6\uFF1A",paraId:58,tocIndex:16},{value:`import { encryptSync } from '../utils';

export function getFieldOptions(ctx: any) {
  const fieldPathArr = ctx.fieldPath.split('.');
  const collectionName = fieldPathArr[fieldPathArr.length - 2];
  const fieldName = ctx.fieldName;

  return ctx.db.collections.get(collectionName).fields.get(fieldName).options;
}

export function encryptSearchValueSync(str: any, ctx: any) {
  const { iv } = getFieldOptions(ctx);
  let encrypted;
  if (Array.isArray(str)) {
    encrypted = str.map((item) => encryptSync(item, iv));
  } else {
    encrypted = encryptSync(str, iv);
  }
  return encrypted;
}
`,paraId:59,tocIndex:16},{value:"\u6211\u4EEC\u5B9A\u4E49\u4E86 2 \u4E2A\u65B9\u6CD5\uFF1A",paraId:60,tocIndex:16},{value:"getFieldOptions",paraId:61,tocIndex:16},{value:"\uFF1A\u83B7\u53D6\u5B57\u6BB5\u914D\u7F6E",paraId:61,tocIndex:16},{value:"encryptSearchValueSync",paraId:61,tocIndex:16},{value:"\uFF1A\u52A0\u5BC6\u641C\u7D22\u503C",paraId:61,tocIndex:16},{value:"$encryptionEq",paraId:5},{value:"\u7136\u540E\u6211\u4EEC\u65B0\u5EFA ",paraId:62,tocIndex:17},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/operators/eq.ts",paraId:62,tocIndex:17},{value:" \u6587\u4EF6\uFF1A",paraId:62,tocIndex:17},{value:`import { encryptSearchValueSync } from './utils';

export const $encryptionEq = (str, ctx) => {
  const eq = ctx.db.operators.get('$eq');
  if (!str) return eq(str, ctx);
  const encrypted = encryptSearchValueSync(str, ctx);
  return eq(encrypted, ctx);
};
`,paraId:63,tocIndex:17},{value:"\u6211\u4EEC\u5B9A\u4E49\u4E86 ",paraId:64,tocIndex:17},{value:"$encryptionEq",paraId:64,tocIndex:17},{value:" \u64CD\u4F5C\u7B26\uFF0C\u5C06\u641C\u7D22\u503C\u52A0\u5BC6\u540E\u518D\u8FDB\u884C\u67E5\u8BE2\u3002",paraId:64,tocIndex:17},{value:"$encryptionNe",paraId:5},{value:"\u7136\u540E\u6211\u4EEC\u65B0\u5EFA ",paraId:65,tocIndex:18},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/operators/ne.ts",paraId:65,tocIndex:18},{value:" \u6587\u4EF6\uFF1A",paraId:65,tocIndex:18},{value:`import { encryptSearchValueSync } from './utils';

export const $encryptionNe = (str, ctx) => {
  const eq = ctx.db.operators.get('$ne');
  if (!str) return eq(str, ctx);
  const encrypted = encryptSearchValueSync(str, ctx);
  return eq(encrypted, ctx);
};
`,paraId:66,tocIndex:18},{value:"\u6211\u4EEC\u5B9A\u4E49\u4E86 ",paraId:67,tocIndex:18},{value:"$encryptionNe",paraId:67,tocIndex:18},{value:" \u64CD\u4F5C\u7B26\uFF0C\u5C06\u641C\u7D22\u503C\u52A0\u5BC6\u540E\u518D\u8FDB\u884C\u67E5\u8BE2\u3002",paraId:67,tocIndex:18},{value:"\u6211\u4EEC\u4FEE\u6539 ",paraId:68,tocIndex:19},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/server/plugin.ts",paraId:68,tocIndex:19},{value:" \u6587\u4EF6\uFF1A",paraId:68,tocIndex:19},{value:`// ...
import { $encryptionEq } from './operators/eq';
import { $encryptionNe } from './operators/ne';

export class PluginFieldInterfaceServer extends Plugin {
  async load() {
    // ...

    this.db.registerOperators({
      $encryptionEq,
      $encryptionNe,
    });
  }
}

export default PluginFieldInterfaceServer;
`,paraId:69,tocIndex:19},{value:"\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 ",paraId:70,tocIndex:20},{value:"http://localhost:13000/admin/settings/system-settings",paraId:70,tocIndex:20},{value:" \u6DFB\u52A0\u591A\u4E2A\u8BED\u8A00\uFF0C\u5E76\u4E14\u5728\u53F3\u4E0A\u89D2\u5207\u6362\u8BED\u8A00\u3002",paraId:70,tocIndex:20},{value:"\u6211\u4EEC\u7F16\u8F91 ",paraId:71,tocIndex:21},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/locale/zh-CN.json",paraId:71,tocIndex:21},{value:" \u6587\u4EF6\uFF1A",paraId:71,tocIndex:21},{value:`{
  "Encryption": "Encryption"
}
`,paraId:72,tocIndex:21},{value:"\u6211\u4EEC\u7F16\u8F91 ",paraId:73,tocIndex:22},{value:"packages/plugins/@nocobase-sample/plugin-field-interface/src/locale/zh-CN.json",paraId:73,tocIndex:22},{value:" \u6587\u4EF6\uFF1A",paraId:73,tocIndex:22},{value:`{
  "Encryption": "\u52A0\u5BC6"
}
`,paraId:74,tocIndex:22},{value:"\u6309\u7167 ",paraId:75,tocIndex:23},{value:"\u6784\u5EFA\u5E76\u6253\u5305\u63D2\u4EF6",paraId:76,tocIndex:23},{value:" \u6587\u6863\u8BF4\u660E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6253\u5305\u63D2\u4EF6\u5E76\u4E0A\u4F20\u5230\u751F\u4EA7\u73AF\u5883\u3002",paraId:75,tocIndex:23},{value:"\u5982\u679C\u662F clone \u7684\u6E90\u7801\uFF0C\u9700\u8981\u5148\u6267\u884C\u4E00\u6B21\u5168\u91CF build\uFF0C\u5C06\u63D2\u4EF6\u7684\u4F9D\u8D56\u4E5F\u6784\u5EFA\u597D\u3002",paraId:77,tocIndex:23},{value:`yarn build
`,paraId:78,tocIndex:23},{value:"\u5982\u679C\u662F\u4F7F\u7528\u7684 ",paraId:79,tocIndex:23},{value:"create-nocobase-app",paraId:79,tocIndex:23},{value:" \u521B\u5EFA\u7684\u9879\u76EE\uFF0C\u53EF\u4EE5\u76F4\u63A5\u6267\u884C\uFF1A",paraId:79,tocIndex:23},{value:`yarn build @nocobase-sample/plugin-field-interface --tar
`,paraId:80,tocIndex:23},{value:"\u8FD9\u6837\u5C31\u53EF\u4EE5\u770B\u5230 ",paraId:81,tocIndex:23},{value:"storage/tar/@nocobase-sample/plugin-field-interface.tar.gz",paraId:81,tocIndex:23},{value:" \u6587\u4EF6\u4E86\uFF0C\u7136\u540E\u901A\u8FC7",paraId:81,tocIndex:23},{value:"\u4E0A\u4F20\u7684\u65B9\u5F0F",paraId:82,tocIndex:23},{value:"\u8FDB\u884C\u5B89\u88C5\u3002",paraId:81,tocIndex:23}]}}]);
