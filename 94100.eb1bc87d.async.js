"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[94100],{57838:function(ie,G,C){C.d(G,{Z:function(){return H}});var v=C(67294);function H(){const[,U]=v.useReducer(S=>S+1,0);return U}},74443:function(ie,G,C){C.d(G,{ZP:function(){return P},c4:function(){return U},m9:function(){return Z}});var v=C(67294),H=C(29691);const U=["xxl","xl","lg","md","sm","xs"],S=k=>({xs:`(max-width: ${k.screenXSMax}px)`,sm:`(min-width: ${k.screenSM}px)`,md:`(min-width: ${k.screenMD}px)`,lg:`(min-width: ${k.screenLG}px)`,xl:`(min-width: ${k.screenXL}px)`,xxl:`(min-width: ${k.screenXXL}px)`}),D=k=>{const V=k,g=[].concat(U).reverse();return g.forEach(($,B)=>{const s=$.toUpperCase(),Y=`screen${s}Min`,A=`screen${s}`;if(!(V[Y]<=V[A]))throw new Error(`${Y}<=${A} fails : !(${V[Y]}<=${V[A]})`);if(B<g.length-1){const W=`screen${s}Max`;if(!(V[A]<=V[W]))throw new Error(`${A}<=${W} fails : !(${V[A]}<=${V[W]})`);const O=`screen${g[B+1].toUpperCase()}Min`;if(!(V[W]<=V[O]))throw new Error(`${W}<=${O} fails : !(${V[W]}<=${V[O]})`)}}),k};function P(){const[,k]=(0,H.ZP)(),V=S(D(k));return v.useMemo(()=>{const g=new Map;let $=-1,B={};return{matchHandlers:{},dispatch(s){return B=s,g.forEach(Y=>Y(B)),g.size>=1},subscribe(s){return g.size||this.register(),$+=1,g.set($,s),s(B),$},unsubscribe(s){g.delete(s),g.size||this.unregister()},unregister(){Object.keys(V).forEach(s=>{const Y=V[s],A=this.matchHandlers[Y];A==null||A.mql.removeListener(A==null?void 0:A.listener)}),g.clear()},register(){Object.keys(V).forEach(s=>{const Y=V[s],A=Q=>{let{matches:O}=Q;this.dispatch(Object.assign(Object.assign({},B),{[s]:O}))},W=window.matchMedia(Y);W.addListener(A),this.matchHandlers[Y]={mql:W,listener:A},A(W)})},responsiveMap:V}},[k])}const Z=(k,V)=>{if(V&&typeof V=="object")for(let g=0;g<U.length;g++){const $=U[g];if(k[$]&&V[$]!==void 0)return V[$]}}},65223:function(ie,G,C){C.d(G,{RV:function(){return P},Rk:function(){return Z},Ux:function(){return V},aM:function(){return k},pg:function(){return g},q3:function(){return S},qI:function(){return D}});var v=C(67294),H=C(70129),U=C(10366);const S=v.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),D=v.createContext(null),P=$=>{const B=(0,U.Z)($,["prefixCls"]);return v.createElement(H.RV,Object.assign({},B))},Z=v.createContext({prefixCls:""}),k=v.createContext({}),V=$=>{let{children:B,status:s,override:Y}=$;const A=(0,v.useContext)(k),W=(0,v.useMemo)(()=>{const Q=Object.assign({},A);return Y&&delete Q.isFormItemInput,s&&(delete Q.status,delete Q.hasFeedback,delete Q.feedbackIcon),Q},[s,Y,A]);return v.createElement(k.Provider,{value:W},B)},g=(0,v.createContext)(void 0)},25378:function(ie,G,C){var v=C(67294),H=C(14075),U=C(57838),S=C(74443);function D(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const Z=(0,v.useRef)({}),k=(0,U.Z)(),V=(0,S.ZP)();return(0,H.Z)(()=>{const g=V.subscribe($=>{Z.current=$,P&&k()});return()=>V.unsubscribe(g)},[]),Z.current}G.Z=D},10110:function(ie,G,C){var v=C(67294),H=C(76745),U=C(40378);const S=(D,P)=>{const Z=v.useContext(H.Z),k=v.useMemo(()=>{var g;const $=P||U.Z[D],B=(g=Z==null?void 0:Z[D])!==null&&g!==void 0?g:{};return Object.assign(Object.assign({},typeof $=="function"?$():$),B||{})},[D,P,Z]),V=v.useMemo(()=>{const g=Z==null?void 0:Z.locale;return Z!=null&&Z.exist&&!g?U.Z.locale:g},[Z]);return[k,V]};G.Z=S},9574:function(ie,G,C){C.d(G,{Z:function(){return k}});var v=C(56141),H=C(67294),U={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},S=U,D=C(10096),P=function(g,$){return H.createElement(D.Z,(0,v.Z)({},g,{ref:$,icon:S}))},Z=H.forwardRef(P),k=Z},71812:function(ie,G,C){C.d(G,{Z:function(){return k}});var v=C(56141),H=C(67294),U={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},S=U,D=C(10096),P=function(g,$){return H.createElement(D.Z,(0,v.Z)({},g,{ref:$,icon:S}))},Z=H.forwardRef(P),k=Z},1337:function(ie,G,C){C.d(G,{Z:function(){return k}});var v=C(86318),H=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,U=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,S="".concat(H," ").concat(U).split(/[\s\n]+/),D="aria-",P="data-";function Z(V,g){return V.indexOf(g)===0}function k(V){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$;g===!1?$={aria:!0,data:!0,attr:!0}:g===!0?$={aria:!0}:$=(0,v.Z)({},g);var B={};return Object.keys(V).forEach(function(s){($.aria&&(s==="role"||Z(s,D))||$.data&&Z(s,P)||$.attr&&S.includes(s))&&(B[s]=V[s])}),B}},70129:function(ie,G,C){C.d(G,{gN:function(){return Pe},zb:function(){return se},RV:function(){return Ne},aV:function(){return Te},ZM:function(){return fe},ZP:function(){return vt},cI:function(){return Ve},qo:function(){return Ue}});var v=C(67294),H=C(87462),U=C(91),S=C(74165),D=C(15861),P=C(1413),Z=C(74902),k=C(15671),V=C(43144),g=C(97326),$=C(32531),B=C(29388),s=C(4942),Y=C(50344),A=C(91881),W=C(80334),Q="RC_FORM_INTERNAL_HOOKS",O=function(){(0,W.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},je=v.createContext({getFieldValue:O,getFieldsValue:O,getFieldError:O,getFieldWarning:O,getFieldsError:O,isFieldsTouched:O,isFieldTouched:O,isFieldValidating:O,isFieldsValidating:O,resetFields:O,setFields:O,setFieldValue:O,setFieldsValue:O,validateFields:O,submit:O,getInternalHooks:function(){return O(),{dispatch:O,initEntityValue:O,registerField:O,useSubscribe:O,setInitialValues:O,destroyForm:O,setCallbacks:O,registerWatch:O,getFields:O,setValidateMessages:O,setPreserve:O,getInitialValue:O}}}),se=je,He=v.createContext(null),fe=He;function me(c){return c==null?[]:Array.isArray(c)?c:[c]}function Ke(c){return c&&!!c._init}var Be=C(25715),_="'${name}' is not a valid ${type}",we={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:_,method:_,array:_,object:_,number:_,date:_,boolean:_,integer:_,float:_,regexp:_,email:_,url:_,hex:_},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},q=C(8880),Re=Be.Z;function ze(c,u){return c.replace(/\$\{\w+\}/g,function(t){var r=t.slice(2,-1);return u[r]})}var Oe="CODE_LOGIC_ERROR";function pe(c,u,t,r,e){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,D.Z)((0,S.Z)().mark(function c(u,t,r,e,n){var i,d,l,o,a,f,h,R,b;return(0,S.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=(0,P.Z)({},r),delete i.ruleIndex,Re.warning=function(){},i.validator&&(d=i.validator,i.validator=function(){try{return d.apply(void 0,arguments)}catch(y){return console.error(y),Promise.reject(Oe)}}),l=null,i&&i.type==="array"&&i.defaultField&&(l=i.defaultField,delete i.defaultField),o=new Re((0,s.Z)({},u,[i])),a=(0,q.T)(we,e.validateMessages),o.messages(a),f=[],p.prev=10,p.next=13,Promise.resolve(o.validate((0,s.Z)({},u,t),(0,P.Z)({},e)));case 13:p.next=18;break;case 15:p.prev=15,p.t0=p.catch(10),p.t0.errors&&(f=p.t0.errors.map(function(y,m){var E=y.message,N=E===Oe?a.default:E;return v.isValidElement(N)?v.cloneElement(N,{key:"error_".concat(m)}):N}));case 18:if(!(!f.length&&l)){p.next=23;break}return p.next=21,Promise.all(t.map(function(y,m){return pe("".concat(u,".").concat(m),y,l,e,n)}));case 21:return h=p.sent,p.abrupt("return",h.reduce(function(y,m){return[].concat((0,Z.Z)(y),(0,Z.Z)(m))},[]));case 23:return R=(0,P.Z)((0,P.Z)({},r),{},{name:u,enum:(r.enum||[]).join(", ")},n),b=f.map(function(y){return typeof y=="string"?ze(y,R):y}),p.abrupt("return",b);case 26:case"end":return p.stop()}},c,null,[[10,15]])})),Fe.apply(this,arguments)}function Ge(c,u,t,r,e,n){var i=c.join("."),d=t.map(function(a,f){var h=a.validator,R=(0,P.Z)((0,P.Z)({},a),{},{ruleIndex:f});return h&&(R.validator=function(b,F,p){var y=!1,m=function(){for(var L=arguments.length,T=new Array(L),x=0;x<L;x++)T[x]=arguments[x];Promise.resolve().then(function(){(0,W.ZP)(!y,"Your validator function has already return a promise. `callback` will be ignored."),y||p.apply(void 0,T)})},E=h(b,F,m);y=E&&typeof E.then=="function"&&typeof E.catch=="function",(0,W.ZP)(y,"`callback` is deprecated. Please return a promise instead."),y&&E.then(function(){p()}).catch(function(N){p(N||" ")})}),R}).sort(function(a,f){var h=a.warningOnly,R=a.ruleIndex,b=f.warningOnly,F=f.ruleIndex;return!!h==!!b?R-F:h?1:-1}),l;if(e===!0)l=new Promise(function(){var a=(0,D.Z)((0,S.Z)().mark(function f(h,R){var b,F,p;return(0,S.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:b=0;case 1:if(!(b<d.length)){m.next=12;break}return F=d[b],m.next=5,pe(i,u,F,r,n);case 5:if(p=m.sent,!p.length){m.next=9;break}return R([{errors:p,rule:F}]),m.abrupt("return");case 9:b+=1,m.next=1;break;case 12:h([]);case 13:case"end":return m.stop()}},f)}));return function(f,h){return a.apply(this,arguments)}}());else{var o=d.map(function(a){return pe(i,u,a,r,n).then(function(f){return{errors:f,rule:a}})});l=(e?Je(o):Xe(o)).then(function(a){return Promise.reject(a)})}return l.catch(function(a){return a}),l}function Xe(c){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,D.Z)((0,S.Z)().mark(function c(u){return(0,S.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(u).then(function(e){var n,i=(n=[]).concat.apply(n,(0,Z.Z)(e));return i}));case 1:case"end":return r.stop()}},c)})),Ze.apply(this,arguments)}function Je(c){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,D.Z)((0,S.Z)().mark(function c(u){var t;return(0,S.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.abrupt("return",new Promise(function(n){u.forEach(function(i){i.then(function(d){d.errors.length&&n([d]),t+=1,t===u.length&&n([])})})}));case 2:case"end":return e.stop()}},c)})),Ce.apply(this,arguments)}var ve=C(71002),oe=C(95013);function j(c){return me(c)}function xe(c,u){var t={};return u.forEach(function(r){var e=(0,oe.Z)(c,r);t=(0,q.Z)(t,r,e)}),t}function ue(c,u){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return c&&c.some(function(r){return ke(u,r,t)})}function ke(c,u){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!c||!u||!t&&c.length!==u.length?!1:u.every(function(r,e){return c[e]===r})}function Qe(c,u){if(c===u)return!0;if(!c&&u||c&&!u||!c||!u||(0,ve.Z)(c)!=="object"||(0,ve.Z)(u)!=="object")return!1;var t=Object.keys(c),r=Object.keys(u),e=new Set([].concat(t,r));return(0,Z.Z)(e).every(function(n){var i=c[n],d=u[n];return typeof i=="function"&&typeof d=="function"?!0:i===d})}function Ye(c){var u=arguments.length<=1?void 0:arguments[1];return u&&u.target&&(0,ve.Z)(u.target)==="object"&&c in u.target?u.target[c]:u}function $e(c,u,t){var r=c.length;if(u<0||u>=r||t<0||t>=r)return c;var e=c[u],n=u-t;return n>0?[].concat((0,Z.Z)(c.slice(0,t)),[e],(0,Z.Z)(c.slice(t,u)),(0,Z.Z)(c.slice(u+1,r))):n<0?[].concat((0,Z.Z)(c.slice(0,u)),(0,Z.Z)(c.slice(u+1,t+1)),[e],(0,Z.Z)(c.slice(t+1,r))):c}var _e=["name"],te=[];function Le(c,u,t,r,e,n){return typeof c=="function"?c(u,t,"source"in n?{source:n.source}:{}):r!==e}var ye=function(c){(0,$.Z)(t,c);var u=(0,B.Z)(t);function t(r){var e;if((0,k.Z)(this,t),e=u.call(this,r),(0,s.Z)((0,g.Z)(e),"state",{resetCount:0}),(0,s.Z)((0,g.Z)(e),"cancelRegisterFunc",null),(0,s.Z)((0,g.Z)(e),"mounted",!1),(0,s.Z)((0,g.Z)(e),"touched",!1),(0,s.Z)((0,g.Z)(e),"dirty",!1),(0,s.Z)((0,g.Z)(e),"validatePromise",void 0),(0,s.Z)((0,g.Z)(e),"prevValidating",void 0),(0,s.Z)((0,g.Z)(e),"errors",te),(0,s.Z)((0,g.Z)(e),"warnings",te),(0,s.Z)((0,g.Z)(e),"cancelRegister",function(){var l=e.props,o=l.preserve,a=l.isListField,f=l.name;e.cancelRegisterFunc&&e.cancelRegisterFunc(a,o,j(f)),e.cancelRegisterFunc=null}),(0,s.Z)((0,g.Z)(e),"getNamePath",function(){var l=e.props,o=l.name,a=l.fieldContext,f=a.prefixName,h=f===void 0?[]:f;return o!==void 0?[].concat((0,Z.Z)(h),(0,Z.Z)(o)):[]}),(0,s.Z)((0,g.Z)(e),"getRules",function(){var l=e.props,o=l.rules,a=o===void 0?[]:o,f=l.fieldContext;return a.map(function(h){return typeof h=="function"?h(f):h})}),(0,s.Z)((0,g.Z)(e),"refresh",function(){e.mounted&&e.setState(function(l){var o=l.resetCount;return{resetCount:o+1}})}),(0,s.Z)((0,g.Z)(e),"metaCache",null),(0,s.Z)((0,g.Z)(e),"triggerMetaEvent",function(l){var o=e.props.onMetaChange;if(o){var a=(0,P.Z)((0,P.Z)({},e.getMeta()),{},{destroy:l});(0,A.Z)(e.metaCache,a)||o(a),e.metaCache=a}else e.metaCache=null}),(0,s.Z)((0,g.Z)(e),"onStoreChange",function(l,o,a){var f=e.props,h=f.shouldUpdate,R=f.dependencies,b=R===void 0?[]:R,F=f.onReset,p=a.store,y=e.getNamePath(),m=e.getValue(l),E=e.getValue(p),N=o&&ue(o,y);switch(a.type==="valueUpdate"&&a.source==="external"&&!(0,A.Z)(m,E)&&(e.touched=!0,e.dirty=!0,e.validatePromise=null,e.errors=te,e.warnings=te,e.triggerMetaEvent()),a.type){case"reset":if(!o||N){e.touched=!1,e.dirty=!1,e.validatePromise=void 0,e.errors=te,e.warnings=te,e.triggerMetaEvent(),F==null||F(),e.refresh();return}break;case"remove":{if(h){e.reRender();return}break}case"setField":{var L=a.data;if(N){"touched"in L&&(e.touched=L.touched),"validating"in L&&!("originRCField"in L)&&(e.validatePromise=L.validating?Promise.resolve([]):null),"errors"in L&&(e.errors=L.errors||te),"warnings"in L&&(e.warnings=L.warnings||te),e.dirty=!0,e.triggerMetaEvent(),e.reRender();return}else if("value"in L&&ue(o,y,!0)){e.reRender();return}if(h&&!y.length&&Le(h,l,p,m,E,a)){e.reRender();return}break}case"dependenciesUpdate":{var T=b.map(j);if(T.some(function(x){return ue(a.relatedFields,x)})){e.reRender();return}break}default:if(N||(!b.length||y.length||h)&&Le(h,l,p,m,E,a)){e.reRender();return}break}h===!0&&e.reRender()}),(0,s.Z)((0,g.Z)(e),"validateRules",function(l){var o=e.getNamePath(),a=e.getValue(),f=l||{},h=f.triggerName,R=f.validateOnly,b=R===void 0?!1:R,F=Promise.resolve().then((0,D.Z)((0,S.Z)().mark(function p(){var y,m,E,N,L,T,x;return(0,S.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(e.mounted){M.next=2;break}return M.abrupt("return",[]);case 2:if(y=e.props,m=y.validateFirst,E=m===void 0?!1:m,N=y.messageVariables,L=y.validateDebounce,T=e.getRules(),h&&(T=T.filter(function(w){return w}).filter(function(w){var I=w.validateTrigger;if(!I)return!0;var K=me(I);return K.includes(h)})),!(L&&h)){M.next=10;break}return M.next=8,new Promise(function(w){setTimeout(w,L)});case 8:if(e.validatePromise===F){M.next=10;break}return M.abrupt("return",[]);case 10:return x=Ge(o,a,T,l,E,N),x.catch(function(w){return w}).then(function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te;if(e.validatePromise===F){var I;e.validatePromise=null;var K=[],J=[];(I=w.forEach)===null||I===void 0||I.call(w,function(z){var re=z.rule.warningOnly,ee=z.errors,ae=ee===void 0?te:ee;re?J.push.apply(J,(0,Z.Z)(ae)):K.push.apply(K,(0,Z.Z)(ae))}),e.errors=K,e.warnings=J,e.triggerMetaEvent(),e.reRender()}}),M.abrupt("return",x);case 13:case"end":return M.stop()}},p)})));return b||(e.validatePromise=F,e.dirty=!0,e.errors=te,e.warnings=te,e.triggerMetaEvent(),e.reRender()),F}),(0,s.Z)((0,g.Z)(e),"isFieldValidating",function(){return!!e.validatePromise}),(0,s.Z)((0,g.Z)(e),"isFieldTouched",function(){return e.touched}),(0,s.Z)((0,g.Z)(e),"isFieldDirty",function(){if(e.dirty||e.props.initialValue!==void 0)return!0;var l=e.props.fieldContext,o=l.getInternalHooks(Q),a=o.getInitialValue;return a(e.getNamePath())!==void 0}),(0,s.Z)((0,g.Z)(e),"getErrors",function(){return e.errors}),(0,s.Z)((0,g.Z)(e),"getWarnings",function(){return e.warnings}),(0,s.Z)((0,g.Z)(e),"isListField",function(){return e.props.isListField}),(0,s.Z)((0,g.Z)(e),"isList",function(){return e.props.isList}),(0,s.Z)((0,g.Z)(e),"isPreserve",function(){return e.props.preserve}),(0,s.Z)((0,g.Z)(e),"getMeta",function(){e.prevValidating=e.isFieldValidating();var l={touched:e.isFieldTouched(),validating:e.prevValidating,errors:e.errors,warnings:e.warnings,name:e.getNamePath(),validated:e.validatePromise===null};return l}),(0,s.Z)((0,g.Z)(e),"getOnlyChild",function(l){if(typeof l=="function"){var o=e.getMeta();return(0,P.Z)((0,P.Z)({},e.getOnlyChild(l(e.getControlled(),o,e.props.fieldContext))),{},{isFunction:!0})}var a=(0,Y.Z)(l);return a.length!==1||!v.isValidElement(a[0])?{child:a,isFunction:!1}:{child:a[0],isFunction:!1}}),(0,s.Z)((0,g.Z)(e),"getValue",function(l){var o=e.props.fieldContext.getFieldsValue,a=e.getNamePath();return(0,oe.Z)(l||o(!0),a)}),(0,s.Z)((0,g.Z)(e),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.props,a=o.name,f=o.trigger,h=o.validateTrigger,R=o.getValueFromEvent,b=o.normalize,F=o.valuePropName,p=o.getValueProps,y=o.fieldContext,m=h!==void 0?h:y.validateTrigger,E=e.getNamePath(),N=y.getInternalHooks,L=y.getFieldsValue,T=N(Q),x=T.dispatch,X=e.getValue(),M=p||function(z){return(0,s.Z)({},F,z)},w=l[f],I=a!==void 0?M(X):{},K=(0,P.Z)((0,P.Z)({},l),I);K[f]=function(){e.touched=!0,e.dirty=!0,e.triggerMetaEvent();for(var z,re=arguments.length,ee=new Array(re),ae=0;ae<re;ae++)ee[ae]=arguments[ae];R?z=R.apply(void 0,ee):z=Ye.apply(void 0,[F].concat(ee)),b&&(z=b(z,X,L(!0))),x({type:"updateValue",namePath:E,value:z}),w&&w.apply(void 0,ee)};var J=me(m||[]);return J.forEach(function(z){var re=K[z];K[z]=function(){re&&re.apply(void 0,arguments);var ee=e.props.rules;ee&&ee.length&&x({type:"validateField",namePath:E,triggerName:z})}}),K}),r.fieldContext){var n=r.fieldContext.getInternalHooks,i=n(Q),d=i.initEntityValue;d((0,g.Z)(e))}return e}return(0,V.Z)(t,[{key:"componentDidMount",value:function(){var e=this.props,n=e.shouldUpdate,i=e.fieldContext;if(this.mounted=!0,i){var d=i.getInternalHooks,l=d(Q),o=l.registerField;this.cancelRegisterFunc=o(this)}n===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e=this.state.resetCount,n=this.props.children,i=this.getOnlyChild(n),d=i.child,l=i.isFunction,o;return l?o=d:v.isValidElement(d)?o=v.cloneElement(d,this.getControlled(d.props)):((0,W.ZP)(!d,"`children` of Field is not validate ReactElement."),o=d),v.createElement(v.Fragment,{key:e},o)}}]),t}(v.Component);(0,s.Z)(ye,"contextType",se),(0,s.Z)(ye,"defaultProps",{trigger:"onChange",valuePropName:"value"});function qe(c){var u=c.name,t=(0,U.Z)(c,_e),r=v.useContext(se),e=v.useContext(fe),n=u!==void 0?j(u):void 0,i="keep";return t.isListField||(i="_".concat((n||[]).join("_"))),v.createElement(ye,(0,H.Z)({key:i,name:n,isListField:!!e},t,{fieldContext:r}))}var Pe=qe;function et(c){var u=c.name,t=c.initialValue,r=c.children,e=c.rules,n=c.validateTrigger,i=c.isListField,d=v.useContext(se),l=v.useContext(fe),o=v.useRef({keys:[],id:0}),a=o.current,f=v.useMemo(function(){var F=j(d.prefixName)||[];return[].concat((0,Z.Z)(F),(0,Z.Z)(j(u)))},[d.prefixName,u]),h=v.useMemo(function(){return(0,P.Z)((0,P.Z)({},d),{},{prefixName:f})},[d,f]),R=v.useMemo(function(){return{getKey:function(p){var y=f.length,m=p[y];return[a.keys[m],p.slice(y+1)]}}},[f]);if(typeof r!="function")return(0,W.ZP)(!1,"Form.List only accepts function as children."),null;var b=function(p,y,m){var E=m.source;return E==="internal"?!1:p!==y};return v.createElement(fe.Provider,{value:R},v.createElement(se.Provider,{value:h},v.createElement(Pe,{name:[],shouldUpdate:b,rules:e,validateTrigger:n,initialValue:t,isList:!0,isListField:i!=null?i:!!l},function(F,p){var y=F.value,m=y===void 0?[]:y,E=F.onChange,N=d.getFieldValue,L=function(){var M=N(f||[]);return M||[]},T={add:function(M,w){var I=L();w>=0&&w<=I.length?(a.keys=[].concat((0,Z.Z)(a.keys.slice(0,w)),[a.id],(0,Z.Z)(a.keys.slice(w))),E([].concat((0,Z.Z)(I.slice(0,w)),[M],(0,Z.Z)(I.slice(w))))):(a.keys=[].concat((0,Z.Z)(a.keys),[a.id]),E([].concat((0,Z.Z)(I),[M]))),a.id+=1},remove:function(M){var w=L(),I=new Set(Array.isArray(M)?M:[M]);I.size<=0||(a.keys=a.keys.filter(function(K,J){return!I.has(J)}),E(w.filter(function(K,J){return!I.has(J)})))},move:function(M,w){if(M!==w){var I=L();M<0||M>=I.length||w<0||w>=I.length||(a.keys=$e(a.keys,M,w),E($e(I,M,w)))}}},x=m||[];return Array.isArray(x)||(x=[]),r(x.map(function(X,M){var w=a.keys[M];return w===void 0&&(a.keys[M]=a.id,w=a.keys[M],a.id+=1),{name:M,key:w,isListField:!0}}),T,p)})))}var Te=et,ge=C(97685);function tt(c){var u=!1,t=c.length,r=[];return c.length?new Promise(function(e,n){c.forEach(function(i,d){i.catch(function(l){return u=!0,l}).then(function(l){t-=1,r[d]=l,!(t>0)&&(u&&n(r),e(r))})})}):Promise.resolve([])}var Ie="__@field_split__";function Ee(c){return c.map(function(u){return"".concat((0,ve.Z)(u),":").concat(u)}).join(Ie)}var rt=function(){function c(){(0,k.Z)(this,c),(0,s.Z)(this,"kvs",new Map)}return(0,V.Z)(c,[{key:"set",value:function(t,r){this.kvs.set(Ee(t),r)}},{key:"get",value:function(t){return this.kvs.get(Ee(t))}},{key:"update",value:function(t,r){var e=this.get(t),n=r(e);n?this.set(t,n):this.delete(t)}},{key:"delete",value:function(t){this.kvs.delete(Ee(t))}},{key:"map",value:function(t){return(0,Z.Z)(this.kvs.entries()).map(function(r){var e=(0,ge.Z)(r,2),n=e[0],i=e[1],d=n.split(Ie);return t({key:d.map(function(l){var o=l.match(/^([^:]*):(.*)$/),a=(0,ge.Z)(o,3),f=a[1],h=a[2];return f==="number"?Number(h):h}),value:i})})}},{key:"toJSON",value:function(){var t={};return this.map(function(r){var e=r.key,n=r.value;return t[e.join(".")]=n,null}),t}}]),c}(),ce=rt,nt=["name"],at=(0,V.Z)(function c(u){var t=this;(0,k.Z)(this,c),(0,s.Z)(this,"formHooked",!1),(0,s.Z)(this,"forceRootUpdate",void 0),(0,s.Z)(this,"subscribable",!0),(0,s.Z)(this,"store",{}),(0,s.Z)(this,"fieldEntities",[]),(0,s.Z)(this,"initialValues",{}),(0,s.Z)(this,"callbacks",{}),(0,s.Z)(this,"validateMessages",null),(0,s.Z)(this,"preserve",null),(0,s.Z)(this,"lastValidatePromise",null),(0,s.Z)(this,"getForm",function(){return{getFieldValue:t.getFieldValue,getFieldsValue:t.getFieldsValue,getFieldError:t.getFieldError,getFieldWarning:t.getFieldWarning,getFieldsError:t.getFieldsError,isFieldsTouched:t.isFieldsTouched,isFieldTouched:t.isFieldTouched,isFieldValidating:t.isFieldValidating,isFieldsValidating:t.isFieldsValidating,resetFields:t.resetFields,setFields:t.setFields,setFieldValue:t.setFieldValue,setFieldsValue:t.setFieldsValue,validateFields:t.validateFields,submit:t.submit,_init:!0,getInternalHooks:t.getInternalHooks}}),(0,s.Z)(this,"getInternalHooks",function(r){return r===Q?(t.formHooked=!0,{dispatch:t.dispatch,initEntityValue:t.initEntityValue,registerField:t.registerField,useSubscribe:t.useSubscribe,setInitialValues:t.setInitialValues,destroyForm:t.destroyForm,setCallbacks:t.setCallbacks,setValidateMessages:t.setValidateMessages,getFields:t.getFields,setPreserve:t.setPreserve,getInitialValue:t.getInitialValue,registerWatch:t.registerWatch}):((0,W.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),(0,s.Z)(this,"useSubscribe",function(r){t.subscribable=r}),(0,s.Z)(this,"prevWithoutPreserves",null),(0,s.Z)(this,"setInitialValues",function(r,e){if(t.initialValues=r||{},e){var n,i=(0,q.T)(r,t.store);(n=t.prevWithoutPreserves)===null||n===void 0||n.map(function(d){var l=d.key;i=(0,q.Z)(i,l,(0,oe.Z)(r,l))}),t.prevWithoutPreserves=null,t.updateStore(i)}}),(0,s.Z)(this,"destroyForm",function(){var r=new ce;t.getFieldEntities(!0).forEach(function(e){t.isMergedPreserve(e.isPreserve())||r.set(e.getNamePath(),!0)}),t.prevWithoutPreserves=r}),(0,s.Z)(this,"getInitialValue",function(r){var e=(0,oe.Z)(t.initialValues,r);return r.length?(0,q.T)(e):e}),(0,s.Z)(this,"setCallbacks",function(r){t.callbacks=r}),(0,s.Z)(this,"setValidateMessages",function(r){t.validateMessages=r}),(0,s.Z)(this,"setPreserve",function(r){t.preserve=r}),(0,s.Z)(this,"watchList",[]),(0,s.Z)(this,"registerWatch",function(r){return t.watchList.push(r),function(){t.watchList=t.watchList.filter(function(e){return e!==r})}}),(0,s.Z)(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(t.watchList.length){var e=t.getFieldsValue(),n=t.getFieldsValue(!0);t.watchList.forEach(function(i){i(e,n,r)})}}),(0,s.Z)(this,"timeoutId",null),(0,s.Z)(this,"warningUnhooked",function(){}),(0,s.Z)(this,"updateStore",function(r){t.store=r}),(0,s.Z)(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?t.fieldEntities.filter(function(e){return e.getNamePath().length}):t.fieldEntities}),(0,s.Z)(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=new ce;return t.getFieldEntities(r).forEach(function(n){var i=n.getNamePath();e.set(i,n)}),e}),(0,s.Z)(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return t.getFieldEntities(!0);var e=t.getFieldsMap(!0);return r.map(function(n){var i=j(n);return e.get(i)||{INVALIDATE_NAME_PATH:j(n)}})}),(0,s.Z)(this,"getFieldsValue",function(r,e){t.warningUnhooked();var n,i,d;if(r===!0||Array.isArray(r)?(n=r,i=e):r&&(0,ve.Z)(r)==="object"&&(d=r.strict,i=r.filter),n===!0&&!i)return t.store;var l=t.getFieldEntitiesForNamePathList(Array.isArray(n)?n:null),o=[];return l.forEach(function(a){var f,h,R="INVALIDATE_NAME_PATH"in a?a.INVALIDATE_NAME_PATH:a.getNamePath();if(d){var b,F;if((b=(F=a).isList)!==null&&b!==void 0&&b.call(F))return}else if(!n&&(f=(h=a).isListField)!==null&&f!==void 0&&f.call(h))return;if(!i)o.push(R);else{var p="getMeta"in a?a.getMeta():null;i(p)&&o.push(R)}}),xe(t.store,o.map(j))}),(0,s.Z)(this,"getFieldValue",function(r){t.warningUnhooked();var e=j(r);return(0,oe.Z)(t.store,e)}),(0,s.Z)(this,"getFieldsError",function(r){t.warningUnhooked();var e=t.getFieldEntitiesForNamePathList(r);return e.map(function(n,i){return n&&!("INVALIDATE_NAME_PATH"in n)?{name:n.getNamePath(),errors:n.getErrors(),warnings:n.getWarnings()}:{name:j(r[i]),errors:[],warnings:[]}})}),(0,s.Z)(this,"getFieldError",function(r){t.warningUnhooked();var e=j(r),n=t.getFieldsError([e])[0];return n.errors}),(0,s.Z)(this,"getFieldWarning",function(r){t.warningUnhooked();var e=j(r),n=t.getFieldsError([e])[0];return n.warnings}),(0,s.Z)(this,"isFieldsTouched",function(){t.warningUnhooked();for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var i=e[0],d=e[1],l,o=!1;e.length===0?l=null:e.length===1?Array.isArray(i)?(l=i.map(j),o=!1):(l=null,o=i):(l=i.map(j),o=d);var a=t.getFieldEntities(!0),f=function(p){return p.isFieldTouched()};if(!l)return o?a.every(function(F){return f(F)||F.isList()}):a.some(f);var h=new ce;l.forEach(function(F){h.set(F,[])}),a.forEach(function(F){var p=F.getNamePath();l.forEach(function(y){y.every(function(m,E){return p[E]===m})&&h.update(y,function(m){return[].concat((0,Z.Z)(m),[F])})})});var R=function(p){return p.some(f)},b=h.map(function(F){var p=F.value;return p});return o?b.every(R):b.some(R)}),(0,s.Z)(this,"isFieldTouched",function(r){return t.warningUnhooked(),t.isFieldsTouched([r])}),(0,s.Z)(this,"isFieldsValidating",function(r){t.warningUnhooked();var e=t.getFieldEntities();if(!r)return e.some(function(i){return i.isFieldValidating()});var n=r.map(j);return e.some(function(i){var d=i.getNamePath();return ue(n,d)&&i.isFieldValidating()})}),(0,s.Z)(this,"isFieldValidating",function(r){return t.warningUnhooked(),t.isFieldsValidating([r])}),(0,s.Z)(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=new ce,n=t.getFieldEntities(!0);n.forEach(function(l){var o=l.props.initialValue,a=l.getNamePath();if(o!==void 0){var f=e.get(a)||new Set;f.add({entity:l,value:o}),e.set(a,f)}});var i=function(o){o.forEach(function(a){var f=a.props.initialValue;if(f!==void 0){var h=a.getNamePath(),R=t.getInitialValue(h);if(R!==void 0)(0,W.ZP)(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var b=e.get(h);if(b&&b.size>1)(0,W.ZP)(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(b){var F=t.getFieldValue(h),p=a.isListField();!p&&(!r.skipExist||F===void 0)&&t.updateStore((0,q.Z)(t.store,h,(0,Z.Z)(b)[0].value))}}}})},d;r.entities?d=r.entities:r.namePathList?(d=[],r.namePathList.forEach(function(l){var o=e.get(l);if(o){var a;(a=d).push.apply(a,(0,Z.Z)((0,Z.Z)(o).map(function(f){return f.entity})))}})):d=n,i(d)}),(0,s.Z)(this,"resetFields",function(r){t.warningUnhooked();var e=t.store;if(!r){t.updateStore((0,q.T)(t.initialValues)),t.resetWithFieldInitialValue(),t.notifyObservers(e,null,{type:"reset"}),t.notifyWatch();return}var n=r.map(j);n.forEach(function(i){var d=t.getInitialValue(i);t.updateStore((0,q.Z)(t.store,i,d))}),t.resetWithFieldInitialValue({namePathList:n}),t.notifyObservers(e,n,{type:"reset"}),t.notifyWatch(n)}),(0,s.Z)(this,"setFields",function(r){t.warningUnhooked();var e=t.store,n=[];r.forEach(function(i){var d=i.name,l=(0,U.Z)(i,nt),o=j(d);n.push(o),"value"in l&&t.updateStore((0,q.Z)(t.store,o,l.value)),t.notifyObservers(e,[o],{type:"setField",data:i})}),t.notifyWatch(n)}),(0,s.Z)(this,"getFields",function(){var r=t.getFieldEntities(!0),e=r.map(function(n){var i=n.getNamePath(),d=n.getMeta(),l=(0,P.Z)((0,P.Z)({},d),{},{name:i,value:t.getFieldValue(i)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return e}),(0,s.Z)(this,"initEntityValue",function(r){var e=r.props.initialValue;if(e!==void 0){var n=r.getNamePath(),i=(0,oe.Z)(t.store,n);i===void 0&&t.updateStore((0,q.Z)(t.store,n,e))}}),(0,s.Z)(this,"isMergedPreserve",function(r){var e=r!==void 0?r:t.preserve;return e!=null?e:!0}),(0,s.Z)(this,"registerField",function(r){t.fieldEntities.push(r);var e=r.getNamePath();if(t.notifyWatch([e]),r.props.initialValue!==void 0){var n=t.store;t.resetWithFieldInitialValue({entities:[r],skipExist:!0}),t.notifyObservers(n,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(i,d){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(t.fieldEntities=t.fieldEntities.filter(function(f){return f!==r}),!t.isMergedPreserve(d)&&(!i||l.length>1)){var o=i?void 0:t.getInitialValue(e);if(e.length&&t.getFieldValue(e)!==o&&t.fieldEntities.every(function(f){return!ke(f.getNamePath(),e)})){var a=t.store;t.updateStore((0,q.Z)(a,e,o,!0)),t.notifyObservers(a,[e],{type:"remove"}),t.triggerDependenciesUpdate(a,e)}}t.notifyWatch([e])}}),(0,s.Z)(this,"dispatch",function(r){switch(r.type){case"updateValue":{var e=r.namePath,n=r.value;t.updateValue(e,n);break}case"validateField":{var i=r.namePath,d=r.triggerName;t.validateFields([i],{triggerName:d});break}default:}}),(0,s.Z)(this,"notifyObservers",function(r,e,n){if(t.subscribable){var i=(0,P.Z)((0,P.Z)({},n),{},{store:t.getFieldsValue(!0)});t.getFieldEntities().forEach(function(d){var l=d.onStoreChange;l(r,e,i)})}else t.forceRootUpdate()}),(0,s.Z)(this,"triggerDependenciesUpdate",function(r,e){var n=t.getDependencyChildrenFields(e);return n.length&&t.validateFields(n),t.notifyObservers(r,n,{type:"dependenciesUpdate",relatedFields:[e].concat((0,Z.Z)(n))}),n}),(0,s.Z)(this,"updateValue",function(r,e){var n=j(r),i=t.store;t.updateStore((0,q.Z)(t.store,n,e)),t.notifyObservers(i,[n],{type:"valueUpdate",source:"internal"}),t.notifyWatch([n]);var d=t.triggerDependenciesUpdate(i,n),l=t.callbacks.onValuesChange;if(l){var o=xe(t.store,[n]);l(o,t.getFieldsValue())}t.triggerOnFieldsChange([n].concat((0,Z.Z)(d)))}),(0,s.Z)(this,"setFieldsValue",function(r){t.warningUnhooked();var e=t.store;if(r){var n=(0,q.T)(t.store,r);t.updateStore(n)}t.notifyObservers(e,null,{type:"valueUpdate",source:"external"}),t.notifyWatch()}),(0,s.Z)(this,"setFieldValue",function(r,e){t.setFields([{name:r,value:e}])}),(0,s.Z)(this,"getDependencyChildrenFields",function(r){var e=new Set,n=[],i=new ce;t.getFieldEntities().forEach(function(l){var o=l.props.dependencies;(o||[]).forEach(function(a){var f=j(a);i.update(f,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(l),h})})});var d=function l(o){var a=i.get(o)||new Set;a.forEach(function(f){if(!e.has(f)){e.add(f);var h=f.getNamePath();f.isFieldDirty()&&h.length&&(n.push(h),l(h))}})};return d(r),n}),(0,s.Z)(this,"triggerOnFieldsChange",function(r,e){var n=t.callbacks.onFieldsChange;if(n){var i=t.getFields();if(e){var d=new ce;e.forEach(function(o){var a=o.name,f=o.errors;d.set(a,f)}),i.forEach(function(o){o.errors=d.get(o.name)||o.errors})}var l=i.filter(function(o){var a=o.name;return ue(r,a)});l.length&&n(l,i)}}),(0,s.Z)(this,"validateFields",function(r,e){t.warningUnhooked();var n,i;Array.isArray(r)||typeof r=="string"||typeof e=="string"?(n=r,i=e):i=r;var d=!!n,l=d?n.map(j):[],o=[],a=String(Date.now()),f=new Set,h=i||{},R=h.recursive,b=h.dirty;t.getFieldEntities(!0).forEach(function(m){if(d||l.push(m.getNamePath()),!(!m.props.rules||!m.props.rules.length)&&!(b&&!m.isFieldDirty())){var E=m.getNamePath();if(f.add(E.join(a)),!d||ue(l,E,R)){var N=m.validateRules((0,P.Z)({validateMessages:(0,P.Z)((0,P.Z)({},we),t.validateMessages)},i));o.push(N.then(function(){return{name:E,errors:[],warnings:[]}}).catch(function(L){var T,x=[],X=[];return(T=L.forEach)===null||T===void 0||T.call(L,function(M){var w=M.rule.warningOnly,I=M.errors;w?X.push.apply(X,(0,Z.Z)(I)):x.push.apply(x,(0,Z.Z)(I))}),x.length?Promise.reject({name:E,errors:x,warnings:X}):{name:E,errors:x,warnings:X}}))}}});var F=tt(o);t.lastValidatePromise=F,F.catch(function(m){return m}).then(function(m){var E=m.map(function(N){var L=N.name;return L});t.notifyObservers(t.store,E,{type:"validateFinish"}),t.triggerOnFieldsChange(E,m)});var p=F.then(function(){return t.lastValidatePromise===F?Promise.resolve(t.getFieldsValue(l)):Promise.reject([])}).catch(function(m){var E=m.filter(function(N){return N&&N.errors.length});return Promise.reject({values:t.getFieldsValue(l),errorFields:E,outOfDate:t.lastValidatePromise!==F})});p.catch(function(m){return m});var y=l.filter(function(m){return f.has(m.join(a))});return t.triggerOnFieldsChange(y),p}),(0,s.Z)(this,"submit",function(){t.warningUnhooked(),t.validateFields().then(function(r){var e=t.callbacks.onFinish;if(e)try{e(r)}catch(n){console.error(n)}}).catch(function(r){var e=t.callbacks.onFinishFailed;e&&e(r)})}),this.forceRootUpdate=u});function it(c){var u=v.useRef(),t=v.useState({}),r=(0,ge.Z)(t,2),e=r[1];if(!u.current)if(c)u.current=c;else{var n=function(){e({})},i=new at(n);u.current=i.getForm()}return[u.current]}var Ve=it,Me=v.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ne=function(u){var t=u.validateMessages,r=u.onFormChange,e=u.onFormFinish,n=u.children,i=v.useContext(Me),d=v.useRef({});return v.createElement(Me.Provider,{value:(0,P.Z)((0,P.Z)({},i),{},{validateMessages:(0,P.Z)((0,P.Z)({},i.validateMessages),t),triggerFormChange:function(o,a){r&&r(o,{changedFields:a,forms:d.current}),i.triggerFormChange(o,a)},triggerFormFinish:function(o,a){e&&e(o,{values:a,forms:d.current}),i.triggerFormFinish(o,a)},registerForm:function(o,a){o&&(d.current=(0,P.Z)((0,P.Z)({},d.current),{},(0,s.Z)({},o,a))),i.registerForm(o,a)},unregisterForm:function(o){var a=(0,P.Z)({},d.current);delete a[o],d.current=a,i.unregisterForm(o)}})},n)},st=Me,ot=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],lt=function(u,t){var r=u.name,e=u.initialValues,n=u.fields,i=u.form,d=u.preserve,l=u.children,o=u.component,a=o===void 0?"form":o,f=u.validateMessages,h=u.validateTrigger,R=h===void 0?"onChange":h,b=u.onValuesChange,F=u.onFieldsChange,p=u.onFinish,y=u.onFinishFailed,m=(0,U.Z)(u,ot),E=v.useContext(st),N=Ve(i),L=(0,ge.Z)(N,1),T=L[0],x=T.getInternalHooks(Q),X=x.useSubscribe,M=x.setInitialValues,w=x.setCallbacks,I=x.setValidateMessages,K=x.setPreserve,J=x.destroyForm;v.useImperativeHandle(t,function(){return T}),v.useEffect(function(){return E.registerForm(r,T),function(){E.unregisterForm(r)}},[E,T,r]),I((0,P.Z)((0,P.Z)({},E.validateMessages),f)),w({onValuesChange:b,onFieldsChange:function(ne){if(E.triggerFormChange(r,ne),F){for(var le=arguments.length,We=new Array(le>1?le-1:0),he=1;he<le;he++)We[he-1]=arguments[he];F.apply(void 0,[ne].concat(We))}},onFinish:function(ne){E.triggerFormFinish(r,ne),p&&p(ne)},onFinishFailed:y}),K(d);var z=v.useRef(null);M(e,!z.current),z.current||(z.current=!0),v.useEffect(function(){return J},[]);var re,ee=typeof l=="function";if(ee){var ae=T.getFieldsValue(!0);re=l(ae,T)}else re=l;X(!ee);var Ae=v.useRef();v.useEffect(function(){Qe(Ae.current||[],n||[])||T.setFields(n||[]),Ae.current=n},[n,T]);var gt=v.useMemo(function(){return(0,P.Z)((0,P.Z)({},T),{},{validateTrigger:R})},[T,R]),De=v.createElement(fe.Provider,{value:null},v.createElement(se.Provider,{value:gt},re));return a===!1?De:v.createElement(a,(0,H.Z)({},m,{onSubmit:function(ne){ne.preventDefault(),ne.stopPropagation(),T.submit()},onReset:function(ne){var le;ne.preventDefault(),T.resetFields(),(le=m.onReset)===null||le===void 0||le.call(m,ne)}}),De)},ut=lt;function Se(c){try{return JSON.stringify(c)}catch(u){return Math.random()}}var ct=function(){};function dt(){for(var c=arguments.length,u=new Array(c),t=0;t<c;t++)u[t]=arguments[t];var r=u[0],e=u[1],n=e===void 0?{}:e,i=Ke(n)?{form:n}:n,d=i.form,l=(0,v.useState)(),o=(0,ge.Z)(l,2),a=o[0],f=o[1],h=(0,v.useMemo)(function(){return Se(a)},[a]),R=(0,v.useRef)(h);R.current=h;var b=(0,v.useContext)(se),F=d||b,p=F&&F._init,y=j(r),m=(0,v.useRef)(y);return m.current=y,ct(y),(0,v.useEffect)(function(){if(p){var E=F.getFieldsValue,N=F.getInternalHooks,L=N(Q),T=L.registerWatch,x=function(I,K){var J=i.preserve?K:I;return typeof r=="function"?r(J):(0,oe.Z)(J,m.current)},X=T(function(w,I){var K=x(w,I),J=Se(K);R.current!==J&&(R.current=J,f(K))}),M=x(E(),E(!0));return a!==M&&f(M),X}},[p]),a}var Ue=dt,ft=v.forwardRef(ut),de=ft;de.FormProvider=Ne,de.Field=Pe,de.List=Te,de.useForm=Ve,de.useWatch=Ue;var vt=de}}]);
