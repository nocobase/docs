"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[171],{305960:function(s,n,t){t.r(n);var o=t(572269),l=t(793359),h=t(861788),u=t(719977),_=t(20190),m=t(24268),x=t(496057),f=t(585939),g=t(28484),p=t(635206),v=t(375553),j=t(156266),I=t(572333),b=t(841118),E=t(39297),w=t(868526),M=t(605019),d=t(614651),a=t(280936),r=t(667294),i=t(576105),e=t(785893);function c(){return(0,e.jsx)(d.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(a.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"schedule-event",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#schedule-event",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Schedule event"]}),(0,e.jsx)("p",{children:i.texts[0].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:i.texts[1].value}),(0,e.jsx)("li",{children:i.texts[2].value})]}),(0,e.jsx)("p",{children:i.texts[3].value}),(0,e.jsxs)("h2",{id:"basic-usage",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#basic-usage",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Basic Usage"]}),(0,e.jsxs)("h3",{id:"creating-schedule-event",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#creating-schedule-event",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Creating Schedule event"]}),(0,e.jsx)("p",{children:i.texts[4].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/e09b6c9065167875b2ca7de5f5a799a7.png",alt:"Create Scheduled event"})}),(0,e.jsxs)("h3",{id:"custom-time-mode",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#custom-time-mode",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Custom Time Mode"]}),(0,e.jsx)("p",{children:i.texts[5].value}),(0,e.jsx)("p",{children:i.texts[6].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:i.texts[7].value}),(0,e.jsx)("li",{children:i.texts[8].value})]}),(0,e.jsx)("p",{children:i.texts[9].value}),(0,e.jsxs)("h3",{id:"time-field-of-collection-mode",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#time-field-of-collection-mode",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Time Field of Collection Mode"]}),(0,e.jsx)("p",{children:i.texts[10].value}),(0,e.jsxs)("h2",{id:"related-tips",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#related-tips",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Related Tips"]}),(0,e.jsxs)("h3",{id:"scheduled-tasks-in-application-not-started",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#scheduled-tasks-in-application-not-started",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Scheduled Tasks in Application Not Started"]}),(0,e.jsx)("p",{children:i.texts[11].value}),(0,e.jsxs)("h3",{id:"repeat-count",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#repeat-count",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Repeat Count"]}),(0,e.jsx)("p",{children:i.texts[12].value}),(0,e.jsxs)("h3",{id:"difference-between-interval-time-and-advanced-mode-in-repeat-rules",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#difference-between-interval-time-and-advanced-mode-in-repeat-rules",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Difference Between Interval Time and Advanced Mode in Repeat Rules"]}),(0,e.jsx)("p",{children:i.texts[13].value}),(0,e.jsxs)("h2",{id:"example",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example"]}),(0,e.jsx)("p",{children:i.texts[14].value}),(0,e.jsxs)("h3",{id:"custom-time-mode-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#custom-time-mode-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Custom Time Mode"]}),(0,e.jsx)("p",{children:i.texts[15].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/71131e3f2034263f883062389b356cbd.png",alt:"Scheduled Task_Trigger Configuration_Custom Time Mode"})}),(0,e.jsx)("p",{children:i.texts[16].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/188bc5287ffa1fb24a4e7baa1de6eb29.png",alt:"Scheduled Task_Trigger Configuration_Custom Time Mode"})}),(0,e.jsx)("p",{children:i.texts[17].value}),(0,e.jsxs)("h3",{id:"time-field-of-collection-mode-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#time-field-of-collection-mode-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Time Field of Collection Mode"]}),(0,e.jsx)("p",{children:i.texts[18].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/d40d5aef57f42799d31cc5882dd94246.png",alt:"Scheduled Task_Trigger Configuration_Collection Time Field Mode_Trigger"})}),(0,e.jsx)("p",{children:i.texts[19].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/491dde9df8f773f5b14a4fd8ceac9d3e.png",alt:"Scheduled Task_Trigger Configuration_Collection Time Field Mode_Update Node"})}),(0,e.jsx)("p",{children:i.texts[20].value})]})})})})}n.default=c},576105:function(s,n,t){t.r(n),t.d(n,{texts:function(){return o}});const o=[{value:"Scheduled tasks are events triggered based on time conditions, including two modes:",paraId:0,tocIndex:0},{value:"Custom Time: Regularly scheduled triggers similar to cron based on system time.",paraId:1,tocIndex:0},{value:"Time field of collection: Triggered according to the value of the time field in the collection.",paraId:1,tocIndex:0},{value:"When the system reaches the time (accurate to seconds) that meets the configured trigger conditions, the corresponding workflow will be triggered.",paraId:2,tocIndex:0},{value:'Select the "Schedule event" type when creating a workflow in the workflow list:',paraId:3,tocIndex:2},{value:"For the regular mode, start by configuring the start time to any point in time (accurate to seconds). The start time can be set to a future time or a past time. When set to a past time, it will check whether it is time based on the configured repeat condition. If no repeat condition is configured, the workflow will not be triggered if the start time is in the past.",paraId:4,tocIndex:3},{value:"There are two ways to configure repeat rules:",paraId:5,tocIndex:3},{value:"Interval Time: Trigger every fixed interval after the start time, such as every hour, every 30 minutes, etc.",paraId:6,tocIndex:3},{value:"Advanced Mode: Using cron rules, it can be configured to occur at fixed rule of dates and times.",paraId:6,tocIndex:3},{value:"After configuring the repeat rule, you can also configure the end condition, which can end at a fixed point in time or by the number of times executed.",paraId:7,tocIndex:3},{value:"Using the time field of the collection to determine the start time is a trigger mode that combines ordinary scheduled tasks with the collection time field. Using this mode can simplify some nodes in specific processes and make the configuration more intuitive. For example, to change the status of orders that have not been paid for more than 30 minutes to canceled, you can simply configure a scheduled task in the collection time field mode, select the start time as 30 minutes after the order created time field.",paraId:8,tocIndex:4},{value:"If the configured time conditions are met but the entire NocoBase application service is in a stopped or shutdown state, the scheduled tasks that should be triggered at the corresponding time point will be missed, and after the service restarts, missed tasks will not be triggered again. So, it may be necessary to consider handling corresponding situations or backup measures when using it.",paraId:9,tocIndex:6},{value:"When the repeat count is configured in the end condition, it calculates the total number of executions of the same workflow including all versions. For example, if a scheduled task has been executed 10 times in version 1, and the repeat count is also set to 10 times, the workflow will no longer be triggered. Even if it is copied to a new version, it will not be triggered unless the repeat count is modified to a number greater than 10. However, if it is duplicated to a new workflow, the number of executions will be recalculated from 0. Without modifying the relevant configuration, the new workflow can be triggered 10 more times.",paraId:10,tocIndex:7},{value:"The interval time in the repeat rule is relative to the time point of the previous trigger (start time), while the advanced mode triggers at fixed time points. For example, if it is configured to trigger every 30 minutes, and the last trigger is at 2021-09-01 12:01:23, the next trigger time will be 2021-09-01 12:31:23. The advanced mode, same as cron, configures rules to trigger at fixed time points, for example, it can be configured to trigger at 01 and 31 minutes past every hour.",paraId:11,tocIndex:8},{value:"Suppose we want to check orders that have not been paid for more than 30 minutes every minute and automatically change their status to canceled. We'll implement it using both modes.",paraId:12,tocIndex:9},{value:'Create a workflow based on a scheduled task, select the "Custom Time" mode in the trigger configuration, choose any time point not later than the current time as the start time, select "Every Minute" for the repeat rule, and leave the end condition blank:',paraId:13,tocIndex:10},{value:"Then, configure other nodes according to the logic of the workflow, calculating a time 30 minutes before current system time, and updating the status to canceled if unpaid which created before then:",paraId:14,tocIndex:10},{value:"After enabling the workflow, it will trigger every minute from the start time, calculate 30 minutes before now, and update the status of orders created before that time to canceled.",paraId:15,tocIndex:10},{value:'Create a workflow based on a scheduled task, select the "Collection Time Field" mode in the trigger configuration, choose the "Orders" collection, select 30 minutes after the order created time as the start time, and choose "No Repeat" for the repeat rule:',paraId:16,tocIndex:11},{value:'Then, configure other nodes according to the logic of the workflow, update orders with the ID of the triggered data and the status "Unpaid" to canceled:',paraId:17,tocIndex:11},{value:"Unlike the custom time mode, there is no need to calculate 30 minutes before, because the triggered data context in the workflow contains the corresponding data record that meet the time conditions, so you can directly update the status of the corresponding orders.",paraId:18,tocIndex:11}]}}]);
