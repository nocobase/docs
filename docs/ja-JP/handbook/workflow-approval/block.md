# 承認関連ブロック

## データ詳細の承認ブロック

提出されたデータの詳細ポップアップでは、承認ブロックを設定でき、対応するデータの承認記録と処理の入り口を表示します：

![詳細承認ブロック_作成ブロック](https://static-docs.nocobase.com/6b40f47474609d1dfd33618d80228189.png)

### 発起人の処理

承認ブロックには基本的な申請情報と承認処理の記録が表示されます。発起人はポップアップ内で、自身が発起した申請内容の詳細を確認できます。撤回可能に設定されている場合、プロセスが最初の承認ノードに入った後、まだ承認者によって処理されていない時点で発起した申請を撤回できます：

![詳細承認ブロック_発起人確認](https://static-docs.nocobase.com/5c7d4a6dca8de820d154487e41808c2a.png)

発起人が撤回操作を実行した場合、承認ブロックに撤回の記録が表示され、クリックすると申請のポップアップが再度開きます：

![詳細承認ブロック_発起人撤回後再確認](https://static-docs.nocobase.com/df52cb5203c1fd0a2f7af1757fbf6ecd.png)

ポップアップ内の内容は前回と一致しており、修正後に再提出できます：

![詳細承認ブロック_発起人撤回後再提出](https://static-docs.nocobase.com/4b3a6119e9871760d2dbdc8a2a75ff2c.png)

### 承認者の処理

承認者も同様にこのブロックを通じて承認内容の詳細を確認します。処理記録のノードリスト内で、現在ログインしているユーザーがそのノードの責任者の一人である場合、詳細列に「確認」ボタンが表示され、クリックすると承認のポップアップが開きます：

![詳細承認ブロック_承認者処理ノード](https://static-docs.nocobase.com/b160090482823ff5dc87592d0d5cedec.png)

ポップアップには、その承認ノードに設定された承認者インターフェースが表示され、通常は承認内容の詳細と操作バーが含まれます：

![詳細承認ブロック_承認者処理ポップアップ](https://static-docs.nocobase.com/26acffffd314e86a658334ae9bef9d9b.png)

承認者はポップアップ内で承認、拒否、または返却の操作を実行でき、操作後には処理記録に対応する記録が生成されます。返却の場合、発起人は再度申請内容を修正して再発起できます：

![詳細承認ブロック_承認者の却下](https://static-docs.nocobase.com/5da879b24923ed25c31be658636ada64.png)

承認または却下は、ノードに設定された対応するルールに基づいて、相応のステータスが生成されます：

![詳細承認ブロック_承認者の承認](https://static-docs.nocobase.com/b020b1f82fce7c27b905ecf0b4c0046d.png)

<!--
承認者が編集可能なフィールドが設定されている場合、承認者は処理画面で対応するフィールドの値を変更できます：

![詳細承認ブロック_承認者のフィールド変更](https://static-docs.nocobase.com/20241226233753.png)

承認者が処理を提出すると、変更内容が一緒に提出され、承認申請のデータ内容が更新されます。
-->

転送または追加承認操作が設定されている場合、承認者は処理画面でこれらの操作を実行できます。転送操作は、現在の承認ノードの処理責任を他のユーザーに転送し、指定された範囲内のユーザーを選択する必要があります：

![詳細承認ブロック_転送](https://static-docs.nocobase.com/20241226235129.png)

転送後、現在の承認者はその承認ノードの処理を担当しなくなり、転送されたユーザーが承認者リストに表示されます：

![詳細承認ブロック_転送後](https://static-docs.nocobase.com/20241226235334.png)

追加承認操作は、現在の承認ノードの処理者リストに複数のユーザーを追加でき、指定された範囲内で選択する必要があります：

![詳細承認ブロック_追加承認](https://static-docs.nocobase.com/20241226235556.png)

ノードが複数人による順次処理に設定されている場合、追加承認時には新しい承認者の処理順序を選択する必要があります：

* 自分の前：提出後、自分のタスクステータスが「処理待ち」になり、新しい承認者が処理を完了した後、自分が処理します。
* 自分の後：自分が先に処理し、新しい承認者がその後で処理します。

![詳細承認ブロック_追加承認後](https://static-docs.nocobase.com/20241227000005.png)

転送または追加承認後、新しい承認者の処理もノードに設定された承認ルールに従って処理されます。

## 承認センターブロック

承認プラグインは、承認プロセスの一部を集中管理するための2つのグローバルブロック、「承認の開始」と「承認待ち」を提供します：

![承認センターブロック_作成](https://static-docs.nocobase.com/fb3957320f082159f6f1f908937894b6.png)

「承認の開始」ブロックは発起人の視点から使用され、新しい承認をブロックの操作バーから開始できます：

![承認センターブロック_承認を開始](https://static-docs.nocobase.com/a888630f892f15882eb1ec6b8826c528.png)

承認トリガーに「データブロックと承認センターの両方から承認を開始および承認できる」と設定されている場合、「申請」ボタンのドロップダウンメニューに対応する承認プロセスが表示されます。

もちろん、リストで既に開始された承認のステータスを確認することもできます：

![承認センターブロック_開始リストの確認](https://static-docs.nocobase.com/4379ff809ae6a545dccab434cf6a6cfb.png)

「確認」をクリックすると、開かれるポップアップはデータ詳細の承認ブロックの内容に似ていますが、発起人が提出した内容と承認履歴が異なるタブで表示されます：

![承認センターブロック_発起人の詳細確認](https://static-docs.nocobase.com/234edf3af9a3fb9e3c7aa820c3befd66.png)

「承認待ち」ブロックは承認者の視点から使用され、リストで処理待ちの承認を確認できます。対応する「確認」ボタンをクリックすると、処理ポップアップが開かれ、データ詳細の承認ブロックの内容に似ていますが、承認者の処理フォームと承認履歴が異なるタブで表示されます：

![承認センターブロック_承認者の処理済み詳細確認](https://static-docs.nocobase.com/bc425bd18837d6a918c609849c38da5d.png)

処理済みの場合、提出された内容が表示され、変更することはできません。
