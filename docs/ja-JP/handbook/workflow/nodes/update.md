# データの更新

特定のデータテーブルの条件を満たすデータを更新するために使用します。

データテーブルとフィールドの値設定部分は新しいノードと同じですが、更新ノードの主な違いはフィルタ条件が追加されていることと、更新モードを選択する必要があることです。また、更新ノードの結果は、更新に成功したデータの行数を返し、実行履歴でのみ確認でき、後続のノードで変数として使用することはできません。

## ノードの作成

ワークフロー設定画面で、プロセス内のプラス（“+”）ボタンをクリックして「データの更新」ノードを追加します：

![データの更新_追加](https://static-docs.nocobase.com/9ff24d7bc173b3a71decc1f70ca9fb66.png)

## ノード設定

![更新ノード_ノード設定](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

### データテーブル

更新対象のデータテーブルを選択します。

### 更新モード

更新モードには「バッチ」と「逐条」の2つがあります。バッチモードでは、各更新データのデータテーブルイベントは再度トリガーされません。一方、逐条更新の場合は、各更新データのデータテーブルイベントがトリガーされますが、大量のデータを扱う際にはパフォーマンスに問題が生じる可能性があるため、慎重に使用する必要があります。通常、更新対象のデータや他のワークフローイベントをトリガーするかどうかに応じて選択します。主キーに基づいて単一データを更新する場合は逐条更新を推奨し、条件に基づいて複数データを更新する場合はバッチ更新を推奨します。

### フィルタ条件

通常のデータテーブル照会時のフィルタ条件に似ており、プロセスのコンテキスト変数を使用できます。

### フィールド値

新しいノードのフィールド値設定に似ており、プロセスのコンテキスト変数を使用することも、静的値を手動で入力することもできます。

注：ワークフロー内の更新ノードで更新されたデータは「最終更新者」のデータを自動的に処理しません。このフィールドの値は状況に応じて手動で設定する必要があります。

## 例

例えば、新しい「記事」を追加する際に「記事分類」テーブルの「記事数」フィールドを自動更新する場合、更新ノードを使用して実現できます：

![更新ノード_例_ノード設定](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

ワークフローがトリガーされると、「記事分類」テーブルの「記事数」フィールドは現在の記事数 +1 に自動的に更新されます。

