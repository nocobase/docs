# データの追加

特定のデータテーブルに新しいデータ行を追加する手順です。

新しいデータ行のフィールド値には、プロセスコンテキストの変数を使用できます。リレーションフィールドへの値の割り当ては、コンテキスト内の対応するデータ変数を直接参照可能で、オブジェクトや外部キーの値も利用できます。変数を使用しない場合は、外部キーの値を手動で入力する必要があります。多対多の関係で複数の外部キー値がある場合は、英語のカンマで区切って入力してください。

## ノードの作成

ワークフロー設定画面で、プロセス内のプラス（“+”）ボタンをクリックし、「データの追加」ノードを追加します：

![データ追加ノードの作成](https://static-docs.nocobase.com/386c8c01c89b1eeab848510e77f4841a.png)

## ノード設定

![追加ノード_例_ノード設定](https://static-docs.nocobase.com/5f7b97a51b64a1741cf82a4d4455b610.png)

### データテーブル

新しいデータを追加するデータテーブルを選択します。

### フィールド値

データテーブルのフィールドに値を設定します。プロセスコンテキストの変数を使用することも、手動で静的な値を入力することもできます。

:::info{title="ヒント"}
ワークフローで新しいノードを追加したデータは、「作成者」や「最終更新者」などのユーザーデータを自動的に処理しません。状況に応じて、これらのフィールドの値を手動で設定する必要があります。
:::

### リレーションデータの事前ロード

新しいデータのフィールドにリレーションフィールドが含まれており、後続のプロセスで対応するリレーションデータを使用したい場合は、事前ロード設定で該当するリレーションフィールドを選択してください。これにより、新しいデータの追加が完了した後、対応するリレーションデータが自動的にロードされ、ノードの結果データに保存されます。

## 例

例えば、「記事」テーブルのデータが追加または更新された後に、自動的に「記事バージョン」データを追加し、記事の変更履歴を記録する必要がある場合は、追加ノードを使用して実現できます：

![追加ノード_例_プロセス設定](https://static-docs.nocobase.com/dfd4820d49c145fa331883fc09c9161f.png)

![追加ノード_例_ノード設定](https://static-docs.nocobase.com/1a0992e66170be12a068da6503298868.png)

この設定でワークフローを有効にすると、「記事」テーブルのデータが変更された際に、自動的に「記事バージョン」データが追加され、記事の変更履歴が記録されます。

