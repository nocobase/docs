# 高度な設定

## 実行モード

ワークフローは、作成時に選択されたトリガータイプに基づいて、「非同期」または「同期」の方式で実行されます。非同期モードでは、特定のイベントがトリガーされた後、ワークフローはキューに入れられ、バックグラウンドで一つずつ実行されます。一方、同期モードでは、トリガー後にスケジュールキューに入らず、直接実行が開始され、実行が完了した後に即座にフィードバックが返されます。

データテーブルイベント、操作後イベント、カスタム操作イベント、定期タスクイベント、承認イベントはデフォルトで非同期方式で実行されるのに対し、操作前イベントはデフォルトで同期方式で実行されます。データテーブルイベントとフォームイベントの2つのモードがサポートされており、ワークフロー作成時に選択できます：

![同期モード_作成同期ワークフロー](https://static-docs.nocobase.com/39bc0821f50c1bde4729c531c6236795.png)

:::info{title=ヒント}
同期モードのワークフローはそのモードに制限され、内部で「待機」状態を引き起こすノード（例：「手動処理」など）は使用できません。
:::

## 自動履歴削除

ワークフローのトリガーが頻繁に発生する場合、自動履歴削除を設定することで干渉を減らし、データベースのストレージ負荷を軽減できます。

ワークフローの新規作成および編集のポップアップウィンドウでも、対応するプロセスが自動で履歴を削除するかどうかを設定できます：

![自動履歴削除設定](https://static-docs.nocobase.com/b2e4c08e7a01e213069912fe04baa7bd.png)

自動削除は、実行結果の状態に応じて設定できます。ほとんどの場合、「成功」状態のみを選択することをお勧めします。これにより、実行に失敗した記録を保持し、後で問題を調査することができます。

ワークフローをデバッグしている際は、自動履歴削除を無効にし、履歴を通じてワークフローの実行ロジックが期待通りであるかを確認することをお勧めします。

:::info{title=ヒント}
ワークフローの履歴を削除しても、すでに実行されたワークフローのカウントが減ることはありません。
:::

