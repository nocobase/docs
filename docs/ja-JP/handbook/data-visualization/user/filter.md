# フィルターブロック

グラフブロック内のフィルターブロックは、現在のグラフブロック内の複数のグラフを動的にフィルタリングするために使用されます。

## 有効化/無効化

グラフブロックで「ブロックを追加」(Add block) → 「フィルター」(Filter)をクリックすることで、フィルターブロックを有効化または無効化できます。

![](https://static-docs.nocobase.com/d0e6b116952fa6b719acb0f858b432c3.png)

## フィルターフィールドの設定

### データテーブルフィールド

現在のグラフブロック内のグラフで使用されるデータテーブルから、関連するフィールドを直接選択することで、フィルターフォームフィールドを作成できます。

![](https://static-docs.nocobase.com/e2ef150e9beb8c78004d9049a7536219.png)

フォームフィールドの設定が可能です：

![](https://static-docs.nocobase.com/215f0b996e69bf2d5b99746e6d521c3d.png)

- フィールド表示タイトルの設定
- フィールド説明の設定
- フィルタリング時に適用される操作子の設定  
  ![](https://static-docs.nocobase.com/d6a593a330d27da4ea78124dfdb8450d.png)

- フィールドのデフォルト値を設定し、変数を使用できます。変数のデータ型は、現在のフィールドのデータ型と一致する必要があります。
  ![](https://static-docs.nocobase.com/37dee4008f3283db24d491fb8f0404fa.png)

  例えば：

  - デフォルト値を現在のユーザーIDに設定し、ページがロードされると自動的に現在のユーザーデータをフィルタリングします。
  - デフォルト値を現在の日付に設定し、ページがロードされると自動的に現在の日付データをフィルタリングします。

### カスタムフィールド

特定の状況では、同じフィルターフィールドを使用して異なるテーブルの異なるフィールドをフィルタリングする必要があります。例えば、1つの日付フィールドを使用して異なるテーブルの異なる日付フィールドをフィルタリングする場合です。この場合、カスタムフィールドを作成することができます。

![](https://static-docs.nocobase.com/87544594246453d175ef265030c0801a.png)

カスタムフィールドを追加する際には、フィールドタイトルを設定し、フィールドコンポーネントを選択して適切に設定を行い、さらに現在のブロックで使用されているデータテーブルからフィールドを選択し、そのフィールドのメタデータ設定を直接適用することで、重複する設定を避けることができます。

![](https://static-docs.nocobase.com/ef09136d674d4b7356e819350bcac804.png)

カスタムフィルターフィールドを使用するには、対応するチャートの設定を開き、データクエリのフィルタ設定にフィルタ条件を追加し、「現在のフィルタ」（Current filter）内の変数を使用します。フィルタリング対象のフィールドタイプは、フィルタフォームのカスタムフィールドタイプと一致する必要があります。

![](https://static-docs.nocobase.com/f9f2487c4da4b2024af1556743beab6c.png)

カスタムフィールドに関しては、タイトル、説明、デフォルト値を設定できます。

![](https://static-docs.nocobase.com/4a8feb12404f5cc5e74d589263307e5a.png)

## 設定ブロックアクション

- **フィルタ（Filter）** - フィルタ条件を適用
- **リセット（Reset）** - フィルタフォームをリセット
- **折りたたむ/展開する（Collapse / Expand）** - 一行に折りたたむ、または複数行を展開する

![](https://static-docs.nocobase.com/8619ac90fa045b3a9c6d6610f7be1a81.png)

