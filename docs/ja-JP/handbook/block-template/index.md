# ブロックテンプレート

<PluginInfo name="block-template"></PluginInfo>
<style>
.markdown h5 {
    font-size: 15px;
}
</style>


## はじめに

ブロックテンプレートは、ブロック用のテンプレート機能を提供し、テンプレートの一元管理や、それらを基にしたブロックの作成を可能にします。テンプレートから作成されたブロックはテンプレートを継承し、必要に応じて独自の設定を上書き追加することができます。

## インストール

組み込みプラグインのため、インストールは不要です。

## 使用方法

![メインインターフェース](https://static-docs.nocobase.com/main-screen-block-template.png)

### テンプレート管理

#### テンプレートの作成

ブロックテンプレートでは、用途に応じた2つの作成方法が用意されています:

##### 1. テンプレート管理画面から作成

**適用シナリオ:**
- 新規テンプレートをゼロから作成する場合

**手順:**
1. ブロックテンプレート管理画面にアクセスする
2. 「新規追加」ボタンをクリックする
3. 基本的なテンプレート情報を入力する
4. テンプレートの内容を設定する
5. 「送信」ボタンをクリックして作成を完了する

![テンプレートの作成](https://static-docs.nocobase.com/create-template.png)

##### 2. 既存のブロックからテンプレートを作成

**適用シナリオ:**
- 目的のブロックが既にページ上で構成されている場合
- 他のコンテキストで既存ブロックの設定を再利用する必要がある場合
- 再設定せずに迅速にテンプレートを作成したい場合

**手順:**
1. テンプレートとして保存したいデータブロックをページ上で見つける
2. 「テンプレートとして保存」オプションを選択する
3. テンプレート名を入力し、保存する

![テンプレートとして保存](https://static-docs.nocobase.com/save-as-block-template.png)

:::info{title=注意}
- ページ上のデータブロックのみがテンプレートとして保存可能です
- ポップアップダイアログ内のブロックは直接テンプレートとして保存できません
- チャートブロックは現在、テンプレート化に対応していません
:::

#### テンプレートの設定

テンプレートを選択し、「設定」ボタンをクリックして、テンプレートに対応するデータブロックの設定画面に入ります。

![テンプレートの設定](https://static-docs.nocobase.com/configure-template.png)

:::info{title=注意}
- 現在、テンプレートは1つのデータブロックのみをサポートしています。データブロックが設定されていない場合、そのテンプレートはブロック作成で使用できません。
- チャートブロックは現在、テンプレート化に対応していません。
:::

#### テンプレートの編集

テンプレートを選択し、「編集」ボタンをクリックして、テンプレートのタイトルと説明を修正できる編集画面に入ります.

![テンプレートの編集](https://static-docs.nocobase.com/edit-template.png)

#### テンプレートの複製

テンプレートを選択し、「複製」ボタンをクリックして新しいテンプレートのタイトルを入力後、「送信」ボタンをクリックすると、テンプレートがコピーされます。  
コピーされたテンプレートは新たな要件に合わせて編集できます.

![テンプレートの複製](https://static-docs.nocobase.com/copy-template.png)

#### テンプレートの削除

テンプレートを選択し、「削除」ボタンをクリックしてから、「送信」ボタンをクリックすると、テンプレートが削除されます.

![テンプレートの削除](https://static-docs.nocobase.com/delete-template.png)

削除時に、作成済みブロックを「保持する」かどうかを選択できます:
- 保持する場合、テンプレート削除後にテンプレートから作成されたブロックは通常のページブロックに変換されます。
- 保持しない場合、テンプレートから作成されたブロックも削除されます.

### テンプレートの利用方法

#### ブロックの作成

ページ上でブロックを作成する際は、対応するブロックテンプレートを選択して、そのテンプレートを用いてブロックを作成します.

![ブロックの作成](https://static-docs.nocobase.com/create-block.png)

テンプレートから作成されたブロックは、通常のブロックと以下の点で異なります:
1. ブロックはテンプレートを継承しており、その上に独自の設定を追加できます。変更を加えなかった設定はテンプレートと同期されます.
2. テンプレートから継承されたUIコンポーネントは、ページ上から削除することができません.
![削除できない](https://static-docs.nocobase.com/disable-delete.png)

3. ブロック内の追加フィールドやアクションは、容易に識別できるように異なる背景色でハイライトされます.
![ブロックのスタイル](https://static-docs.nocobase.com/template-bg.png)

4. ブロックおよびテンプレートから継承されたUIコンポーネントの両方には、「テンプレートに戻す」オプションがあり、これを選択すると完全にテンプレートに一致するようにリセットされます.
![テンプレートに戻す](https://static-docs.nocobase.com/revert-to-template.gif)

5. 当需要将模板区块与原模板脱离继承关系时, 可以通过 "转换为普通区块" 功能将模板区块转换为普通区块。

![convert-to-normal-block](https://static-docs.nocobase.com/convert-to-normal-block.png)

:::info{title=注意}
ブロック内のUIコンポーネントの配置はページレイアウトによって決まっており、テンプレートの変更を自動的に反映して更新されるわけではありません。コンポーネントの位置をテンプレートと同期させるには、ブロック全体をテンプレートに戻す必要があります.
:::

## よくある質問

**Q: 編集フォームのテンプレートはどのように作成しますか？**

A: 編集フォームのテンプレートの設定は、追加フォームのテンプレート設定と同様です。追加フォームブロックを設定することで、編集フォームのテンプレートオプションに自動的に表示されるテンプレートを作成できます.

**Q: なぜテンプレート内のフィールド位置が、それを元に作成されたブロックと同期しないのですか？**

A: ブロック内のUIコンポーネントの配置はページレイアウトによって決定され、テンプレートの変更と自動的に同期することはありません。同期が必要な場合は「テンプレートに戻す」機能を使用してください。ただし、テンプレートに戻すとブロックに施されたカスタム設定はすべて消去される点にご注意ください.

**Q: 使われていないテンプレートはどのように扱うべきですか？**

A: 未使用のテンプレートは削除することを推奨します。テンプレートを削除する際には、そのテンプレートから作成されたブロックを保持するかどうかを選択できます。保持を選択した場合、テンプレートから作成されたブロックは既存の機能に影響を与えることなく標準のページブロックに変換されます。保持しない場合、テンプレートから作成されたブロックも削除されます.

**Q: なぜチャートブロックのテンプレート設定ができないのですか？**

A: 今後のバージョンでは、チャートブロックのテンプレート化がサポートされる予定です.

**Q: なぜポップアップからブロックをテンプレートとして保存するオプションがないのですか？**

A: テンプレートはページ内のブロックに基づいており、独立したコンテキストで動作します。ポップアップダイアログ内のブロックは、現在のポップアップ外のブロックに依存しているため、ポップアップからブロックを直接テンプレートとして保存することは現在サポートされていません.

**Q: 非推奨のテンプレートをどのようにして新しいブロックテンプレートに変換できますか？**

A: 旧テンプレートをコピーして新しいページブロックを作成し、そのページブロックをテンプレートとして保存することで変換できます. ![20250408092704_rec_](https://static-docs.nocobase.com/20250408092704_rec_.gif)
