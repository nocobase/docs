# フォームブロック

## 概要

フォームブロックは、データの入力および編集インターフェースを構築するための重要な要素です。高いカスタマイズ性を持ち、データモデルに基づいて適切なコンポーネントを使用し、必要なフィールドを表示します。連動ルールを通じて、フォームブロックは動的にフィールドを表示することが可能です。さらに、ワークフローと組み合わせることで、自動化プロセスのトリガーやデータ処理が可能となり、作業効率の向上や論理的な編成の実現が図れます。

## ブロックの追加

<video width="100%" height="440" controls>
      <source src="https://static-docs.nocobase.com/20240416215917.mp4" type="video/mp4">
</video>

## ブロック設定項目

![20240416220148](https://static-docs.nocobase.com/20240416220148.png)

### 連動ルール

連動ルールを通じて、フォームフィールドの動作を制御します。

![20240416220254](https://static-docs.nocobase.com/20240416220254.png)

詳細については、[連動ルール](/handbook/ui/blocks/block-settings/linkage-rule)を参照してください。

### フォームデータテンプレート（新規データのフォームのみサポート）

フォームデータテンプレートは、データ入力プロセスを簡素化し、入力効率を向上させることを目的としています。データ範囲から1件または一組のデータをテンプレートとして選択し、選択されたターゲットデータテンプレートがフォームのデフォルト値として填充されます。

![20240408143719](https://static-docs.nocobase.com/20240408143719.png)

![20240426212024](https://static-docs.nocobase.com/20240426212024.png)

1. 1件または一組のデータをフィルタリングしてテンプレートデータを作成します。
2. テンプレートデータを識別するためのタイトルフィールドを選択します。
3. テンプレートフィールドにチェックを入れると、選択されたフィールドがフォームに自動的に填充されます。

#### フォームフィールドの同期

- 現在のフォームブロックで設定されたフィールドを自動的に解析し、テンプレートフィールドとして使用します。
- フォームブロックのフィールド（例：関係フィールドコンポーネントの調整）を後から変更した場合は、再度テンプレート設定を開いて同期ボタンをクリックすることで、フォームとテンプレートの一貫性を確保します。

#### データテンプレートとして選択されたレコードは、以下のフィールドのデータをフィルタリングします：

- 主キー
- 外部キー
- 重複を許可しないフィールド
- ソートフィールド
- 自動エンコードフィールド
- パスワード
- 作成者
- 作成日
- 最終更新者
- 最終更新日

#### 関係フィールドについて

- 一般フィールドと hasOne および hasMany の関係フィールドはコピーされます。
- belongsTo および belongsToMany の関係フィールドは参照として扱われます。参照はコピーに変わることがあり、例えば select から sub-form に変わると、関係は参照からコピーに変わります（コピーに変わると、すべてのフィールドはオプションになります）。

#### アプリケーションシナリオ

シナリオの説明：ECプラットフォームでは新商品を頻繁に追加する必要があり、これらの新商品は既存の商品と多くの属性が似ているか同じです。

解決策：既存の商品をテンプレートとして選び、その属性情報をフォームデータテンプレートとして使用します。新商品を作成する際、ユーザーはこのテンプレートを適用することで、テンプレート商品の属性情報を迅速に新商品にコピーし、新商品入力の効率を向上させます。

- 商品プロモーションテンプレートを作成

![20240408145855](https://static-docs.nocobase.com/20240408145855.png)

- プロモーション商品を簡単に入力

<video width="100%" height="440" controls>
      <source src="https://static-docs.nocobase.com/20240408150250.mp4" type="video/mp4">
</video>

- [ブロックタイトルを編集](/handbook/ui/blocks/block-settings/block-title)
- [ブロックテンプレートとして保存](/handbook/block-template)

### ブロックの高さを設定

例：注文作成ブロックの高さを「全高」モードに設定します。

![20240604230831](https://static-docs.nocobase.com/20240604230831.gif)

詳細は [ブロックの高さ](/handbook/ui/blocks/block-settings/block-height) を参照してください。

## フィールドの設定

### 本表のフィールド

![20240416230739](https://static-docs.nocobase.com/20240416230739.png)

### リレーションシップテーブルフィールド

リレーションシップテーブルフィールドは、フォーム内で読み取り専用であり、通常はリレーションフィールドと組み合わせて使用され、リレーションデータの複数のフィールド値を表示することができます。

![20240416230811](https://static-docs.nocobase.com/20240416230811.png)

<video width="100%" height="440" controls>
      <source src="https://static-docs.nocobase.com/20240416231152.mp4" type="video/mp4">
</video>

フォームフィールドの設定項目については、[フォームフィールド](/handbook/ui/fields/generic/form-item)を参照してください。

## 設定操作

![20240417115249](https://static-docs.nocobase.com/20240417115249.png)

- [送信](/handbook/ui/actions/types/submit)
- [データを保存](/handbook/ui/actions/types/save-record)
- [カスタムリクエスト](/handbook/action-custom-request)
- [ワークフローをトリガー](/handbook/workflow/manual/triggers/custom-action)

