# 概述

## 内置引擎

目前 NocoBase 内置支持的引擎类型如下：

- [本地存储](./local.md)
- [阿里云 OSS](./aliyun-oss.md)
- [亚马逊 S3](./amazon-s3.md)
- [腾讯云 COS](./tencent-cos.md)

系统安装时会自动添加一个本地存储引擎，可直接使用。也可以添加新的或编辑已有的引擎参数。

## 引擎通用参数

除了不同引擎类别的特有参数外，以下部分为通用参数（以本地存储为例）：

![文件存储引擎配置示例](https://static-docs.nocobase.com/20240529115151.png)

### 标题

存储引擎的名称，用于人工识别。

### 系统名

存储引擎的系统名称，用于系统识别。必须是系统唯一的，不填会由系统自动随机生成。

### 访问 URL 基础

该文件对外可访问的 URL 地址前缀部分，可以是 CDN 的访问 URL 基础，如：“`https://cdn.nocobase.com/app`”（无需结尾的“`/`”）。

### 路径

存储文件时使用的相对路径，在访问时此部分也会被自动拼接到最终的 URL 中。如：“`user/avatar`”（无需开头和结尾的“`/`”）。

### 文件大小限制

对此存储引擎上传文件时的大小限制，超过该设置大小的文件将无法上传。系统默认限制为 20MB，可调整到最大的限制为 1GB。

### 文件类型

可对上传文件的类型进行限制，使用 [MIME](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types) 语法描述格式。例如：`image/*` 代表图片类文件。多个类型可以用英文逗号分隔，如：`image/*, application/pdf` 代表允许图片类型和 PDF 类型的文件。

### 默认存储引擎

勾选后设置为系统的默认存储引擎，在附件字段或文件表未指定存储引擎时，上传的文件均会保存至默认存储引擎中。默认存储引擎不可删除。

### 删除记录时保留文件

勾选后当附件表或文件表的数据记录被删除时，仍然保留存储引擎中已上传的文件。默认不勾选，即删除记录时会同时删除存储引擎中的文件。

:::info{title=提示}
文件上传后，最终的访问路径会由几部分拼接而成：

```
<访问 URL 基础>/<路径>/<文件名><后缀名>
```

如：`https://cdn.nocobase.com/app/user/avatar/20240529115151.png`。
:::
