# 多应用

<PluginInfo name="multi-app" licenseBundled="professional"></PluginInfo>

## 介绍

无需单独部署即可动态管理多个应用，每个应用都是独立的实例。

:::warning
多应用管理插件并不提供用户共享的能力，可以通过「[认证插件](/handbook/auth)」打通。
:::


## 安装

在插件管理中找到 多空间（Multi-Space） 插件，并启用。


![](https://static-docs.nocobase.com/multi-app/Plugin-manager-NocoBase-10-16-2025_03_07_PM.png)

## 使用手册

### 子应用管理

点击设置菜单中 多应用条目，进入到 多应用 管理页面
![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_03_48_PM.png)

#### 子应用创建

点击新增按钮，创建子应用
![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_03_50_PM.png)

表单中部分字段说明
* 名称为子应用标识，全局唯一
* 端口为子应用运行时使用的端口
* 固定到菜单：将子应用的打开入口放置到顶栏左侧
* 数据库连接
  * 新数据库：使用当前的数据服务，配置独立的数据库，
  * 使用新的数据连接：配置独立的数据服务
  * 使用Schema：在PostgreSQL 中创建Schema
* 升级：数据库连接时如果库中已存在老版本的nocobase数据库，将自动升级为当前版本


#### 子应用运行与停止
点击 start 按钮，运行子应用（如果创建时勾选了 Start on first visit，在首次访问时自动运行）
点击 View 按钮，会打开新的标签页，查看子应用
![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_04_00_PM.png)


#### 子应用日志查看
点击 日志 按钮可以查看子应用的运行日志（某些情况下，比如数据库损坏等，子应用运行了，但是无法访问，可以通过这里进行排查
）
![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_04_02_PM.png)

#### 子应用删除
点击删除按钮可以删除子应用，可以勾选是否删除子应用的数据库（请谨慎操作，该行为不可逆）

### 子应用访问
正常情况下，通过cname访问时，子应用的所有数据将通过主应用进行转发，如果想直接访问子应用，可以通过子应用的端口进行访问

### 通过命令行管理子应用

在项目根目录，可以通过 `yarn nocobase pm2 [commond]` 管理子应用实例，以下是一些常用命令
- `yarn nocobase pm2 list`: 查看当前运行实例列表
- `yarn nocobase pm2 stop [appname]`: 停止某个子应用进程
- `yarn nocobase pm2 delete [appname]`: 删除某个子应用进程
- `yarn nocobase pm2 kill`: 强制终止所有启动的进程（可能包含主应用的实例）


## 常见问题

#### 插件管理
子应用可以使用的插件和主应用一致（包括版本），但是可以独立配置和使用插件

#### 数据库隔离
子应用可以配置独立的数据库，如果想应用之间进行数据共享，可通过外部数据源实现

#### 数据备份和迁移
目前在主应用上数据备份不支持包含子应用的数据（只包含子应用基本信息），需手动对子应用备份和迁移

#### 部署与更新
子应用的版本将自动跟随主应用进行升级，自动保证主子应用版本一致

#### 子应用资源占用
每个子应用的资源占用和主应用基本一致，目前单个实例内存占用在500-600MB左右，单个应用的基础配置为 2C2G。



我们的使用场景
我们是一家保险经纪公司，拥有 600 多个客户，需要：
为多个客户部署定制化的应用程序
确保每个客户之间的数据完全隔离
为每个客户提供其专属品牌域名
从一个管理实例集中管理所有客户应用程序
关于父子架构的问题
我希望您能就多应用管理器插件的以下方面提供说明：
1. 数据库隔离与架构
每个子应用可以使用不同的数据库服务器，还是必须与父级共享数据库服务器？
父应用和子应用之间是否存在任何共享的数据库组件或模式？
多个子应用的备份和迁移策略是什么？
2. 资源管理与可扩展性
一个专业版许可证下可以创建多少个子应用？
运行多个子应用推荐的服务器配置是什么？
是否有我们需要注意的性能基准或限制？
子应用可以分布在多台服务器上进行负载均衡吗？
3. 部署与更新
我们可以选择性地更新特定的子应用而不影响其他子应用吗？
在将子应用推送到生产环境之前，是否具备暂存/测试功能？
父应用和子应用的插件更新是如何管理的？
4. 高级配置
我们可以限制哪些插件可用于特定的子应用吗？
不同的子应用可以运行不同版本的 NocoBase 吗？
我们可以为每个子应用设置资源限制（存储、API 调用等）吗？
5. 客户管理
如果客户以后想完全接管其应用程序的管理，会发生什么？
子应用可以导出/迁移到独立的实例吗？
在保留数据的情况下，我们如何处理客户下线？
需要补充的信息
多应用管理器在生产环境中是否有任何已记录的限制或已知问题？
是否有公司成功使用此功能进行多客户部署的案例研究？
是否可以安排技术咨询或访问试用环境来测试这种架构？