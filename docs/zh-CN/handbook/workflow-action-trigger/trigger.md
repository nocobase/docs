# 触发器配置

## 创建工作流

创建工作流时，类型选择“操作后事件”：

![创建工作流_操作后事件触发器](https://static-docs.nocobase.com/13c87035ec1bb7332514676d3e896007.png)

## 执行模式

对于操作后事件，创建时还可以选择执行模式为“同步”或“异步”：

![创建工作流_选择同步或异步](https://static-docs.nocobase.com/bc83525c7e539d578f9e2e20baf9ab69.png)

如果是需要在用户操作后立即执行并返回的流程，可以使用同步模式，否则默认为异步模式。异步模式下触发工作流后该操作即完成，工作流会在应用后台以队列的方式陆续执行。

## 配置数据表

进入工作流画布，点击触发器打开配置弹窗，首先需要选择要绑定的数据表：

![工作流配置_选择数据表](https://static-docs.nocobase.com/35c49a91eba731127edcf76719c97634.png)

## 选择触发模式

然后选择触发模式，有局部模式和全局模式两种：

![工作流配置_选择触发模式](https://static-docs.nocobase.com/317809c48b2f2a2d38aedc7d08abdadc.png)

其中：

* 局部模式只在绑定了该工作流的操作按钮上触发，未绑定该工作流的按钮点击后不会触发。可基于用途不同的表单，是否触发同一个流程的考虑，以决定是否绑定该工作流。
* 全局模式则是在数据表的所配置操作按钮上都会触发，不区分来自哪个表单，也无需绑定对应工作流。

局部模式下，目前支持绑定的操作按钮如下：

* 新增表单的“提交”和“保存”按钮。
* 更新表单的“提交”和“保存”按钮。
* 数据行（表格、列表、看板等）中的“更新数据”按钮。

## 选择操作类型

如选择了全局模式，还需要选择操作类型，目前支持“创建数据操作”和“更新数据操作”。两种操作均在操作成功后触发工作流。

## 选择预加载关系数据

如需在后续流程中使用触发数据的关联数据，可以选择需要预加载的关系字段：

![工作流配置_预加载关系](https://static-docs.nocobase.com/5cded063509c7ba1d34f49bec8d68227.png)

在触发后则可以在流程中直接使用这些关联数据。
