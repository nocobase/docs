# 主、外部数据库对比

主数据库和外部数据库在 NocoBase 中的区别，主要体现在以下四个方面：数据库类型支持、数据表类型支持、字段类型支持和备份还原迁移。

## 一、数据库类型支持

更多详情请参考：[数据源管理](https://docs.nocobase.com/handbook/data-source-manager)

### 数据库类型

| 数据库类型 | 主数据库支持 | 外部数据库支持 |
|-----------|-------------|--------------|
| PostgreSQL | ✅ | ✅ |
| MySQL | ✅ | ✅ |
| MariaDB | ✅ | ✅ |
| KingbaseES | ✅ | ✅ |
| MSSQL | ❌ | ✅ |
| Oracle | ❌ | ✅ |

### 数据表管理

| 数据表管理 | 主数据库支持 | 外部数据库支持 |
|-----------|-------------|--------------|
| 基本管理 | ✅ | ✅ |
| 可视化管理 | ✅ | ❌ |

## 二、数据表类型支持

更多详情请参考：[数据表](https://docs.nocobase.com/handbook/data-modeling/collection)

| 数据表类型 | 主数据库 | 外部数据库 | 说明 |
|-----------|---------|-----------|------|
| 普通表 | ✅ | ✅ | 基本数据表 |
| 视图表 | ✅ | ✅ | 数据源视图 |
| 继承表 | ✅ | ❌ | 支持数据模型继承，仅主数据源支持 |
| 文件表 | ✅ | ❌ | 支持上传文件，仅主数据源支持 |
| 评论表 | ✅ | ❌ | 内置评论系统，仅主数据源支持 |
| 日历表 | ✅ | ❌ | 用于日历视图的数据表 |
| 表达式表 | ✅ | ❌ | 支持公式计算 |
| 树表 | ✅ | ❌ | 用于树形结构数据建模 |
| SQL 表 | ✅ | ❌ | 可通过 SQL 定义的数据表 |
| 连接外部数据表 | ✅ | ❌ | 外部数据源的连接表，功能有限 |

## 三、字段类型支持

更多详情请参考：[数据表字段](https://docs.nocobase.com/handbook/data-modeling/collection-fields)

### 基本类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 单行文本 | ✅ | ✅ |
| 多行文本 | ✅ | ✅ |
| 手机号码 | ✅ | ✅ |
| 电子邮箱 | ✅ | ✅ |
| URL | ✅ | ✅ |
| 整数 | ✅ | ✅ |
| 数字 | ✅ | ✅ |
| 百分比 | ✅ | ✅ |
| 密码 | ✅ | ✅ |
| 颜色 | ✅ | ✅ |
| 图标 | ✅ | ✅ |

### 选择类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 勾选 | ✅ | ✅ |
| 下拉菜单（单选） | ✅ | ✅ |
| 下拉菜单（多选） | ✅ | ✅ |
| 单选框 | ✅ | ✅ |
| 复选框 | ✅ | ✅ |
| 中国行政区 | ✅ | ❌ |

### 多媒体类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 多媒体 | ✅ | ✅ |
| Markdown | ✅ | ✅ |
| Markdown（Vditor） | ✅ | ✅ |
| 富文本 | ✅ | ✅ |
| 附件（关系） | ✅ | ❌ |
| 附件（URL） | ✅ | ✅ |

### 日期时间类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 日期时间（含时区） | ✅ | ✅ |
| 日期时间（不含时区） | ✅ | ✅ |
| Unix 时间戳 | ✅ | ✅ |
| 日期（不含时间） | ✅ | ✅ |
| 时间 | ✅ | ✅ |

### 几何图形类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 点 | ✅ | ✅ |
| 线 | ✅ | ✅ |
| 圆 | ✅ | ✅ |
| 多边形 | ✅ | ✅ |

### 高级类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| UUID | ✅ | ✅ |
| Nano ID | ✅ | ✅ |
| 排序 | ✅ | ✅ |
| 计算公式 | ✅ | ✅ |
| 自动编码 | ✅ | ✅ |
| JSON | ✅ | ✅ |
| 数据表选择器 | ✅ | ❌ |
| 加密 | ✅ | ✅ |

### 系统信息字段

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 创建日期 | ✅ | ✅ |
| 最后修改日期 | ✅ | ✅ |
| 创建人 | ✅ | ❌ |
| 最后修改人 | ✅ | ❌ |
| Table OID | ✅ | ❌ |

### 关系类型

| 字段类型 | 主数据库 | 外部数据库 |
|---------|---------|-----------|
| 一对一 | ✅ | ✅ |
| 一对多 | ✅ | ✅ |
| 多对一 | ✅ | ✅ |
| 多对多 | ✅ | ✅ |
| 多对多（数组） | ✅ | ✅ |

:::info
附件字段依赖文件表，而文件表仅主数据库支持，因此外部数据库暂不支持附件字段。
:::

## 四、备份与迁移支持对比

| 功能 | 主数据库 | 外部数据库 |
|-----|---------|-----------|
| 备份还原 | ✅ | ❌（需自行处理） |
| 迁移管理 | ✅ | ❌（需自行处理） |

:::info
NocoBase 提供主数据库的备份、还原及结构迁移能力。对于外部数据库，这些操作需由用户根据自身数据库环境独立完成，NocoBase 不提供内建支持。
:::

## 总结对比

| 对比项 | 主数据库 | 外部数据库 |
|-------|---------|-----------|
| 数据库类型 | PostgreSQL、MySQL、MariaDB、KingbaseES | PostgreSQL、MySQL、MariaDB、MSSQL、Oracle、KingbaseES |
| 表类型支持 | 全部表类型 | 仅支持普通表和视图表 |
| 字段类型支持 | 全部字段类型 | 除了附件字段以外的其他字段类型 |
| 备份与迁移 | 内建支持 | 需自行处理 |

## 建议

- **如果是使用 NocoBase 搭建全新的业务系统**，请使用 **主数据库**，这将可以使用 NocoBase 完整的功能。
- **如果是使用 NocoBase 来接入其他系统的数据库实现基础的数据增删改查**，则使用 **外部数据库**。