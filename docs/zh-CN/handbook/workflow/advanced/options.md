# 高级配置

## 执行模式

工作流基于创建时所选择的触发类型，会以“异步”或“同步”的方式执行。异步模式代表在特定事件触发后会进入工作流的队列，被后台调度逐个执行，而同步模式在触发后不会进入调度队列，而是直接开始执行，并且会在执行完后立即反馈。

数据表事件、操作后事件、自定义操作事件、定时任务事件和审批事件将默认以异步的方式执行，操作前事件则默认以同步的方式执行。其中数据表事件和表单事件两种模式都支持，在创建工作流时可以进行选择：

![同步模式_创建同步工作流](https://static-docs.nocobase.com/39bc0821f50c1bde4729c531c6236795.png)

:::info{title=提示}
同步模式的工作流受限于其模式，内部不能使用会产生“等待”状态的节点，例如“人工处理”等。
:::

## 自动删除历史记录

当工作流的触发较为频繁时，可以通过配置自动删除历史记录来减少干扰，同时也将降低数据库的存储压力。

同样在工作流的新建和编辑弹窗中可以配置对应流程是否自动删除历史记录：

![自动删除历史记录配置](https://static-docs.nocobase.com/b2e4c08e7a01e213069912fe04baa7bd.png)

自动删除可以根据执行结果的状态来进行配置，大部分情况下，建议仅勾选“完成”状态，这样可以保留执行失败的记录，以便后续排查问题。

建议在调试工作流时不要开启自动删除历史记录，以便通过历史记录来检查工作流的执行逻辑是否符合预期。

:::info{title=提示}
删除工作流的历史并不会减少工作流已执行过的计数。
:::
