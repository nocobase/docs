# 区块模板

<PluginInfo name="block-template"></PluginInfo>
<style>
.markdown h5 {
    font-size: 15px;
}
</style>

## 介绍

区块模板用于为区块提供模板能力, 可用于模板的集中管理及通过模板创建区块。通过模板创建的区块, 与模板是继承关系, 可以在模板基础上增加自己的配置。

## 安装

内置插件, 无需安装。

## 使用说明

![主界面](https://static-docs.nocobase.com/main-screen-block-template.png)

### 模板管理

#### 创建模板

区块模板提供两种创建方式，您可以根据实际场景选择最适合的方法：

##### 1. 在模板管理界面创建

**适用场景**：
- 需要从零开始规划新模板

**操作步骤**：
1. 进入区块模板管理界面
2. 点击"新增"按钮
3. 输入模板基本信息
4. 配置模板内容
5. 点击"提交"完成创建

![创建模板](https://static-docs.nocobase.com/create-template.png)

##### 2. 从现有区块创建模板

**适用场景**：
- 已在页面中配置好了理想的区块
- 需要将现有区块的配置复用到其他地方
- 希望快速创建模板而无需重新配置

**操作步骤**：
1. 在页面中找到需要保存为模板的数据区块
2. 选择"保存为模板"选项
3. 输入模板名称并保存

![保存为模板](https://static-docs.nocobase.com/save-as-block-template.png)

:::info{title=注意}
- 仅支持页面中的数据区块保存为模板
- 不支持将弹窗中区块直接保存为模板
- 图表区块暂不支持配置为模板
:::

#### 配置模板

选择模板, 点击 "配置" 按钮, 即可进入模板配置界面, 配置模板数据区块。

![配置模板](https://static-docs.nocobase.com/configure-template.png)

:::info{title=注意}
- 目前模板仅支持添加一个数据区块, 未配置数据区块时, 将无法使用该模板创建区块。
- 图表区块暂不支持配置为模板。
:::

#### 编辑模板

选择模板, 点击 "编辑" 按钮, 即可进入模板编辑界面修改模板标题、描述。

![编辑模板](https://static-docs.nocobase.com/edit-template.png)

#### 复制模板

选择模板, 点击 "复制" 按钮, 输入新模板标题, 点击 "提交" 按钮, 即可复制模板。
模板复制后可以进行编辑以适应新的需求场景。

![复制模板](https://static-docs.nocobase.com/copy-template.png)

#### 删除模板

选择模板, 点击 "删除" 按钮, 点击 "提交" 按钮, 即可删除模板。

![删除模板](https://static-docs.nocobase.com/delete-template.png)

删除可以选择是否"保留已创建的区块":
- 若选择保留, 则模板被删除后, 已创建的区块会被转换成普通的页面区块。
- 若选择不保留, 则模板被删除后, 已创建的区块也会被删除。

### 模板使用

#### 创建区块

在页面中创建区块时, 选择对应区块的模板, 即可使用模板创建区块。

![创建区块](https://static-docs.nocobase.com/create-block.png)

从模板创建的区块与普通区块有以下几点不同:
1. 该区块与模板是继承关系, 可以在模板基础上增加自己的配置, 未修改的配置会与模板保持同步。
2. 继承自模板的 UI 组件无法从页面中删除。
![无法删除](https://static-docs.nocobase.com/disable-delete.png)

3. 区块新增的字段、操作会以不同的背景色展示, 以便区分。
![区块样式](https://static-docs.nocobase.com/template-bg.png)

4. 区块及继承自模板的 UI 组件均会多一个 "恢复到模板" 的配置项, 用于恢复到模板完全一致的状态。
![恢复到模板](https://static-docs.nocobase.com/revert-to-template.gif)

:::info{title=注意}
区块内部的 UI 组件的位置以页面为准, 创建后不能自动同步模板中的位置, 若需要同步模板中的位置, 只能将整个区块恢复到模板。
:::

#### 转换为普通区块

当需要将模板区块与原模板脱离继承关系时, 可以通过 "转换为普通区块" 功能将模板区块转换为普通区块。

![convert-to-normal-block](https://static-docs.nocobase.com/convert-to-normal-block.png)

## 常见问题

**Q: 如何创建编辑表单模板？**

A: 编辑表单模板与新增表单模板的配置是相同的，可以通过配置新增表单区块来创建表单模板，表单模板创建后会自动出现在编辑表单的模板选项中。

**Q: 模板中的字段位置为什么没有同步到使用该模板的区块？**

A: 区块内部的 UI 组件位置以页面为准，不会自动同步模板中的位置变化。如需同步，需要使用"恢复到模板"功能，注意恢复到模板后，会丢失当前区块的自定义配置。

**Q: 如何处理不再需要的模板？**

A: 建议删除，删除模板时，可选择是否保留已创建的区块。如果选择保留，已创建的区块会转换为普通区块，此时并不会影响已有业务。如果选择不保留，通过该模板创建的区块也会被删除。

**Q: 模板为何不能配置图表区块？**

A: 后续版本会支持图表区块的模板配置。

**Q: 弹窗中的区块为何没有保存为模板菜单？**

A: 当前模板是基于页面中的区块创建的，页面中的区块上下文相对独立。弹窗中的区块上下文会依赖非当前弹窗的区块，暂时不支持保存弹窗中的区块为模板。

**Q: 已废弃的模板如何转换成新的区块模板？**

A: 可以通过以复制模板的方式使用旧模板创建新的页面区块，然后使用新的页面区块保存为模板。![20250408092704_rec_](https://static-docs.nocobase.com/20250408092704_rec_.gif)
