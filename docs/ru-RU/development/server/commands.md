# Команды

В плагине пользовательские команды должны быть расположены в каталоге `src/server/commands/*.ts` плагина. Содержимое должно выглядеть следующим образом:

```ts
import { Application } from '@nocobase/server';

export default function(app: Application) {
  app
    .command('echo')
    .option('-v, --version')
    .action(async ([options]) => {
      console.log('Hello World!');
      if (options.version) {
        console.log('Current version:', await app.version.get());
      }
    });
}
```

:::предупреждение
Пользовательские команды в плагине вступают в силу только после установки и активации плагина.
:::

Специальные настройки для команд:

- `ipc()` Когда приложение запущено, командная строка отправляет инструкции через ipc для работы с запущенным экземпляром приложения. Без настройки "ipc()" для выполнения команды будет создан новый экземпляр приложения (это не повлияет на работу запущенного экземпляра приложения).
- `auth()` Выполняет проверку базы данных. Если конфигурация базы данных неверна, команда выполнена не будет.
- `preload()` Определяет, следует ли предварительно загружать конфигурацию приложения, т.е. выполнять `app.load()`.

Эти конфигурации могут быть скорректированы в соответствии с фактическим использованием команды, как показано в примерах ниже:

```ts
app.command('a').ipc().action()
app.command('a').auth().action()
app.command('a').preload().action()
```
