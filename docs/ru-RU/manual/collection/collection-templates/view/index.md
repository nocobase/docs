# Представления базы данных

![Представления базы данных](https://static-docs.nocobase.com/3e33ae5e23399105ab83c7d5ecb32a26.png)

## Основные понятия

Представление базы данных — это виртуальная таблица, которая формируется на основе результатов запросов к одной или нескольким таблицам базы данных. Она имеет структуру, схожую с таблицей, но не хранит данные физически. Представления позволяют пользователям получать доступ к данным и управлять ими более простым и абстрактным способом.

Подключение представлений базы данных к коллекциям (Collection) в NocoBase — это эффективный способ создания таблиц. Создание представлений в базе данных позволяет использовать их в управлении коллекциями, отображая как таблицы данных, что особенно полезно для статистических сценариев. Этот подход повышает удобство поддержки таблиц данных и обеспечивает гибкость в различных сценариях применения.

Пример сценария статистики для системы управления заказами:

Таблица заказов связана с таблицей клиентов. Необходимо подсчитать сумму продаж и общее количество продаж для каждого клиента, отображая поля: имя клиента, номер телефона клиента, сумма продаж, общее количество продаж.

Создание представления в базе данных:

```go
SELECT t2.customer_name,
    t2.mobile_number,
    sum(t1.amount) AS sum_amount,
    sum(t1.quantity) AS sum_quantity
   FROM Orders t1
     JOIN Customers t2 ON t1.f_6ln1f7tqn9b = t2.id
  GROUP BY t2.customer_name, t2.mobile_number;
```

Представление в базе данных:

![Представление в базе данных](https://static-docs.nocobase.com/a5eaaadd358f41b33e036198cf0600ce.png)

## Создание таблицы данных на основе представления

В NocoBase представление можно отобразить в виде таблицы данных (Collection).

Выбор целевого представления:

![Выбор представления](https://static-docs.nocobase.com/cf950e4d2851bdde475838a2f040a79e.png)

- Поддерживается настройка имен столбцов (полей) представления.
- Исходные поля: мета-поля исходной таблицы. Если поле (например, агрегированное) не имеет источника, можно указать интерфейс поля.
- Поддержка операций добавления, удаления и изменения данных представления (по умолчанию отключена).

![Настройка полей представления](https://static-docs.nocobase.com/0d99fc9047f25119dbce0c396a866cf7.png)

Полный процесс настройки показан на изображении:

![Процесс настройки](https://static-docs.nocobase.com/bd0f54c899b4d8740779dd0cb8f1d65f.gif)

- Функция «Sync from database» позволяет обновлять конфигурацию таблицы представления (если представление в базе данных изменено, можно повторно синхронизировать данные).
- Удаление: удаление здесь затрагивает только поля таблицы представления, а не поля исходной таблицы.

![Синхронизация и удаление](https://static-docs.nocobase.com/39e906c75a7f7a3d1c38d8fa0be7d068.png)

Поддержка операций добавления, удаления и изменения данных таблицы представления (по умолчанию отключена). Если включена, соответствующий блок поддерживает операции добавления, удаления и т.д.

![Настройка операций](https://static-docs.nocobase.com/064ce37acb2f1f61cfe91a5892b34bdb.png)

## Использование таблицы представления в интерфейсе

- Как источник данных для блоков

Таблицы, созданные на основе представлений, могут быть выбраны в качестве источника данных в любых блоках, так же как и таблицы, созданные любым другим способом.

![Использование в интерфейсе](https://static-docs.nocobase.com/1208a826507e9dd210ba63f9bfeaa90d.gif)
