# Блок фильтров

Блок фильтров в блоке диаграмм используется для динамической фильтрации нескольких диаграмм в текущем блоке диаграмм.

## Включение/отключение

Чтобы включить или отключить блок фильтров, в блоке диаграмм нажмите «Добавить блок» (Add block) — «Фильтр» (Filter).

![Включение блока фильтров](https://static-docs.nocobase.com/d0e6b116952fa6b719acb0f858b432c3.png)

## Настройка полей фильтрации

### Поля таблицы данных

Для таблиц данных, используемых в диаграммах текущего блока, можно выбрать соответствующие поля таблицы, чтобы создать поле формы фильтра.

![Выбор полей таблицы](https://static-docs.nocobase.com/e2ef150e9beb8c78004d9049a7536219.png)

Можно настроить поля формы:

![Настройка полей формы](https://static-docs.nocobase.com/215f0b996e69bf2d5b99746e6d521c3d.png)

- Настройка заголовка отображаемого поля
- Настройка описания поля
- Настройка оператора, применяемого при фильтрации  
  ![Операторы фильтрации](https://static-docs.nocobase.com/d6a593a330d27da4ea78124dfdb8450d.png)

- Настройка значения по умолчанию для поля, с возможностью использования переменных. Тип данных переменной должен соответствовать типу данных текущего поля.  
  ![Значения по умолчанию](https://static-docs.nocobase.com/37dee4008f3283db24d491fb8f0404fa.png)

  Например:

  - Установить значение по умолчанию как ID текущего пользователя, чтобы после загрузки страницы автоматически отфильтровать данные текущего пользователя.
  - Установить значение по умолчанию как текущую дату, чтобы после загрузки страницы автоматически отфильтровать данные по текущей дате.

### Пользовательские поля

В некоторых случаях может потребоваться использовать одно поле фильтра для фильтрации разных полей из разных таблиц. Например, использовать одно поле даты для фильтрации разных полей даты в разных таблицах. В таких случаях можно создать пользовательское поле.

![Создание пользовательского поля](https://static-docs.nocobase.com/87544594246453d175ef265030c0801a.png)

При добавлении пользовательского поля необходимо задать заголовок поля, выбрать компонент поля и выполнить соответствующую настройку. Также можно выбрать поле из таблиц данных, используемых в текущем блоке, чтобы применить его метаданные и избежать повторной настройки.

![Настройка пользовательского поля](https://static-docs.nocobase.com/ef09136d674d4b7356e819350bcac804.png)

Чтобы использовать пользовательское поле фильтра, откройте настройки соответствующей диаграммы, затем в конфигурации фильтрации данных добавьте условие фильтра и используйте переменную из «Текущего фильтра» (Current filter). Тип фильтруемого поля должен соответствовать типу пользовательского поля формы фильтра.

![Использование текущего фильтра](https://static-docs.nocobase.com/f9f2487c4da4b2024af1556743beab6c.png)

Для пользовательских полей также можно настроить заголовок, описание и значение по умолчанию.

![Настройка пользовательских полей](https://static-docs.nocobase.com/4a8feb12404f5cc5e74d589263307e5a.png)

## Настройка действий блока

- Фильтровать (Filter) — применить условия фильтрации
- Сбросить (Reset) — сбросить форму фильтра
- Свернуть/развернуть (Collapse / Expand) — свернуть в одну строку или развернуть на несколько строк

![Действия блока](https://static-docs.nocobase.com/8619ac90fa045b3a9c6d6610f7be1a81.png)
