# Версия 1.0.0 - альфа 
# 15:2024.05.19

## Новые возможности

### Исправлены столбцы таблицы

См. [Исправлены столбцы таблицы](https://docs-cn.nocobase.com/handbook/ui/fields/generic/table-column#%E5%9B%BA%E5%AE%9A%E5%88%97)

<img src="https://static-docs.nocobase.com/202405191512587.png"/>

### Поддержка добавления блоков Ганта, Канбана в модулях / выдвижных ящиках

См. [Adding Blocks in Modals](https://docs-cn.nocobase.com/handbook/ui/pop-up)

<img src="https://static-docs.nocobase.com/202405191512280.png"/>

### Поддержка добавления правил привязки в подробные блоки

Правила привязки в подробных блоках теперь поддерживают динамическую настройку отображения/скрытия полей. См. [Правила привязки в подробных блоках](https://docs-cn.nocobase.com/handbook/ui/blocks/data-blocks/details#%E8%81%94%E5%8A%A8%E8%A7%84%E5%88%99)

<img src="https://static-docs.nocobase.com/202405191513781.png"/>

### Авторизация: LDAP

Добавлен плагин "Auth: LDAP" (компьютерный плагин), который позволяет пользователю войти в NocoBase, используя учетную запись сервера LDAP. Обратитесь к [Руководителю пользователя](https://docs-cn.nocobase.com/handbook/auth-ldap)

<img src="https://static-docs.nocobase.com/202405191513995.png"/>

### Узел HTTP-запроса рабочего процесса

#### Поддержка формата данных `application/www-x-form-urlencoded`

Ранее request node поддерживал только формат JSON (`application/json`) для основной части Content-Type. После обновления он также поддерживает настройку данных формата формы в парах ключ-значение.

<img src="https://static-docs.nocobase.com/202405191514472.png"/>

#### Поддержка шаблонов строк для полей ввода значений

Ранее поля ввода значений в разделах `Заголовки` и `Параметры` узла запроса поддерживали только чистый ввод или выбор переменных. После обновления вы можете напрямую вводить строку со встроенными переменными. Оно будет автоматически проанализировано как конечное строковое значение перед отправкой запроса.

<img src="https://static-docs.nocobase.com/202405191514748.png"/>

### Событие пользовательского действия рабочего процесса

Кнопка действия `Отправить в рабочий процесс`, изначально привязанная к типу прямого запуска `Событий после выполнения действия`, была разделена и независимо создана как кнопка действия `Запустить рабочий процесс` для `Пользовательских событий действия` (коммерческий плагин). Ранее добавленные кнопки действий в версии с открытым исходным кодом по-прежнему можно использовать, но они больше не поддерживаются для новых дополнений. Пожалуйста, используйте вместо них новое `Пользовательское событие действия`. Дополнительную информацию смотрите в [Руководстве по использованию](https://docs-cn.nocobase.com/handbook/workflow-custom-action-trigger).

<img src="https://static-docs.nocobase.com/202405191515770.png"/>

## Улучшения

### Корректировки настроек действий

#### Корректировки пользовательского интерфейса

1. Сглажена иерархия меню и удалены некоторые операции переключения, поддерживающие повторные добавления.

До:

<img src="https://static-docs.nocobase.com/202405191516585.png"/>

После:

<img src="https://static-docs.nocobase.com/202405191516026.png"/>

2. Объединены аналогичные действия

2.1. Объединены опции `Добавить новое` и `Добавить запись`

До:

<img src="https://static-docs.nocobase.com/202405191516874.png"/>

После:

<img src="https://static-docs.nocobase.com/202405191516737.png"/>

2.2 Объединены опции `Отправить` и `Сохранить запись`.

До:

<img src="https://static-docs.nocobase.com/202405191517966.png"/>

После:

<img src="https://static-docs.nocobase.com/202405191517078.png"/>

#### Влияние на разработчиков

Смотрите PR:<a href="https://github.com/nocobase/nocobase/pull/4336" target="_blank">рефакторинг: сглаживание и объединение действий #4336</a>

### Журналы

#### Список файлов плагина журнала

До: В среде с несколькими приложениями подключаемый модуль log отображает списки файлов журнала всех приложений.

После: В среде с несколькими приложениями подключаемый модуль log отображает только список файлов журнала текущего приложения.

#### Пути к папкам рабочего процесса и пользовательских запросов

До: Путь к папке для файлов журнала рабочего процесса и пользовательских запросов находится на том же уровне, что и папка журнала приложения.

После: Путь к папке для файлов журнала рабочего процесса и пользовательских запросов относится к соответствующей папке журнала приложения.

### Рабочий процесс

#### Данные о результатах узла HTTP-запроса

Ранее структура данных результата после успешного или неудачного HTTP-запроса узла была несогласованной.

```js
// Only the response data part is returned when successful
{
  // Any JSON content
}

// The failure returns the result of Axios's error.toJSON() function.
{
  config: {},
  headers: {},
  status: 500,
  statusText: 'xxx',
}
```

Теперь ответ как на успешный, так и на неудачный результат будет последовательно сохранен в node result.

```js
// Success
{
  config: {},
  headers: {},
  status: 200,
  statusText: 'ok',
  data: {}
}

// Fail
{
  config: {},
  headers: {},
  status: 500,
  statusText: 'xxx',
  data: {}
}
```

Другие исключения, такие как отсутствие ответа от сервера (`статус` равен `null`) или неудачная инициализация, могут быть обнаружены в журналах обработки ошибок сервера. Смотрите более подробную информацию в <a href="https://github.com/nocobase/nocobase/issues/4373" target="_blank">[Рабочий процесс: узел HTTP-запроса] Тип результата узла не исправлен #4373</a>

## Исправлена ошибка

- Поля даты в графиках не были преобразованы в соответствии с часовым поясом клиента при объединении данных с измерением поля даты. <a href="https://github.com/nocobase/nocobase/pull/4366" target="_blank">исправление(data-vi): при форматировании даты #4366 следует использовать местный часовой пояс</a>

- Плохое обновление представления; для обновления необходимо выйти из представлений базы данных и повторно войти в них. <a href="https://github.com/nocobase/nocobase/pull/4224" target="_blank">исправлено: поля коллекции должны обновляться после редактирования синхронизации из базы данных #4224</a>

- Блоки древовидной таблицы не сворачивали все узлы при добавлении дочернего узла. <a href="https://github.com/nocobase/nocobase/pull/4289" target="_blank">исправлено: не сворачивать все узлы при добавлении дочернего узла в блок древовидной таблицы #4289</a>

- Неверная настройка поля "Название коллекции". <a href="https://github.com/nocobase/nocobase/pull/4358" target="_blank">исправление: неверная настройка поля "название коллекции" #4358</a>

- поле bigint потеряло точность в режиме read pretty. <a href="https://github.com/nocobase/nocobase/pull/4360" target="_blank">исправлено: поле bigint потеряло точность в режиме read pretty #4360</a>

- Файлы журнала оставались открытыми после остановки вспомогательных приложений. <a href="https://github.com/nocobase/nocobase/pull/4380" target="_blank">исправлено (логгер): должен закрывать поток журналов после удаления приложения #4380</a>

- Ошибка выбора поля ассоциации агрегатных узлов рабочего процесса. <a href="https://github.com/nocobase/nocobase/pull/4315" target="_blank">исправление(plugin-workflow-aggregate): исправлена связь в поле выбора #4315</a>

- Параметр игнорировать ошибку был недопустим в режиме синхронизации узла HTTP-запроса. <a href="https://github.com/nocobase/nocobase/pull/4334" target="_blank">исправление (плагин-рабочий процесс-запрос): исправлена ошибка игнорирования в режиме синхронизации #4334</a>

- Поля ввода значений в узле HTTP-запроса workflow переполнены. <ahref="https://github.com/nocobase/nocobase/pull/4353" target="_blank">исправлено(плагин-workflow-запрос): исправлено переполнение полей значений #4354</a>

- Специальные символы вызывали зависание узла HTTP-запроса workflow. <ahref="https://github.com/nocobase/nocobase/pull/4376" target="_blank">исправление(plugin-workflow-request): исправлено зависание запроса при неверном значении заголовка #4376</a>

- Установка marginBlock в редакторе тем повлияла на интервал между полями формы. <a href="https://github.com/nocobase/nocobase/pull/4374" target="_blank">исправление (редактор тем): маркер не должен влиять на интервал между полями формы.marginBlock #4374</a>

- Исправлена ошибка, из-за которой нажатие на опцию "Лицензия" в правом верхнем углу страницы приводило к неправильному перенаправлению. [PR #4415](https://github.com/nocobase/nocobase/pull/4415)

- Исправлена ошибка, из-за которой оператор поля становился недействительным после сохранения формы фильтра в виде шаблона блока. [PR #4390](https://github.com/nocobase/nocobase/pull/4390)

## Документация

- Добавлен пример документации по плагину: https://docs-cn.nocobase.com/plugin-samples

- Обновлена структура документации для руководства по использованию рабочего процесса: https://docs-cn.nocobase.com/handbook/workflow
