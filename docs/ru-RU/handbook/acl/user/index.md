# Руководство

## **Центр управления**

##### **Управление ролями**

Приложение поставляется с двумя предустановленными ролями: **"Admin"** и **"Member"**, каждая из которых имеет уникальные настройки прав, соответствующие их функциям.

![](https://static-docs.nocobase.com/da7083c67d794e23dc6eb0f85b1de86c.png)

##### **Добавление, удаление и изменение ролей**

Каждая роль имеет уникальный системный идентификатор, который позволяет изменять предустановленные роли, однако сами предустановленные роли удалить нельзя.

![](https://static-docs.nocobase.com/35f323b346db4f9f12f9bee4dea63302.png)

##### **Назначение роли по умолчанию**

Роль по умолчанию — это роль, которая автоматически присваивается новым пользователям, если при их создании не указана конкретная роль.

![](https://static-docs.nocobase.com/f41bba7ff55ca28715c486dc45bc1708.png)

##### **Настройка прав**

###### **Общие настройки прав**

![](https://static-docs.nocobase.com/119a9650259f9be71210121d0d3a435d.png)

1. **Можно настраивать интерфейс**: Определяет, может ли пользователь настраивать интерфейс. При активации появляется кнопка конфигурации UI. По умолчанию включено для роли "admin".
2. **Можно устанавливать, активировать и отключать плагины**: Определяет, может ли пользователь включать или отключать плагины. При активации пользователь получает доступ к интерфейсу управления плагинами. По умолчанию включено для роли "admin".
3. **Можно настраивать плагины**: Разрешает настройку параметров плагинов или управление их внутренними данными. По умолчанию включено для роли "admin".
4. **Можно очищать кэш и перезапускать приложение**: Связано с задачами технического обслуживания, такими как очистка кэша и перезапуск приложения. После активации соответствующие кнопки отображаются в личном кабинете. По умолчанию отключено.
5. **Доступ к новым пунктам меню по умолчанию**: Новые элементы меню доступны по умолчанию. Эта настройка включена по умолчанию.

###### **Права на действия**

Права на действия применяются ко всем таблицам данных и разделяются по типам операций. Их можно настроить с учётом области данных: для всех данных или только для собственных. Первый вариант разрешает работу с любыми записями, второй — только с записями, связанными с пользователем.

##### **Права на операции с таблицами данных**

![](https://static-docs.nocobase.com/6a6e0281391cecdea5b5218e6173c5d7.png)

![](https://static-docs.nocobase.com/9814140434ff9e1bf028a6c282a5a165.png)

Права на действия с коллекциями позволяют точно настроить доступ к операциям, определяя доступ к данным в каждой таблице. Эти права включают:

1. **Права на действия**: Включают операции добавления, просмотра, редактирования, удаления, экспорта и импорта. Права настраиваются по области данных:
- **Все записи**: Пользователь может выполнять действия со всеми записями таблицы.
- **Собственные записи**: Пользователь может выполнять действия только со своими записями.

2. **Права на поля**: Позволяют настроить доступ к каждому полю для различных операций. Например, некоторые поля можно сделать доступными только для просмотра без возможности редактирования.

##### **Права на пункты меню**

Права на пункты меню определяют доступ на основе конкретных элементов интерфейса меню.

![](https://static-docs.nocobase.com/28eddfc843d27641162d9129e3b6e33f.png)

##### **Права на конфигурацию плагинов**

Права на конфигурацию плагинов определяют возможность настраивать параметры конкретных плагинов. При включении этих прав в центре управления появляется соответствующий интерфейс управления плагином.

![](https://static-docs.nocobase.com/5a742ae20a9de93dc2722468b9fd7475.png)

#### **Личный кабинет**

##### **Переключение ролей**

Пользователю может быть назначено несколько ролей, между которыми он может переключаться в личном кабинете. При входе по умолчанию используется последняя выбранная роль (это значение обновляется при каждом переключении), либо, если она не задана, первая в списке (роль по умолчанию системы).

![](https://static-docs.nocobase.com/e331d11ec1ca3b8b7e0472105b167819.png)

#### **Применение в интерфейсе**

##### **Права на блоки данных**

Видимость блоков данных в таблице управляется правами на просмотр. Индивидуальные настройки имеют приоритет над глобальными.

Например, в глобальных правах роли "admin" разрешён полный доступ, но в таблице заказов могут быть заданы индивидуальные права, из-за чего блок становится невидимым.

![](https://static-docs.nocobase.com/3d026311739c7cf5fdcd03f710d09bc4.png)

![](https://static-docs.nocobase.com/a88caba1cad47001c1610bf402a4a2c1.png)

###### **Права на поля**

- **Просмотр (View)**: Определяет, какие поля видимы на уровне поля, позволяя задавать, какие именно поля будут отображаться для определённых ролей в таблице заказов.

![](https://static-docs.nocobase.com/30dea84d984d95039e6f7b180955a6cf.png)

В интерфейсе только поля с явно заданными правами будут отображаться в блоке таблицы заказов. Системные поля (Id, CreatedAt, LastUpdatedAt) всегда отображаются, даже если для них не задана конфигурация.

![](https://static-docs.nocobase.com/40cc49b517efe701147fd2e799e79dcc.png)

- **Редактирование (Edit)**: Управляет тем, можно ли редактировать и сохранять (обновлять) поля.

  В интерфейсе в форме редактирования отображаются только поля, для которых разрешено редактирование.

![](https://static-docs.nocobase.com/6531ca4122f0887547b5719e2146ba93.png)

Аналогично, в форме добавления отображаются только поля с правами на добавление.

![](https://static-docs.nocobase.com/12982450c311ec1bf87eb9dc5fb04650.png)

![](https://static-docs.nocobase.com/1dbe559a9579c2e052e194e50edc74a7.gif)

- **Добавление (Add)**: Определяет, можно ли создавать (добавлять) поля.

![](https://static-docs.nocobase.com/3ab1bbe41e61915e920fd257f2e0da7e.png)

В интерфейсе в форме добавления отображаются только поля с правами на добавление.

![](https://static-docs.nocobase.com/8d0c07893b63771c428974f9e126bf35.png)

- **Экспорт (Export)**: Управляет возможностью экспорта полей.
- **Импорт (Import)**: Управляет возможностью импорта полей.

##### **Права на действия**

Индивидуальные настройки имеют наивысший приоритет. Если заданы конкретные права, они переопределяют глобальные. В противном случае применяются глобальные настройки.

- **Добавить (Add new)**: Управляет отображением кнопки добавления в блоке.

![](https://static-docs.nocobase.com/2e3123b5dbc72ae78942481360626629.png)

Если операция добавления разрешена, в блоке таблицы заказов появляется кнопка "Добавить".

![](https://static-docs.nocobase.com/f0458980d450544d94c73160d75ba96c.png)

- **Просмотр (View)**: Определяет, будет ли блок данных отображаться.

![](https://static-docs.nocobase.com/6e4a1e6ea92f50bf84959dedbf1d5683.png)

В интерфейсе блоки других таблиц остаются скрытыми, но блок таблицы заказов отображается, если заданы индивидуальные права.

![](https://static-docs.nocobase.com/f2dd142a40fe19fb657071fd901b2291.png)

![](https://static-docs.nocobase.com/b92f0edc51a27b52e85cdeb76271b936.gif)

- **Редактирование (Edit)**: Управляет отображением кнопки редактирования в блоке.

![](https://static-docs.nocobase.com/fb1c0290e2a833f1c2b415c761e54c45.gif)

Права на действия могут быть детализированы через настройку области данных (data scope).

![](https://static-docs.nocobase.com/b082308f62a3a9084cab78a370c14a9f.gif)

- **Удаление (Delete)**: Управляет отображением кнопки удаления в блоке.

![](https://static-docs.nocobase.com/021c9e79bcc1ad221b606a9555ff5644.gif)

- **Экспорт (Export)**: Управляет отображением кнопки экспорта в блоке.
- **Импорт (Import)**: Управляет отображением кнопки импорта в блоке.

#### Права на связи

##### Используется как поле

- Видимость поля-связи определяется правами, заданными для полей исходной таблицы. Эти права управляют отображением всего компонента поля связи в интерфейсе.

Например, в таблице "Заказы" поле связи "Клиент" ограничено правами только на просмотр и экспорт/импорт, как показано ниже:

![Пример прав на поле связи](https://static-docs.nocobase.com/d0dc797aae73feeabc436af285dd4f59.png)

В интерфейсе такое ограничение означает, что поле "Клиент" не будет отображаться в формах добавления и редактирования таблицы "Заказы".

Полный процесс настройки показан ниже:

![Example Configuration Process](https://static-docs.nocobase.com/372f8a4f414feea097c23b2ba326c0ef.gif)

- Права на поля внутри компонента связи (например, в подтаблицах или подформах) определяются правами целевой таблицы.

Если компонент связи реализован как подформа:

В этом случае, как показано, поле связи "Клиент" в таблице "Заказы" имеет полный доступ, а сама таблица "Клиенты" настроена только для чтения.

Права таблицы "Заказы" настроены следующим образом, предоставляя полю связи "Клиент" полный доступ:

![Права таблицы Заказы](https://static-docs.nocobase.com/3a3ab9722f14a7b3a35361219d67fa40.png)

Права таблицы "Клиенты" настроены на доступ только для просмотра:

![Права таблицы Клиенты](https://static-docs.nocobase.com/46704d179b931006a9a22852e6c5089e.png)

В пользовательском интерфейсе это приводит к тому, что поле связи "Клиент" отображается в разделе таблицы "Заказы". Однако при переключении интерфейса в режим подформы (где поля подформы отображаются в деталях, но скрыты при создании или редактировании), поведение изменяется соответствующим образом.

Полный процесс настройки показан ниже:

![Пример настройки](https://static-docs.nocobase.com/932dbf6ac46e36ee357ff3e8b9ea1423.gif)

Дополнительная настройка прав полей в подформе позволяет контролировать отдельные поля:

Например, как показано ниже, в таблице "Клиенты" можно настроить, чтобы поле "Имя клиента" было недоступным для просмотра и редактирования:

![Права на поле Клиенты](https://static-docs.nocobase.com/e7b875521cbc4e28640f027f36d0413c.png)

Процесс настройки отображён здесь:

![Процесс настройки](https://static-docs.nocobase.com/7a07e68c2fe2a13f0c2cef19be489264.gif)

Если используется подтаблица вместо подформы, принципы настройки остаются теми же:

Как показано, поле связи "Отгрузка" в таблице "Заказы" имеет полный доступ, в то время как сама коллекция отгрузок (shipment) доступна только для просмотра.

В интерфейсе это позволяет отобразить поле связи. Однако при переключении интерфейса в режим подтаблицы (где поля отображаются только при просмотре, но скрыты при создании и редактировании), поведение изменяется:

![Права поля Отгрузка](https://static-docs.nocobase.com/fd4b7d81cdd765db789d9c85cf9dc324.gif)

Точная настройка полей подколлекции также позволяет отдельно управлять отображением каждого поля:

![Права полей подтаблицы](https://static-docs.nocobase.com/51d70a624cb2b0366e421bcdc8abb7fd.gif)

##### Когда используется как блок

- Видимость блока связи управляется правами, установленными для целевой таблицы, связанной с полем связи, независимо от самих прав на поле связи.

Например, видимость блока связи "Клиент" определяется настройками прав таблицы "Клиенты":

![Видимость блока связи](https://static-docs.nocobase.com/633ebb301767430b740ecfce11df47b3.gif)

- Права на поля внутри блока связи управляются правами, установленными на поля целевой таблицы.

Как показано ниже, таблицу "Клиенты" можно настроить так, чтобы были доступны только определённые поля:

![Права на просмотр полей таблицы Клиенты](https://static-docs.nocobase.com/35af9426c20911323b17f67f81bac8fc.gif)

