# Ручной узел

## Создание узла

В интерфейсе конфигурации workflow нажмите кнопку "+" внутри процесса, чтобы добавить узел "Ручной":

![Создание ручного узла](https://static-docs.nocobase.com/4dd259f1aceeaf9b825abb4b257df909.png)

## Настройка узла

### Назначение ответственных

Ручной узел требует назначения пользователя, который будет отвечать за выполнение задачи. Вы можете добавить список задач при настройке блоков на странице. Также необходимо настроить содержимое всплывающего окна задачи для каждого узла.

Вы можете выбрать конкретного пользователя или использовать переменные для выбора первичного или внешнего ключа данных пользователя из контекста.

![Настройка ручного узла - выбор переменной назначения](https://static-docs.nocobase.com/22fbca3b8e21fda3a831019037001445.png)

:::info{title=Примечание}
В текущей версии ручной узел не поддерживает назначение нескольких пользователей, но эта функция планируется в будущих обновлениях.
:::

### Настройка пользовательского интерфейса

Настройка интерфейса списка задач является ключевой при конфигурации ручного узла. Нажав кнопку "Настроить", вы можете открыть отдельное всплывающее окно для конфигурации. Этот интерфейс работает как обычная страница и позволяет проектировать его с помощью WYSIWYG-редактора:

![Настройка ручного узла - конфигурация интерфейса](https://static-docs.nocobase.com/fd360168c879743cf22d57440cd2590f.png)

#### Вкладки

Вкладки можно использовать для разделения различных типов контента. Например, одна вкладка может отображать утвержденные формы, другая - отклоненные, или вы можете использовать их для показа связанных данных. Вкладки можно свободно настраивать под ваши нужды.

#### Блоки

Доступные блоки делятся на две основные категории: Блоки данных и Блоки форм. Также доступны Markdown-блоки для информационных сообщений и статического контента.

##### Блоки данных

Блоки данных позволяют отображать информацию из триггеров или результаты обработки узлов, предоставляя контекст для исполнителя задачи. Например, если workflow запускается событием формы, можно создать блок данных для отображения деталей:

![Настройка ручного узла - блок данных - триггер](https://static-docs.nocobase.com/675c3e58a1a4f45db310a72c2d0a404c.png)

Аналогично можно настроить блоки данных для отображения результатов вышестоящих узлов:

![Настройка ручного узла - блок данных - данные узла](https://static-docs.nocobase.com/a583e26e508e954b47e5ddff80d998c4.png)

:::info{title=Примечание}
Во время настройки интерфейса данные не отображаются - они появятся только после запуска workflow.
:::

##### Блоки форм

Блоки форм критически важны, так как определяют продолжение workflow. Доступны три типа форм:

- Пользовательская форма
- Форма создания записи
- Форма обновления записи

![Настройка ручного узла - типы блоков форм](https://static-docs.nocobase.com/2d068f3012ab07e32a265405492104a8.png)

Для форм создания/обновления нужно выбрать таблицу данных. Пользовательская форма создает временную форму без привязки к данным.

Кнопки отправки формы можно настроить с тремя вариантами действий:

- Продолжить процесс
- Завершить процесс
- Сохранить временно

![Настройка ручного узла - типы кнопок формы](https://static-docs.nocobase.com/6b45995b14152e85a821dff6f6e3189a.png)

Эти кнопки соответствуют состояниям узла: "Завершено", "Отклонено" или "Ожидание". Хотя бы одна из первых двух кнопок должна быть настроена.

Для кнопки "Продолжить процесс" можно задать значения полей формы:

![Настройка ручного узла - установка значений формы](https://static-docs.nocobase.com/2cec2d4e2957f068877e616dec3b56dd.png)

![Настройка ручного узла - всплывающее окно значений](https://static-docs.nocobase.com/5ff51b60c76cdb76e6f1cc95dc3d8640.png)

Это особенно полезно для проверки данных. Можно настроить несколько кнопок продолжения с разными значениями полей, что позволит workflow развиваться по разным сценариям.
