# Обзор

<PluginInfo name="workflow-action-trigger" link="/handbook/workflow-action-trigger"></PluginInfo>

В системе все изменения данных, инициированные пользователями, обычно выполняются через различные операции, чаще всего - нажатие кнопок. Это может быть кнопка отправки формы или действие в блоке данных. События после действия (Post-action) позволяют привязать конкретные workflow к этим кнопкам, гарантируя запуск процесса после успешного действия пользователя.

Например, при добавлении или обновлении данных можно настроить опцию "Привязать workflow" для кнопки. После успешного выполнения действия привязанный workflow запустится автоматически.

С технической стороны, поскольку обработка Post-action событий происходит на уровне middleware (с использованием Koa middleware), даже HTTP API вызовы к NocoBase могут запускать определенные Post-action события.

:::info{title="Примечание"}
Изначально Post-action события назывались "События формы". В ранних версиях эта функция работала только с кнопками форм. Начиная с версии `v0.20`, она стала доступна и для кнопок действий в блоках данных, что привело к переименованию в "События после действия".
:::

## Частые вопросы

### Разница между Post-action и Pre-action событиями

Ключевое отличие между этими типами событий - момент их срабатывания в цикле запроса-ответа операции:

![Последовательность операций](https://static-docs.nocobase.com/Handbook/20240916013804.png)

Pre-action события срабатывают до выполнения операции (до обработки запроса). Они могут использоваться для валидации или модификации данных запроса. Если запрос блокируется, операция не выполняется.

Post-action события срабатывают после успешного завершения действия пользователя. На этом этапе данные уже успешно сохранены, и можно запускать процессы на основе результата.

### Разница между Post-action и событиями таблиц

Хотя оба типа событий срабатывают после изменений данных, их реализации различаются:

- Post-action события работают на уровне API
- События таблиц реагируют на изменения данных в таблицах

События таблиц ближе к ядру системы. Одно событие может вызвать цепную реакцию изменений в связанных таблицах. Они не содержат информации о пользователе.

Post-action события теснее связаны с пользовательским интерфейсом, отражая результаты действий пользователей. Контекст этих процессов включает пользовательскую информацию, что делает их идеальными для workflow, инициированных пользователями. В будущих версиях NocoBase планируется расширение Post-action событий.

Еще одно важное отличие: Post-action события можно выборочно привязывать к конкретным формам, тогда как события таблиц работают для всех изменений данных в таблице.

## Установка

Это встроенный плагин, не требующий установки.

## Руководство пользователя

Использование Post-action событий включает несколько аспектов:

- [Настройка триггера](./trigger.md)
- [Настройка действий](./action.md)

Примеры практического применения можно найти в разделе [Примеры](./example.md).

Для интеграции с внешними системами см. [Внешние вызовы](./http-api.md).
