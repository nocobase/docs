# Пример

**Результат:** Окончательный отредактированный перевод

---

Рассмотрим пошаговый процесс добавления новой операции.

Представим сценарий, связанный с «Заявками на расходы». После того как сотрудник подаёт заявку на возмещение расходов, система должна автоматически проверить сумму, а при необходимости — запустить ручное согласование для сумм, превышающих установленный лимит. Только заявки, прошедшие эту проверку, будут одобрены и переданы в финансовый отдел для дальнейшей обработки.

Для начала создадим коллекцию «Расходы» со следующими полями:

- **Название проекта:** Текст (однострочный)
- **Заявитель:** Связь «Многие к одному» (Пользователь)
- **Сумма:** Числовое значение
- **Статус:** Выбор из списка (варианты: «Согласовано», «Обработано»)

Далее создадим рабочий процесс, отнесённый к категории **«Событие после действия»**, и настроим модель таблицы данных триггера на коллекцию «Расходы»:

![Пример — Настройка триггера — Выбор таблицы данных](https://static-docs.nocobase.com/6e1abb5c3e1198038676115943714f07.png)

После включения рабочего процесса можно приступить к настройке конкретных узлов обработки.

Затем на пользовательском интерфейсе создадим блок таблицы для таблицы данных «Расходы» и добавим кнопку «Добавить» в панель инструментов, убедившись, что соответствующие поля формы настроены корректно. В настройках кнопки «Отправить» формы откройте диалоговое окно **«Привязать рабочий процесс»**, выберите данные всей формы в качестве контекста и свяжите их с ранее созданным рабочим процессом:

![Пример — Настройка кнопки формы — Привязка рабочего процесса](https://static-docs.nocobase.com/fc00bdcdb975bb8850e5cab235f854f3.png)

После завершения настройки формы вернёмся к рабочему процессу, чтобы организовать логику обработки. Например, если сумма возмещения превышает 500, потребуется ручная проверка администратором; в противном случае заявка будет автоматически одобрена. После одобрения создаётся запись о расходах и передаётся в финансовый отдел для дальнейшей обработки (подробности опущены).

![Пример — Поток процесса](https://static-docs.nocobase.com/059e8e3d5ffb34cc2da6880fa3dc490b.png)

Если отвлечься от последующей финансовой обработки, настройка процесса подачи заявок на расходы завершена. Когда сотрудник заполняет и отправляет заявку, система запускает соответствующий рабочий процесс. Если сумма меньше 500, запись создаётся автоматически и ожидает дальнейших действий со стороны финансового отдела. Если сумма превышает этот порог, заявка проходит проверку руководителем. После одобрения запись создаётся и передаётся в финотдел для обработки.

Этот пример рабочего процесса может также применяться к стандартной кнопке **«Отправить»**, в зависимости от того, требуется ли в бизнес-сценарии создание записи до перехода к последующим шагам.
