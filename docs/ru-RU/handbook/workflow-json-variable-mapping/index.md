# JSON Variable Mapping

> v1.6.0

This node is used to map complex JSON structures from upstream node results into variables for use in subsequent nodes. For example, after mapping the results from SQL operations or HTTP request nodes, you can access their properties in later nodes.

:::info{title=Tip}
Unlike the JSON Calculation node, the JSON Variable Mapping node does not support custom expressions or rely on a third-party engine. It is solely used to map property values from a JSON structure, making it simpler to use.
:::

## Usage Guide

### Create a Node

In the workflow configuration interface, click the plus (“+”) button within the process to add a **JSON variable mapping** node:

![Create Node](https://static-docs.nocobase.com/20250113173635.png)

### Node Configuration

#### Data Source

The data source can be the result from an upstream node or a data object from the workflow context. It is typically an unstructured data object, such as the result from a SQL node or an HTTP request node.

![Data Source](https://static-docs.nocobase.com/20250113173720.png)

#### Input Sample Data

Paste a sample data snippet and click the parse button to automatically generate a list of variables:

![Input Sample Data](https://static-docs.nocobase.com/20250113182327.png)

If there are variables in the auto-generated list that you do not need, you can click the delete button to remove them.

:::info{title=Tip}
The sample data is not the final execution result; it is only used to help generate the variable list.
:::

#### Include Array Index in Paths

If this option is not checked, array contents will be mapped according to NocoBase Workflow’s default variable handling method (refer to: [Variables](/handbook/workflow/advanced/variables#数据结构)). For example, given the following sample data:

```json
{
  "a": 1,
  "b": [
    {
      "c": 2
    },
    {
      "c": 3
    }
  ]
}
```

The generated variable `b.c` will represent the array `[2, 3]`.

If you check this option, array indexes will be included in the variable paths (e.g., `b.0.c` and `b.1.c`).

![20250113184056](https://static-docs.nocobase.com/20250113184056.png)

When array indexes are included, ensure that the indexes in the input data are consistent; otherwise, parsing errors may occur.

### Using in Subsequent Nodes

In the configuration of subsequent nodes, you can use the variables generated by the JSON Variable Mapping node:

![Using in Subsequent Nodes](https://static-docs.nocobase.com/20250113203658.png)

Even if the JSON structure is complex, after mapping you only need to select the variable corresponding to the desired path.

---
