# Связь "Многие-ко-многим" (Массив)

<PluginInfo name="field-m2m-array"></PluginInfo>

## Введение

Эта функция позволяет использовать поля-массивы в коллекции данных для хранения нескольких уникальных ключей из целевой таблицы, создавая связь "многие-ко-многим" между таблицами. Например, рассмотрим сущности "Статьи" и "Теги". Статья может быть связана с несколькими тегами, при этом таблица статей хранит ID соответствующих записей из таблицы тегов в поле-массиве.

:::warning{title="Примечание"}

- По возможности рекомендуется использовать промежуточную коллекцию для создания стандартной [связи многие-ко-многим](../data-modeling/collection-fields/associations/m2m/index.md) вместо данного метода.
- В настоящее время только PostgreSQL поддерживает фильтрацию данных исходной коллекции с использованием полей из целевой таблицы для связей многие-ко-многим, установленных через поля-массивы. Например, в описанном сценарии можно фильтровать статьи по другим полям таблицы тегов, таким как название.

:::

### Настройка поля

![Настройка поля многие-ко-многим (массив)](https://static-docs.nocobase.com/202407051108180.png)

## Описание параметров

### Исходная коллекция

Коллекция, в которой находится текущее поле.

### Целевая коллекция

Коллекция, с которой устанавливается связь.

### Внешний ключ

Поле-массив в исходной коллекции, которое хранит ключи из целевой таблицы.

Соответствие типов полей-массивов в разных СУБД:

| NocoBase | PostgreSQL | MySQL  | SQLite |
| -------- | ---------- | ------ | ------ |
| `set`    | `array`    | `JSON` | `JSON` |

### Целевой ключ

Поле в целевой коллекции, соответствующее значениям, хранящимся в поле-массиве исходной таблицы. Это поле должно быть уникальным.
