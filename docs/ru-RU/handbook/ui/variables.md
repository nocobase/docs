# Переменные

## Введение
Переменные представляют собой набор токенов, используемых для идентификации значений в текущем контексте. Они могут применяться в таких сценариях, как настройка области данных блока, значения по умолчанию для полей, правила связей, рабочие процессы и т.д.

![2024-09-25_20-08-38-2024-09-25-20-11-51](https://static-docs.nocobase.com/2024-09-25_20-08-38-2024-09-25-20-11-51.png)

## Поддерживаемые переменные

### Текущий пользователь

Представляет данные пользователя, выполнившего вход в систему.

![20240416154950](https://static-docs.nocobase.com/20240416154950.png)

### Текущая роль

Идентификатор роли (название роли) текущего пользователя.

![20240416155100](https://static-docs.nocobase.com/20240416155100.png)

### Текущая форма

Значение текущей формы, используется только в блоках форм. Применяется в следующих сценариях:

- Правила связей текущей формы
- Значения по умолчанию для полей формы (действительно только при добавлении новых данных)
- Настройки области данных для связанных полей
- Конфигурация значений полей для действий отправки

#### Правила связей текущей формы

![20240416170732_rec_](https://static-docs.nocobase.com/20240416170732_rec_.gif)

#### Значения по умолчанию для полей формы

![20240416171129_rec_](https://static-docs.nocobase.com/20240416171129_rec_.gif)

#### Настройки области данных для связанных полей

Используется для обработки связей между отношениями:

![20240416171743_rec_](https://static-docs.nocobase.com/20240416171743_rec_.gif)

#### Конфигурация значений полей для действий отправки

![20240416171215_rec_](https://static-docs.nocobase.com/20240416171215_rec_.gif)

### Текущий объект

Используется только для настройки полей в подформах и подтаблицах блоков форм, представляет значение каждого элемента:

- Значения по умолчанию для подполей
- Область данных для связанных подполей

#### Значения по умолчанию для подполей

![20240416172933_rec_](https://static-docs.nocobase.com/20240416172933_rec_.gif)

#### Область данных для связанных подполей

![20240416173043_rec_](https://static-docs.nocobase.com/20240416173043_rec_.gif)

### Родительский объект

Аналогично "Текущему объекту", представляет родительский объект текущего объекта. Поддерживается в NocoBase v1.3.34-beta и выше.

### Текущая запись

Запись представляет собой строку в коллекции. Переменная "Текущая запись" используется в "Правилах связей действий строки" блоков отображения.

#### Правила связей действий строки

![20240416174813_rec_](https://static-docs.nocobase.com/20240416174813_rec_.gif)

### Текущая запись всплывающего окна

Всплывающие действия играют важную роль в конфигурации интерфейса NocoBase.

- Всплывающее окно действия строки: каждое окно имеет переменную "Текущая запись всплывающего окна", представляющую текущую запись строки.
- Всплывающее окно связанного поля: каждое окно имеет переменную "Текущая запись всплывающего окна", представляющую запись выбранного отношения.

Блоки во всплывающем окне могут использовать переменную "Текущая запись всплывающего окна" в следующих сценариях:

- Настройка области данных для блоков
- Настройка области данных для связанных полей
- Настройка значений по умолчанию для полей (форма добавления данных)
- Настройка правил связей для действий
- Конфигурация значений полей для действий отправки формы

#### Настройка области данных для блоков

![20240416224307_rec_](https://static-docs.nocobase.com/20240416224307_rec_.gif)

#### Настройка области данных для связанных полей

![20240416224641_rec_](https://static-docs.nocobase.com/20240416224641_rec_.gif)

#### Настройка значений по умолчанию для полей

![20240416223846_rec_](https://static-docs.nocobase.com/20240416223846_rec_.gif)

#### Настройка правил связей для действий

![20240416223101_rec_](https://static-docs.nocobase.com/20240416223101_rec_.gif)

#### Конфигурация значений полей для действий отправки формы

![20240416224014_rec_](https://static-docs.nocobase.com/20240416224014_rec_.gif)

### Выбранная запись таблицы

Значения по умолчанию для полей формы, используемые только для действия "Добавить запись" в блоке таблицы.

#### Значение по умолчанию поля формы для действия "Добавить запись"

### Родительская запись (устарело)

Используется только в блоках связей, представляет исходную запись связанных данных.

:::warning
"Родительская запись" устарела, рекомендуется использовать "Текущую запись всплывающего окна".
:::

### Переменные даты

Доступные переменные:

- Текущее время
- Вчера
- Сегодня
- Завтра
- Прошлая неделя
- Текущая неделя
- Следующая неделя
- Прошлый месяц
- Текущий месяц
- Следующий месяц
- Прошлый квартал
- Текущий квартал
- Следующий квартал
- Прошлый год
- Текущий год
- Следующий год
- Последние 7 дней
- Следующие 7 дней
- Последние 30 дней
- Следующие 30 дней
- Последние 90 дней
- Следующие 90 дней

<br />

:::warning
Кроме "Текущего времени", которое является моментом (строка), остальные переменные даты представляют периоды (массивы). В настоящее время периоды могут использоваться только в области данных и не могут применяться для значений по умолчанию полей.
:::

Примеры использования:

- Настройка условий для полей даты в области данных блока
- Настройка условий для полей даты в области данных связанных полей
- Настройка условий для полей даты в правилах связей действий
- Настройка значений по умолчанию для полей даты

### Параметры URL

Эта переменная представляет параметры поиска в URL текущей страницы. Доступна только при наличии строки запроса в URL страницы. Удобно использовать вместе с [Ссылкой](/handbook/ui/actions/types/link).

![20240603200410](https://static-docs.nocobase.com/20240603200410.gif)

### API токен

Значение этой переменной представляет собой строку, которая служит учетными данными для доступа к API NocoBase. Может использоваться для аутентификации пользователя.
