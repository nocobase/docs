# Markdown Block

## Введение

Блоки Markdown могут использоваться без привязки к источнику данных. Они определяются с использованием синтаксиса Markdown и подходят для отображения форматированного текстового содержимого.

## Добавление блоков

Блоки Markdown можно добавлять внутри страниц или всплывающих окон.

![20240612205004](https://static-docs.nocobase.com/20240612205004.png)

Встроенные блоки Markdown также можно добавлять внутри блоков форм и блоков с деталями.

![20240612205215](https://static-docs.nocobase.com/20240612205215.png)

## Шаблонизатор

### Строковые шаблоны

Используйте `{{xxx}}` для интерполяции.

![20240817175031](https://static-docs.nocobase.com/20240817175031.png)

### Handlebars

Поддерживает использование богатого синтаксиса, такого как условия и циклы, для динамического генерации HTML-контента.

![20240817175355](https://static-docs.nocobase.com/20240817175355.png)

![20240817175501](https://static-docs.nocobase.com/20240817175501.png)

Для получения дополнительной информации обратитесь к [Handlebars шаблонам](/handbook/template-handlebars).

## Использование переменных

Поддерживаемые переменные в Markdown зависят от местоположения.

Markdown на странице поддерживает общие системные переменные, такие как текущий пользователь, текущая роль, переменные даты и т. д.

![20240612205857](https://static-docs.nocobase.com/20240612205857.png)

Markdown во всплывающих окнах операций со строками блоков (или подстраницах) поддерживает больше переменных контекста данных, таких как текущая запись, текущая запись всплывающего окна и т. д.

![20240612210333](https://static-docs.nocobase.com/20240612210333.png)

### Связанные данные в переменных

Например, заказ/доставка (один к одному).

Используйте переменную 'текущая запись всплывающего окна' в блоке Markdown всплывающего окна деталей операции, чтобы отобразить номер доставки текущего заказа.

#### Строковые шаблоны автоматически обрабатывают связанные данные (путем автоматической загрузки необходимых связанных данных)

![20241210165519](https://static-docs.nocobase.com/20241210165519.png)

![20241210165541](https://static-docs.nocobase.com/20241210165541.png)

#### В настоящее время Handlebars не поддерживает предварительную загрузку связанных данных. Пользователям необходимо явно настроить соответствующие связанные поля в блоке данных, чтобы получить соответствующие данные во время рендеринга.

![20241210165625](https://static-docs.nocobase.com/20241210165625.png)

После настройки связанного поля 'Доставка' в блоке таблицы заказов, блок Markdown в деталях операции (с использованием Handlebars) сможет получить доступ и отобразить связанные данные.

![20241210165655](https://static-docs.nocobase.com/20241210165655.png)

### Правила синтаксиса

Помимо разницы в предварительной загрузке связанных данных, между двумя шаблонами также есть различия в правилах синтаксиса. Например, при использовании переменных со связью "многие ко многим" полученные данные обычно представляют собой массив. Два шаблона по-разному обрабатывают данные типа массива.

Например, заказ/продукт (многие ко многим)

Используйте переменную 'текущая запись всплывающего окна' в блоке Markdown всплывающего окна деталей операции, чтобы отобразить названия продуктов, связанных с текущим заказом (несколько элементов).

#### Строковые шаблоны отображают массивы, разделяя элементы запятыми (',')

![20241210170508](https://static-docs.nocobase.com/20241210170508.png)

![20241210170545](https://static-docs.nocobase.com/20241210170545.png)

#### Шаблоны Handlebars используют `#each` для перебора данных массива

![20241210205357](https://static-docs.nocobase.com/20241210205357.png)

Связанные данные, которые будут использоваться, должны быть настроены в блоке данных

![20241210170814](https://static-docs.nocobase.com/20241210170814.png)

```javascript
<ul>
  {{#each   $nPopupRecord.products }}
    <li>{{this.product_name}}</li>
  {{/each}}
</ul>
```

Для более подробного знакомства с переменными ознакомьтесь с разделом [Редактирование UI / Переменные](/handbook/ui/variables).

## QR-коды

Markdown также поддерживает настройку QR-кодов, которые можно использовать в сочетании с переменными.

```html
<qr-code value="https://www.nocobase.com/" type="svg"></qr-code>
```

## План развития

- Запланировано или в процессе
  - Поддержка предварительной загрузки связанных данных в Handlebars.
