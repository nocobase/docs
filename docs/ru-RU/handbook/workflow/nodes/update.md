# Обновление записи

Используется для обновления записей данных, соответствующих определённым условиям, в коллекции.

Разделы выбора коллекции и назначения полей аналогичны узлу «Создать запись». Основные отличия узла «Обновить запись» от узла «Создать запись» — это условия фильтрации и необходимость выбора режима обновления. Кроме того, узел обновления возвращает количество успешно обновлённых строк данных, которое можно просмотреть только в истории выполнения, но нельзя использовать как переменную в последующих узлах.

## Создание узла

В интерфейсе настройки рабочего процесса нажмите кнопку «+» в рабочем процессе и добавьте узел «Обновить запись»:

![Обновить запись — Добавление](https://static-docs.nocobase.com/9ff24d7bc173b3a71decc1f70ca9fb66.png)

## Настройка узла

![Обновить запись — Настройка узла](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

### Коллекция

Выберите коллекцию, в которой нужно обновить записи.

### Режим обновления

Существуют два режима обновления: «Пакетный» и «По одному». В пакетном режиме обновление каждой записи **не вызывает** событий коллекции. В режиме «по одному» каждое обновление записи может вызывать события коллекции. Однако при обновлении по одному могут возникнуть проблемы с производительностью, особенно при большом объёме данных, поэтому используйте этот режим с осторожностью. Обычно выбор режима зависит от целевых данных и необходимости запуска других событий рабочего процесса. Если вы обновляете одну запись по первичному ключу, рекомендуется использовать режим «по одному». Если вы обновляете несколько записей по условиям фильтрации, рекомендуется использовать пакетный режим.

### Условия фильтрации

Аналогично условиям фильтрации при обычном запросе к коллекции. Можно использовать переменные контекста рабочего процесса.

### Значения полей

Аналогично назначению полей в узле «Создать запись». Можно использовать переменные из контекста рабочего процесса или вручную ввести статические значения.

**Примечание**: Узел обновления в рабочем процессе **не обновляет автоматически** поле «Последний изменивший», его значение нужно настраивать вручную в зависимости от ситуации.

## Пример

Например, при создании «Поста» нужно автоматически обновить поле «Количество постов» в коллекции «Категория поста». Это можно реализовать с помощью узла обновления:

![Обновить запись — Пример настройки узла](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

Когда рабочий процесс запускается, поле «Количество постов» в коллекции «Категория поста» автоматически обновляется до текущего значения +1.
