# HTTP API

События утверждения не ограничиваются действиями в пользовательском интерфейсе; их также можно активировать с помощью вызовов HTTP API.

Для утверждений, инициированных из блоков данных и блоков центра утверждения, вы можете инициировать их с помощью вызова API (на примере кнопки создания таблицы «posts»):

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "title": "Hello, world!",
    "content": "This is a test post."
  }'
  "http://localhost:3000/api/posts:create?triggerWorkflows=workflowKey"
```

Параметр URL `triggerWorkflows` является ключом рабочего процесса, с несколькими рабочими процессами, разделенными запятыми. Вы можете найти этот ключ, наведя курсор на имя "workflow" в верхней части холста "workflow":

![Как просмотреть ключ рабочего процесса](https://static-docs.nocobase.com/20240426135108.png)

После успешного вызова будет запущен рабочий процесс утверждения для таблицы `posts`.

:::info{title="Примечание"}
Поскольку внешние вызовы также полагаются на идентификацию пользователя, вызовы HTTP API должны включать данные аутентификации, как и стандартные запросы интерфейса. Сюда входит заголовок `Authorization` или параметр `token` (токен, полученный при входе в систему), а также заголовок `X-Role` (указывающий текущую роль пользователя).
:::

Если вам нужно вызвать событие, связанное с отношением «один к одному» (обратите внимание, что отношения «один ко многим» пока не поддерживаются), вы можете использовать `!` в параметрах, чтобы указать связанное поле, которое должно вызвать событие:

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "title": "Hello, world!",
    "content": "This is a test post.",
    "category": {
      "title": "Test category"
    }
  }'
  "http://localhost:3000/api/posts:create?triggerWorkflows=workflowKey!category"
```

При успешном выполнении вызова будет запущено событие утверждения для таблицы `categories`.

:::info{title="Примечание"}
При запуске событий через вызовы HTTP API убедитесь, что рабочий процесс включен и конфигурация таблицы данных верна; в противном случае вызов может быть неуспешным или может привести к ошибкам.
:::
