# Шаблоны блоков

<PluginInfo name="block-template"></PluginInfo>
<style>
.markdown h5 {
    font-size: 15px;
}
</style>

## Введение

Шаблоны блоков предоставляют возможности для создания шаблонов блоков, позволяя централизованно управлять шаблонами и создавать блоки на их основе.

## Установка

Встроенный плагин, не требует установки.

## Инструкция по использованию

![Главный интерфейс](https://static-docs.nocobase.com/main-screen-block-templates.png)

### Выбор типа шаблона

NocoBase предлагает два типа шаблонов: Наследуемые шаблоны и Референсные шаблоны. Их различия и сценарии применения:

- **Референсный шаблон**: Аналогичен фрагменту UI Schema. При использовании можно выбрать метод "Ссылка" или "Копирование".
  - **Ссылка**: Блок полностью соответствует шаблону. Изменения в блоке синхронизируются с оригинальным шаблоном. Подходит для сценариев, требующих строгой согласованности содержимого/структуры в нескольких местах.
  - **Копирование**: Полностью копирует текущую конфигурацию шаблона. После копирования связь с шаблоном теряется, обновления не синхронизируются. Подходит для быстрого создания блоков или начала работы с шаблонной основы для полностью независимых изменений.
- **Наследуемый шаблон**: Созданные блоки сохраняют отношение наследования с шаблоном. Блоки можно настраивать индивидуально на основе шаблона, при этом неизмененные части продолжают синхронизироваться с обновлениями шаблона. Подходит для сценариев, требующих единой базовой конфигурации, но допускающих локальные различия.

### Референсный шаблон

Референсный шаблон — это универсальный шаблон, аналогичный фрагменту UI Schema. Он позволяет сохранять блоки данных (включая блоки на страницах, в модальных окнах и совместимые сторонние блоки) как Референсные шаблоны, которые затем можно использовать в других местах через методы "Ссылка" или "Копирование".

Существует два типа референсных шаблонов:
- Референсный шаблон: Сохраняет полную конфигурацию блока, включая поля и действия. Большинство блоков сохраняются как этот тип.
- Референсный шаблон (только поля): Сохраняет только конфигурацию полей блока, действия не сохраняются. При преобразовании формы или блока деталей одной записи в референсный шаблон он сохраняется как этот тип.

#### Создание референсного шаблона

Выберите блок данных, который хотите сохранить как Референсный шаблон, нажмите кнопку "Сохранить как референсный шаблон".

![Сохранить как референсный шаблон](https://static-docs.nocobase.com/save-as-reference-block-template.png)

#### Использование референсного шаблона

Референсные шаблоны предлагают два способа использования:

1. **Ссылка**

При создании блока на странице выберите соответствующий референсный шаблон для создания блока с использованием ссылки на шаблон.

![Создать блок](https://static-docs.nocobase.com/create-block-from-reference-template.png)

2. **Копирование**

При создании блока на странице выберите соответствующую опцию копирования шаблона.

![Создать блок](https://static-docs.nocobase.com/create-block-from-copy-template.png)

### Наследуемый шаблон

Наследуемые шаблоны подходят для сценариев, когда требуется, чтобы блоки следовали базовым обновлениям шаблона, но также допускали некоторые специфические изменения. Блоки, созданные из Наследуемого шаблона, наследуют конфигурацию шаблона и позволяют расширять или переопределять её. Конфигурации, не переопределенные блоком, синхронизируются с обновлениями шаблона.

#### Создание наследуемого шаблона

Наследуемые шаблоны можно создать двумя способами:

1. **Создание в интерфейсе управления шаблонами блоков**

**Шаги:**
1. Перейдите в интерфейс управления шаблонами блоков
2. Нажмите кнопку "Добавить новый"
3. Введите основную информацию для наследуемого шаблона
4. Нажмите "Отправить" для завершения создания
5. Настройте содержимое наследуемого шаблона

![Создать наследуемый шаблон](https://static-docs.nocobase.com/create-inherited-template.png)

2. **Создание из существующего блока**

**Шаги:**
1. Найдите блок данных на странице, который хотите сохранить как шаблон
2. Выберите опцию "Сохранить как наследуемый шаблон"
3. Введите имя шаблона и сохраните

![Сохранить как наследуемый шаблон](https://static-docs.nocobase.com/save-as-inherited-template.png)

:::info{title=Примечание}
- Только блоки данных на страницах можно сохранять как наследуемые шаблоны
- Блоки во всплывающих окнах нельзя сохранять как наследуемые шаблоны
- Блоки диаграмм пока не поддерживаются для наследуемых шаблонов
:::

#### Настройка наследуемого шаблона

Выберите наследуемый шаблон, нажмите кнопку "Настроить" для входа в интерфейс конфигурации.

![Настроить шаблон](https://static-docs.nocobase.com/configure-template.png)

:::info{title=Примечание}
- Наследуемый шаблон поддерживает только один блок данных
- Блоки диаграмм пока не поддерживаются
:::

#### Редактирование наследуемого шаблона

Выберите наследуемый шаблон и нажмите "Редактировать" для изменения заголовка и описания.

![Редактировать наследуемый шаблон](https://static-docs.nocobase.com/edit-inherited-template.png)

#### Копирование наследуемого шаблона

Выберите шаблон, нажмите "Копировать", введите новое имя и подтвердите.

![Копировать наследуемый шаблон](https://static-docs.nocobase.com/copy-inherited-template.png)

#### Удаление наследуемого шаблона

Выберите шаблон, нажмите "Удалить" и подтвердите. Можно выбрать сохранение созданных блоков.

![Удалить наследуемый шаблон](https://static-docs.nocobase.com/delete-inherited-template.png)

### Использование шаблонов

#### Создание блока из наследуемого шаблона

При создании блока выберите соответствующий наследуемый шаблон.

![Создать блок](https://static-docs.nocobase.com/create-block-from-inherited-template.png)

Особенности блоков из наследуемых шаблонов:
1. Наследование конфигурации с возможностью добавления своих настроек
2. Нельзя удалить унаследованные компоненты
![Нельзя удалить](https://static-docs.nocobase.com/disable-delete.png)
3. Дополнительные поля выделяются цветом
![Стиль блока](https://static-docs.nocobase.com/template-bg.png)
4. Есть функция "Вернуть к шаблону"
![Вернуть к шаблону](https://static-docs.nocobase.com/revert-to-template.gif)

:::info{title=Примечание}
Позиционирование компонентов определяется макетом страницы и не синхронизируется автоматически с шаблоном. Для синхронизации используйте "Вернуть к шаблону".
:::

## FAQ

**В: Как создать шаблон формы редактирования?**

О: Конфигурация аналогична форме добавления. Шаблон автоматически появится в опциях наследуемых шаблонов формы редактирования.

**В: Почему позиции полей не синхронизируются?**

О: Позиции определяются макетом страницы. Для синхронизации используйте "Вернуть к шаблону" (это удалит пользовательские настройки).

**В: Как обрабатывать неиспользуемые шаблоны?**

О: Рекомендуется удалять. При удалении можно сохранить созданные блоки как обычные.

**В: Почему нет поддержки диаграмм?**

О: Будет добавлено в будущих версиях.

**В: Почему нельзя сохранить блок из всплывающего окна?**

О: Шаблоны работают только с блоками на страницах, а не во всплывающих окнах.
