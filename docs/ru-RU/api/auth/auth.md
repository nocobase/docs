# Аутентификация (Auth)

## Обзор

`Auth` - это абстрактный класс для типов аутентификации пользователей, определяющий интерфейсы, необходимые для завершения процесса аутентификации. Для добавления новых типов аутентификации необходимо наследоваться от класса `Auth` и реализовать его методы. Базовую реализацию можно посмотреть в [BaseAuth](./base-auth.md).

```ts
interface IAuth {
  user: Model;
  // Проверка статуса аутентификации и возврат текущего пользователя
  check(): Promise<Model>;
  signIn(): Promise<any>;
  signUp(): Promise<any>;
  signOut(): Promise<any>;
}

export abstract class Auth implements IAuth {
  abstract user: Model;
  abstract check(): Promise<Model>;
  // ...
}

class CustomAuth extends Auth {
  // check: Аутентификация
  async check() {
    // ...
  }
}
```

## Свойства экземпляра

### `user`

Информация об аутентифицированном пользователе.

#### Сигнатура

- `abstract user: Model`

## Методы класса

### `constructor()`

Конструктор, создает экземпляр `Auth`.

#### Сигнатура

- `constructor(config: AuthConfig)`

#### Типы

```ts
export type AuthConfig = {
  authenticator: Authenticator;
  options: {
    [key: string]: any;
  };
  ctx: Context;
};
```

#### Детали

##### AuthConfig

| Атрибут        | Тип                                              | Описание                                                                                                                 |
| -------------- | ------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------- |
| `authenticator` | [`Authenticator`](./auth-manager#authenticator)  | Модель аутентификатора, фактический тип в приложениях NocoBase - [AuthModel](../../handbook/auth/dev/api.md#authmodel) |
| `options`      | `Record<string, any>`                            | Конфигурации, связанные с аутентификатором                                                                             |
| `ctx`          | `Context`                                        | Контекст запроса                                                                                                       |

### `check()`

Аутентификация пользователя, возвращает информацию о пользователе. Это абстрактный метод, который должны реализовывать все типы аутентификации.

#### Сигнатура

- `abstract check(): Promise<Model>`

### `signIn()`

Вход пользователя в систему.

#### Сигнатура

- `signIn(): Promise<any>`

### `signUp()`

Регистрация пользователя.

#### Сигнатура

- `signUp(): Promise<any>`

### `signOut()`

Выход пользователя из системы.

#### Сигнатура

- `signOut(): Promise<any>`

## Дополнительная информация

Для реализации кастомной аутентификации:

1. Создайте класс, наследующийся от `Auth`
2. Реализуйте обязательные методы (`check`, `signIn` и др.)
3. Зарегистрируйте ваш аутентификатор в системе NocoBase

Пример базовой реализации можно найти в документации по [BaseAuth](./base-auth.md).

Все методы возвращают Promise, что позволяет реализовывать асинхронные операции аутентификации (например, проверку через внешние API).
