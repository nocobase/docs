"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[85727],{747284:function(o,l,a){a.r(l);var d=a(572269),_=a(793359),h=a(861788),i=a(719977),x=a(20190),t=a(24268),p=a(496057),v=a(585939),m=a(28484),I=a(635206),g=a(375553),j=a(156266),f=a(572333),E=a(841118),b=a(39297),y=a(868526),P=a(605019),s=a(614651),r=a(280936),c=a(667294),n=a(530036),e=a(785893);function u(){return(0,e.jsx)(s.dY,{children:(0,e.jsx)(c.Suspense,{fallback:(0,e.jsx)(r.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"develop-the-first-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#develop-the-first-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Develop the first plugin"]}),(0,e.jsx)("p",{children:n.texts[0].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:(0,e.jsx)(s.rU,{to:"/welcome/getting-started/installation/create-nocobase-app",children:n.texts[1].value})}),(0,e.jsx)("li",{children:(0,e.jsx)(s.rU,{to:"/welcome/getting-started/installation/git-clone",children:n.texts[2].value})})]}),(0,e.jsx)("p",{children:n.texts[3].value}),(0,e.jsxs)("h2",{id:"create-a-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#create-a-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Create a plugin"]}),(0,e.jsx)("p",{children:n.texts[4].value}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[5].value}),(0,e.jsxs)("p",{children:[n.texts[6].value,(0,e.jsx)("code",{children:n.texts[7].value}),n.texts[8].value]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[9].value}),(0,e.jsxs)("p",{children:[n.texts[10].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/pm/list/local/",children:n.texts[11].value})]}),(0,e.jsx)("img",{src:"https://nocobase.oss-cn-beijing.aliyuncs.com/b04d16851fc1bbc2796ecf8f9bc0c3f4.png"}),(0,e.jsxs)("p",{children:[n.texts[12].value,(0,e.jsx)("code",{children:n.texts[13].value}),n.texts[14].value]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[15].value}),(0,e.jsxs)("h2",{id:"code-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#code-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Code the plugin"]}),(0,e.jsxs)("p",{children:[n.texts[16].value,(0,e.jsx)("code",{children:n.texts[17].value}),n.texts[18].value]}),(0,e.jsx)(t.Z,{lang:"ts",children:n.texts[19].value}),(0,e.jsxs)("p",{children:[n.texts[20].value,(0,e.jsx)("code",{children:n.texts[21].value}),n.texts[22].value]}),(0,e.jsx)(t.Z,{lang:"ts",children:n.texts[23].value}),(0,e.jsxs)("h2",{id:"activate-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#activate-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Activate the plugin"]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:n.texts[24].value})}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[25].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:n.texts[26].value})}),(0,e.jsxs)("p",{children:[n.texts[27].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/pm/list/local/",children:n.texts[28].value})]}),(0,e.jsx)("img",{src:"https://nocobase.oss-cn-beijing.aliyuncs.com/7b7df26a8ecc32bb1ebc3f99767ff9f9.png"})]}),(0,e.jsx)(i.Z,{type:"info",title:"INFO",children:(0,e.jsxs)("p",{children:[n.texts[29].value,(0,e.jsx)("code",{children:n.texts[30].value}),n.texts[31].value]})}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"debug-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#debug-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Debug the Plugin"]}),(0,e.jsx)("p",{children:n.texts[32].value}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[33].value}),(0,e.jsx)("p",{children:n.texts[34].value}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[35].value}),(0,e.jsx)("p",{children:n.texts[36].value}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[37].value}),(0,e.jsxs)("h2",{id:"build-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#build-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Build the plugin"]}),(0,e.jsxs)("p",{children:[n.texts[38].value,(0,e.jsx)("code",{children:n.texts[39].value}),n.texts[40].value]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[41].value}),(0,e.jsxs)("p",{children:[n.texts[42].value,(0,e.jsx)("code",{children:n.texts[43].value})]}),(0,e.jsxs)("h2",{id:"upload-to-other-nocobase-applications",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#upload-to-other-nocobase-applications",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Upload to other NocoBase applications"]}),(0,e.jsx)("p",{children:n.texts[44].value}),(0,e.jsx)("img",{src:"https://nocobase.oss-cn-beijing.aliyuncs.com/8aa8a511aa8c1e87a8f7ee82cf8a1359.gif"})]})]})})})}l.default=u},530036:function(o,l,a){a.r(l),a.d(l,{texts:function(){return d}});const d=[{value:"Before start, you need to install NocoBase:.",paraId:0,tocIndex:0},{value:"create-nocobase-app installation",paraId:1,tocIndex:0},{value:"Git source installation",paraId:2,tocIndex:0},{value:"Once NocoBase is installed, we can start our plugin development journey.",paraId:3,tocIndex:0},{value:"First, you can quickly create an empty plugin via the CLI with the following command.",paraId:4,tocIndex:1},{value:`yarn pm create @my-project/plugin-hello
`,paraId:5,tocIndex:1},{value:"The directory where the plugin located is ",paraId:6,tocIndex:1},{value:"packages/plugins/@my-project/plugin-hello",paraId:6,tocIndex:1},{value:" and the plugin directory structure is",paraId:6,tocIndex:1},{value:`|- /packages/plugins/@my-project/plugin-hello
  |- /src
    |- /client # plugin client code
    |- /server # plugin server code
  |- client.d.ts
  |- client.js
  |- package.json # plugin package information
  |- server.d.ts
  |- server.js
`,paraId:7,tocIndex:1},{value:"Visit the Plugin Manager to view the plugin you just added, the default address is ",paraId:8,tocIndex:1},{value:"http://localhost:13000/admin/pm/list/local/",paraId:8,tocIndex:1},{value:"If the plugin is not shown in the plugin manager, you can add it manually with the ",paraId:9,tocIndex:1},{value:"pm add",paraId:9,tocIndex:1},{value:" command.",paraId:9,tocIndex:1},{value:`yarn pm add @my-project/plugin-hello
`,paraId:10,tocIndex:1},{value:"Create a new collection file in the plugin, e.g. ",paraId:11,tocIndex:2},{value:". /src/server/collections/hello.ts",paraId:11,tocIndex:2},{value:" with the following contents:",paraId:11,tocIndex:2},{value:`import { defineCollection } from '@nocobase/database';

export default defineCollection({
  name: 'hello',
  fields: [{ type: 'string', name: 'name' }],
});
`,paraId:12,tocIndex:2},{value:"Modify the ",paraId:13,tocIndex:2},{value:". /src/server/plugin.ts",paraId:13,tocIndex:2},{value:" file as follows",paraId:13,tocIndex:2},{value:`import { Plugin } from '@nocobase/server';

export class PluginHelloServer extends Plugin {
  async afterAdd() {}

  async beforeLoad() {}

  async load() {
    // This is just an example. Expose all actions of the hello collection to the public
    this.app.acl.allow('hello', '*', 'public');
  }

  async install() {}

  async afterEnable() {}

  async afterDisable() {}

  async remove() {}
}

export default PluginHelloServer;
`,paraId:14,tocIndex:2},{value:"Operated by command",paraId:15,tocIndex:3},{value:`yarn pm enable @my-project/plugin-hello
`,paraId:16,tocIndex:3},{value:"Operated by UI",paraId:17,tocIndex:3},{value:`Visit the Plugin Manager to view the plugin you just added and click enable.
The Plugin Manager page defaults to `,paraId:18,tocIndex:3},{value:"http://localhost:13000/admin/pm/list/local/",paraId:18,tocIndex:3},{value:"The collection configured in the plugin is automatically synchronized with the database when the plugin is activated, generating the corresponding data tables and fields. If the plugin is already active, you need to handle the synchronization of the data tables with the upgrade command ",paraId:19},{value:"yarn nocobase upgrade",paraId:19},{value:".",paraId:19},{value:"If the app is not started, you need to start the app first",paraId:20,tocIndex:4},{value:`# for development
yarn dev

# for production
yarn build
yarn start
`,paraId:21,tocIndex:4},{value:"Insert data into the hello collection of the plugin",paraId:22,tocIndex:4},{value:`curl --location --request POST 'http://localhost:13000/api/hello:create' \\
--header 'Content-Type: application/json' \\
--data-raw '{
    "name": "Hello world"
}'
`,paraId:23,tocIndex:4},{value:"View the data",paraId:24,tocIndex:4},{value:`curl --location --request GET 'http://localhost:13000/api/hello:list'
`,paraId:25,tocIndex:4},{value:"If you cloned the source code, you need to execute ",paraId:26,tocIndex:5},{value:"yarn build",paraId:26,tocIndex:5},{value:" for a full build, otherwise, a type error will be reported.",paraId:26,tocIndex:5},{value:`yarn build @my-project/plugin-hello --tar

# step by step
yarn build @my-project/plugin-hello
yarn nocobase tar @my-project/plugin-hello
`,paraId:27,tocIndex:5},{value:"The default saved path for the plugin tar is ",paraId:28,tocIndex:5},{value:"storage/tar/@my-project/plugin-hello.tar.gz",paraId:28,tocIndex:5},{value:"Only supported in v0.14 and above",paraId:29,tocIndex:6}]}}]);
