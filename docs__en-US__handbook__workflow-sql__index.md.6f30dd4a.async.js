"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[35739],{657109:function(i,a,n){n.r(a);var d=n(572269),c=n(793359),u=n(861788),h=n(719977),x=n(20190),s=n(24268),m=n(496057),v=n(585939),I=n(28484),j=n(635206),E=n(375553),p=n(156266),f=n(572333),g=n(841118),b=n(39297),P=n(868526),D=n(605019),o=n(614651),l=n(280936),r=n(667294),t=n(451654),e=n(785893);function _(){return(0,e.jsx)(o.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(l.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"sql-actions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#sql-actions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"SQL Actions"]}),(0,e.jsx)("p",{children:t.texts[0].value}),(0,e.jsx)("p",{children:t.texts[1].value}),(0,e.jsxs)("h2",{id:"faq",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#faq",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"FAQ"]}),(0,e.jsxs)("h3",{id:"how-can-the-results-of-an-sql-action-node-be-utilized",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#how-can-the-results-of-an-sql-action-node-be-utilized",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"How can the results of an SQL Action node be utilized?"]}),(0,e.jsxs)("p",{children:[t.texts[2].value,(0,e.jsx)("code",{children:t.texts[3].value}),t.texts[4].value,(0,e.jsx)(o.rU,{to:"/handbook/workflow-json-query",children:t.texts[5].value}),t.texts[6].value]}),(0,e.jsxs)("h3",{id:"will-sql-actions-trigger-table-events",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#will-sql-actions-trigger-table-events",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Will SQL actions trigger table events?"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:t.texts[7].value}),t.texts[8].value,(0,e.jsx)("code",{children:t.texts[9].value}),t.texts[10].value,(0,e.jsx)("code",{children:t.texts[11].value}),t.texts[12].value,(0,e.jsx)("code",{children:t.texts[13].value}),t.texts[14].value]}),(0,e.jsxs)("h2",{id:"installation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#installation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Installation"]}),(0,e.jsx)("p",{children:t.texts[15].value}),(0,e.jsxs)("h2",{id:"user-guide",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#user-guide",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"User Guide"]}),(0,e.jsxs)("h3",{id:"creating-a-node",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-node",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Creating a Node"]}),(0,e.jsx)("p",{children:t.texts[16].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/0ce40a226d7a5bf3717813e27da40e62.png",alt:"Adding SQL Actions"})}),(0,e.jsxs)("h3",{id:"configuring-the-node",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#configuring-the-node",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Configuring the Node"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/98611dc13bcda04348bd0856561a7b04.png",alt:"SQL Node Configuration"})}),(0,e.jsxs)("h4",{id:"data-source",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#data-source",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Data Source"]}),(0,e.jsx)("p",{children:t.texts[17].value}),(0,e.jsx)("p",{children:t.texts[18].value}),(0,e.jsxs)("h4",{id:"sql-content",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#sql-content",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"SQL Content"]}),(0,e.jsx)("p",{children:t.texts[19].value}),(0,e.jsx)("p",{children:t.texts[20].value}),(0,e.jsxs)("h3",{id:"node-execution-results",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-execution-results",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Node Execution Results"]}),(0,e.jsxs)("p",{children:[t.texts[21].value,(0,e.jsx)("code",{children:t.texts[22].value}),t.texts[23].value,(0,e.jsx)("a",{href:"https://sequelize.org/api/v6/class/src/sequelize.js~sequelize#instance-method-query",children:(0,e.jsx)("code",{children:t.texts[24].value})}),t.texts[25].value]}),(0,e.jsx)("p",{children:t.texts[26].value}),(0,e.jsx)(s.Z,{lang:"sql",children:t.texts[27].value}),(0,e.jsxs)("p",{children:[t.texts[28].value,(0,e.jsx)("code",{children:t.texts[29].value}),t.texts[30].value]}),(0,e.jsx)(s.Z,{lang:"json",children:t.texts[31].value}),(0,e.jsxs)("p",{children:[t.texts[32].value,(0,e.jsx)("code",{children:t.texts[33].value}),t.texts[34].value]}),(0,e.jsx)(s.Z,{lang:"json",children:t.texts[35].value})]})})})})}a.default=_},451654:function(i,a,n){n.r(a),n.d(a,{texts:function(){return d}});const d=[{value:"In certain scenarios where the standard data table operation nodes fall short for more complex tasks, you can directly employ the SQL Action node to execute sophisticated SQL queries within the database.",paraId:0,tocIndex:0},{value:"Unlike executing SQL operations by connecting to the database externally, within the workflow, you can leverage variables from the workflow context as parameters within your SQL statements.",paraId:1,tocIndex:0},{value:"When using a ",paraId:2,tocIndex:2},{value:"SELECT",paraId:2,tocIndex:2},{value:" statement, the query results are stored in the node in Sequelize's JSON format. You can parse and utilize these results through the ",paraId:2,tocIndex:2},{value:"JSON-query",paraId:3,tocIndex:2},{value:" plugin.",paraId:2,tocIndex:2},{value:"No",paraId:4,tocIndex:3},{value:". SQL actions directly execute SQL commands on the database. Actions such as ",paraId:4,tocIndex:3},{value:"CREATE",paraId:4,tocIndex:3},{value:" / ",paraId:4,tocIndex:3},{value:"UPDATE",paraId:4,tocIndex:3},{value:" / ",paraId:4,tocIndex:3},{value:"DELETE",paraId:4,tocIndex:3},{value:" occur in the database, while table events are managed at the Node.js application layer (ORM processing). As a result, these operations do not trigger table events.",paraId:4,tocIndex:3},{value:"This plugin is built-in, so no installation is necessary.",paraId:5,tocIndex:4},{value:'In the workflow configuration interface, click the plus sign (\u201C+\u201D) within the flow to add an "SQL Action" node:',paraId:6,tocIndex:6},{value:"Select the data source for executing the SQL.",paraId:7,tocIndex:8},{value:"The data source must be of a database type, such as the main data source, PostgreSQL type, or any other data source compatible with Sequelize.",paraId:8,tocIndex:8},{value:"Edit the SQL statement. Currently, only one SQL statement is supported.",paraId:9,tocIndex:9},{value:"You can insert required variables by clicking the variable button in the upper right corner of the editor. Before execution, the variables will be replaced with their corresponding values in the text, and the final SQL statement will be sent to the database for querying.",paraId:10,tocIndex:9},{value:"Starting from ",paraId:11,tocIndex:10},{value:"v1.3.15-beta",paraId:11,tocIndex:10},{value:", the result of the SQL node execution is an array consisting purely of data. Prior to this version, the result was a Sequelize native structure that included query metadata (for more details, see: ",paraId:11,tocIndex:10},{value:"sequelize.query()",paraId:11,tocIndex:10},{value:").",paraId:11,tocIndex:10},{value:"For example, the following query:",paraId:12,tocIndex:10},{value:`select count(id) from posts;
`,paraId:13,tocIndex:10},{value:"Result before ",paraId:14,tocIndex:10},{value:"v1.3.15-beta",paraId:14,tocIndex:10},{value:":",paraId:14,tocIndex:10},{value:`[
    [
        { "count": 1 }
    ],
    {
        // meta
    }
]
`,paraId:15,tocIndex:10},{value:"Result after ",paraId:16,tocIndex:10},{value:"v1.3.15-beta",paraId:16,tocIndex:10},{value:":",paraId:16,tocIndex:10},{value:`[
    { "count": 1 }
]
`,paraId:17,tocIndex:10}]}}]);
