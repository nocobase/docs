"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[43754],{761478:function(d,s,n){n.r(s);var l=n(572269),u=n(793359),p=n(861788),x=n(719977),m=n(20190),t=n(24268),h=n(496057),_=n(585939),v=n(28484),I=n(635206),g=n(375553),j=n(156266),f=n(572333),P=n(841118),E=n(39297),C=n(868526),b=n(605019),o=n(614651),c=n(280936),i=n(667294),a=n(273980),e=n(785893);function r(){return(0,e.jsx)(o.dY,{children:(0,e.jsx)(i.Suspense,{fallback:(0,e.jsx)(c.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"partial-registration-of-component-and-scope",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#partial-registration-of-component-and-scope",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Partial Registration of Component and Scope"]}),(0,e.jsxs)("h2",{id:"example-description",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example-description",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example Description"]}),(0,e.jsxs)("p",{children:[a.texts[0].value,(0,e.jsx)(o.rU,{to:"/plugin-samples/component-and-scope/global",children:a.texts[1].value}),a.texts[2].value]}),(0,e.jsxs)("p",{children:[a.texts[3].value,(0,e.jsx)("a",{href:"https://github.com/nocobase/plugin-samples/tree/main/packages/plugins/%40nocobase-sample/plugin-component-and-scope-local",children:a.texts[4].value}),a.texts[5].value]}),(0,e.jsxs)("h2",{id:"initialize-the-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#initialize-the-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Initialize the Plugin"]}),(0,e.jsxs)("p",{children:[a.texts[6].value,(0,e.jsx)(o.rU,{to:"/development/your-first-plugin",children:a.texts[7].value}),a.texts[8].value]}),(0,e.jsx)(t.Z,{lang:"bash",children:a.texts[9].value}),(0,e.jsx)("p",{children:a.texts[10].value}),(0,e.jsx)(t.Z,{lang:"bash",children:a.texts[11].value}),(0,e.jsx)("p",{children:a.texts[12].value}),(0,e.jsx)(t.Z,{lang:"bash",children:a.texts[13].value}),(0,e.jsxs)("p",{children:[a.texts[14].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/pm/list/local/",children:a.texts[15].value}),a.texts[16].value]}),(0,e.jsx)("hr",{}),(0,e.jsxs)("h1",{id:"functionality-implementation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#functionality-implementation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Functionality Implementation"]}),(0,e.jsxs)("h2",{id:"1-creating-a-custom-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-creating-a-custom-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. Creating a Custom Page"]}),(0,e.jsxs)("p",{children:[a.texts[17].value,(0,e.jsx)("code",{children:a.texts[18].value}),a.texts[19].value]}),(0,e.jsx)(t.Z,{lang:"tsx",children:a.texts[20].value}),(0,e.jsxs)("h2",{id:"2-rendering-content-directly-with-component",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-rendering-content-directly-with-component",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. Rendering Content Directly with ",(0,e.jsx)("code",{children:a.texts[21].value})]}),(0,e.jsxs)("p",{children:[a.texts[22].value,(0,e.jsx)(o.rU,{to:"/plugin-samples/router/add-page",children:a.texts[23].value}),a.texts[24].value]}),(0,e.jsxs)("p",{children:[a.texts[25].value,(0,e.jsx)("code",{children:a.texts[26].value}),a.texts[27].value]}),(0,e.jsx)(t.Z,{lang:"tsx",children:a.texts[28].value}),(0,e.jsxs)("p",{children:[a.texts[29].value,(0,e.jsx)("code",{children:a.texts[30].value}),a.texts[31].value]}),(0,e.jsxs)("p",{children:[a.texts[32].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/custom-page2",children:a.texts[33].value}),a.texts[34].value,(0,e.jsx)("code",{children:a.texts[35].value}),a.texts[36].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/img_v3_02av_46e020ae-41d2-4bc3-a047-e28d97c20bdg.jpg",alt:"img_v3_02av_46e020ae-41d2-4bc3-a047-e28d97c20bdg"})}),(0,e.jsxs)("h2",{id:"3-rendering-content-with-schemacomponent",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3-rendering-content-with-schemacomponent",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3. Rendering Content with ",(0,e.jsx)("code",{children:a.texts[37].value})]}),(0,e.jsx)("p",{children:a.texts[38].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:(0,e.jsx)(o.rU,{to:"/development/client/ui-schema/what-is-ui-schema",children:a.texts[39].value})}),(0,e.jsx)("li",{children:(0,e.jsx)("a",{href:"https://client.docs.nocobase.com/core/ui-schema/schema-component#schemacomponent-1",children:a.texts[40].value})}),(0,e.jsx)("li",{children:(0,e.jsx)(o.rU,{to:"/development/client/ui-schema/what-is-ui-schema#x-component-props-and-x-use-component-props",children:a.texts[41].value})}),(0,e.jsx)("li",{children:(0,e.jsx)("a",{href:"https://client.docs.nocobase.com/core/ui-schema/designable#usefieldschema",children:a.texts[42].value})})]}),(0,e.jsxs)("p",{children:[a.texts[43].value,(0,e.jsx)("code",{children:a.texts[44].value}),a.texts[45].value]}),(0,e.jsx)(t.Z,{lang:"tsx",children:a.texts[46].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[a.texts[47].value,(0,e.jsx)("code",{children:a.texts[48].value}),a.texts[49].value,(0,e.jsx)("code",{children:a.texts[50].value}),a.texts[51].value]}),(0,e.jsxs)("li",{children:[a.texts[52].value,(0,e.jsx)("code",{children:a.texts[53].value}),a.texts[54].value,(0,e.jsx)("code",{children:a.texts[55].value}),a.texts[56].value,(0,e.jsx)("code",{children:a.texts[57].value}),a.texts[58].value,(0,e.jsx)("code",{children:a.texts[59].value}),a.texts[60].value,(0,e.jsx)("code",{children:a.texts[61].value}),a.texts[62].value]}),(0,e.jsxs)("li",{children:[a.texts[63].value,(0,e.jsx)("code",{children:a.texts[64].value}),a.texts[65].value,(0,e.jsx)("code",{children:a.texts[66].value}),a.texts[67].value,(0,e.jsx)("code",{children:a.texts[68].value}),a.texts[69].value,(0,e.jsx)("code",{children:a.texts[70].value}),a.texts[71].value,(0,e.jsx)("code",{children:a.texts[72].value}),a.texts[73].value]})]}),(0,e.jsxs)("p",{children:[a.texts[74].value,(0,e.jsx)("a",{href:"http://localhost:13000/admin/custom-page2",children:a.texts[75].value}),a.texts[76].value,(0,e.jsx)("code",{children:a.texts[77].value}),a.texts[78].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/img_v3_02av_e8d4d0c7-7a59-4f9e-a120-a2551e719ebg.jpg",alt:"img_v3_02av_e8d4d0c7-7a59-4f9e-a120-a2551e719ebg"})}),(0,e.jsx)("hr",{}),(0,e.jsxs)("h1",{id:"packaging-and-uploading-to-production",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#packaging-and-uploading-to-production",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Packaging and Uploading to Production"]}),(0,e.jsxs)("p",{children:[a.texts[79].value,(0,e.jsx)(o.rU,{to:"/development/your-first-plugin#building-and-packaging-plugins",children:a.texts[80].value}),a.texts[81].value]}),(0,e.jsx)("p",{children:a.texts[82].value}),(0,e.jsx)(t.Z,{lang:"bash",children:a.texts[83].value}),(0,e.jsxs)("p",{children:[a.texts[84].value,(0,e.jsx)("code",{children:a.texts[85].value}),a.texts[86].value]}),(0,e.jsx)(t.Z,{lang:"bash",children:a.texts[87].value}),(0,e.jsxs)("p",{children:[a.texts[88].value,(0,e.jsx)("code",{children:a.texts[89].value}),a.texts[90].value,(0,e.jsx)(o.rU,{to:"/welcome/getting-started/plugin",children:a.texts[91].value}),a.texts[92].value]})]})})})})}s.default=r},273980:function(d,s,n){n.r(s),n.d(s,{texts:function(){return l}});const l=[{value:"The functionality to be implemented is similar to the ",paraId:0,tocIndex:1},{value:"Global Registration of Component and Scope",paraId:1,tocIndex:1},{value:" example, but this time, the component and scope will be registered within the plugin itself, instead of globally.",paraId:0,tocIndex:1},{value:"You can view the complete sample code for this document in ",paraId:2,tocIndex:1},{value:"plugin-samples",paraId:2,tocIndex:1},{value:".",paraId:2,tocIndex:1},{value:"Following the guide on ",paraId:3,tocIndex:2},{value:"Writing Your First Plugin",paraId:4,tocIndex:2},{value:", if you do not yet have a project, you can create one first. If you already have a project or have cloned the source code, you can skip this step.",paraId:3,tocIndex:2},{value:`yarn create nocobase-app my-nocobase-app -d postgres
cd my-nocobase-app
yarn install
yarn nocobase install
`,paraId:5,tocIndex:2},{value:"Next, initialize a plugin and add it to the system:",paraId:6,tocIndex:2},{value:`yarn pm create @nocobase-sample/plugin-component-and-scope-local
yarn pm enable @nocobase-sample/plugin-component-and-scope-local
`,paraId:7,tocIndex:2},{value:"Then, start the project:",paraId:8,tocIndex:2},{value:`yarn dev
`,paraId:9,tocIndex:2},{value:"After logging in, go to ",paraId:10,tocIndex:2},{value:"http://localhost:13000/admin/pm/list/local/",paraId:10,tocIndex:2},{value:" to confirm that the plugin has been installed and enabled.",paraId:10,tocIndex:2},{value:"Create a new file ",paraId:11,tocIndex:4},{value:"packages/plugins/@nocobase-sample/plugin-component-and-scope-local/src/client/CustomPage.tsx",paraId:11,tocIndex:4},{value:" with the following content:",paraId:11,tocIndex:4},{value:`import React from "react"

export const SamplesCustomPage = () => {
  return <div>TODO</div>
}
`,paraId:12,tocIndex:4},{value:"Component",paraId:13},{value:"For more details on custom page creation, refer to the ",paraId:14,tocIndex:5},{value:"Add New Page",paraId:15,tocIndex:5},{value:" guide.",paraId:14,tocIndex:5},{value:"Next, modify the file ",paraId:16,tocIndex:5},{value:"packages/plugins/@nocobase-sample/plugin-component-and-scope-local/src/index.ts",paraId:16,tocIndex:5},{value:" as follows:",paraId:16,tocIndex:5},{value:`import { Plugin } from '@nocobase/client';
import { SamplesCustomPage } from './CustomPage'

export class PluginComponentAndScopeLocalClient extends Plugin {
  async load() {
    this.app.router.add('admin.custom-page2', {
      path: '/admin/custom-page2',
      Component: SamplesCustomPage,
    })
  }
}

export default PluginComponentAndScopeLocalClient;
`,paraId:17,tocIndex:5},{value:"Unlike global registration, here we directly use the ",paraId:18,tocIndex:5},{value:"Component: SamplesCustomPage",paraId:18,tocIndex:5},{value:" instead of passing a string as the component type.",paraId:18,tocIndex:5},{value:"Next, go to ",paraId:19,tocIndex:5},{value:"http://localhost:13000/admin/custom-page2",paraId:19,tocIndex:5},{value:" to see the content of the ",paraId:19,tocIndex:5},{value:"SamplesCustomPage",paraId:19,tocIndex:5},{value:" component.",paraId:19,tocIndex:5},{value:"SchemaComponent",paraId:13},{value:"You\u2019ll need to understand the following concepts:",paraId:20,tocIndex:6},{value:"Schema Protocol",paraId:21,tocIndex:6},{value:"SchemaComponent",paraId:22,tocIndex:6},{value:"withDynamicSchemaProps",paraId:23,tocIndex:6},{value:"useFieldSchema()",paraId:22,tocIndex:6},{value:"Now, modify the file ",paraId:24,tocIndex:6},{value:"packages/plugins/@nocobase-sample/plugin-component-and-scope-local/src/client/CustomPage.tsx",paraId:24,tocIndex:6},{value:" as follows:",paraId:24,tocIndex:6},{value:`import { ISchema, SchemaComponent, withDynamicSchemaProps } from "@nocobase/client"
import { uid } from '@formily/shared'
import { useFieldSchema } from '@formily/react'
import React, { FC } from "react"

const SamplesHello: FC<{ name: string }> = withDynamicSchemaProps(({ name }) => {
  return <div>hello {name}</div>
})

const useSamplesHelloProps = () => {
  const schema = useFieldSchema();
  return { name: schema.name }
}

const schema: ISchema = {
  type: 'void',
  name: uid(),
  properties: {
    demo1: {
      type: 'void',
      'x-component': SamplesHello,
      'x-component-props': {
        name: 'demo1',
      },
    },
    demo2: {
      type: 'void',
      'x-component': SamplesHello,
      'x-use-component-props': useSamplesHelloProps,
    },
    demo3: {
      type: 'void',
      'x-component': 'SamplesHello',
      'x-component-props': {
        name: 'demo3',
      },
    },
    demo4: {
      type: 'void',
      'x-component': 'SamplesHello',
      'x-use-component-props': 'useSamplesHelloProps',
    },
  }
}

export const SamplesCustomPage = () => {
  return <SchemaComponent schema={schema} components={{ SamplesHello }} scope={{ useSamplesHelloProps }}></SchemaComponent>
}
`,paraId:25,tocIndex:6},{value:"We defined the ",paraId:26,tocIndex:6},{value:"SamplesHello",paraId:26,tocIndex:6},{value:" and ",paraId:26,tocIndex:6},{value:"useSamplesHelloProps",paraId:26,tocIndex:6},{value:" components.",paraId:26,tocIndex:6},{value:"Then, we created a ",paraId:26,tocIndex:6},{value:"schema",paraId:26,tocIndex:6},{value:" object where the ",paraId:26,tocIndex:6},{value:"demo1",paraId:26,tocIndex:6},{value:" and ",paraId:26,tocIndex:6},{value:"demo2",paraId:26,tocIndex:6},{value:" fields use corresponding components and scope, while the ",paraId:26,tocIndex:6},{value:"demo3",paraId:26,tocIndex:6},{value:" and ",paraId:26,tocIndex:6},{value:"demo4",paraId:26,tocIndex:6},{value:" fields use string-type components and scope.",paraId:26,tocIndex:6},{value:"Finally, we used the ",paraId:26,tocIndex:6},{value:"SchemaComponent",paraId:26,tocIndex:6},{value:"'s ",paraId:26,tocIndex:6},{value:"components",paraId:26,tocIndex:6},{value:" and ",paraId:26,tocIndex:6},{value:"scope",paraId:26,tocIndex:6},{value:" attributes to locally register ",paraId:26,tocIndex:6},{value:"SamplesHello",paraId:26,tocIndex:6},{value:" and ",paraId:26,tocIndex:6},{value:"useSamplesHelloProps",paraId:26,tocIndex:6},{value:".",paraId:26,tocIndex:6},{value:"Visit ",paraId:27,tocIndex:6},{value:"http://localhost:13000/admin/custom-page2",paraId:27,tocIndex:6},{value:" to see the content of the ",paraId:27,tocIndex:6},{value:"CustomPage",paraId:27,tocIndex:6},{value:" component.",paraId:27,tocIndex:6},{value:"Following the guide on ",paraId:28,tocIndex:7},{value:"Building and Packaging Plugins",paraId:29,tocIndex:7},{value:", you can package the plugin and upload it to the production environment.",paraId:28,tocIndex:7},{value:"If you cloned the source code, you need to perform a full build to package the plugin's dependencies:",paraId:30,tocIndex:7},{value:`yarn build
`,paraId:31,tocIndex:7},{value:"If you used ",paraId:32,tocIndex:7},{value:"create-nocobase-app",paraId:32,tocIndex:7},{value:" to create the project, simply run:",paraId:32,tocIndex:7},{value:`yarn build @nocobase-sample/plugin-component-and-scope-local --tar
`,paraId:33,tocIndex:7},{value:"This will generate the file ",paraId:34,tocIndex:7},{value:"storage/tar/@nocobase-sample/plugin-component-and-scope-local.tar.gz",paraId:34,tocIndex:7},{value:", which you can then upload using the ",paraId:34,tocIndex:7},{value:"plugin upload method",paraId:35,tocIndex:7},{value:".",paraId:34,tocIndex:7}]}}]);
