"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[41624],{813221:function(n,d,s){s.r(d);var a=s(572269),u=s(793359),_=s(861788),h=s(719977),v=s(20190),l=s(24268),r=s(496057),I=s(585939),p=s(28484),j=s(635206),m=s(375553),g=s(156266),E=s(572333),P=s(841118),M=s(39297),f=s(868526),D=s(605019),i=s(614651),o=s(280936),c=s(667294),t=s(619211),e=s(785893);function x(){return(0,e.jsx)(i.dY,{children:(0,e.jsx)(c.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"overview",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#overview",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Overview"]}),(0,e.jsx)("p",{children:t.texts[0].value}),(0,e.jsx)(l.Z,{lang:"bash",children:t.texts[1].value}),(0,e.jsxs)("h2",{id:"plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Plugin"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:t.texts[2].value}),t.texts[3].value]}),(0,e.jsx)(l.Z,{lang:"ts",children:t.texts[4].value}),(0,e.jsxs)("h2",{id:"plugin-lifecycle",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#plugin-lifecycle",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Plugin Lifecycle"]}),(0,e.jsx)("img",{alt:"Plugin Lifecycle",style:{width:"320px"},src:s(222483)}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[t.texts[5].value,(0,e.jsx)("code",{children:t.texts[6].value}),t.texts[7].value,(0,e.jsx)("code",{children:t.texts[8].value}),t.texts[9].value]}),(0,e.jsxs)("li",{children:[t.texts[10].value,(0,e.jsx)("code",{children:t.texts[11].value}),t.texts[12].value,(0,e.jsx)("code",{children:t.texts[13].value}),t.texts[14].value]}),(0,e.jsxs)("li",{children:[t.texts[15].value,(0,e.jsx)("code",{children:t.texts[16].value}),t.texts[17].value,(0,e.jsx)("code",{children:t.texts[18].value}),t.texts[19].value]})]}),(0,e.jsxs)("h2",{id:"common-properties-and-methods-in-the-plugin-class",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#common-properties-and-methods-in-the-plugin-class",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Common Properties and Methods in the Plugin Class"]}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[20].value}),(0,e.jsx)("th",{children:t.texts[21].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[22].value}),(0,e.jsx)("td",{children:t.texts[23].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[24].value}),(0,e.jsx)("td",{children:t.texts[25].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[26].value}),(0,e.jsx)("td",{children:t.texts[27].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[28].value}),(0,e.jsx)("td",{children:t.texts[29].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[30].value}),(0,e.jsx)("td",{children:t.texts[31].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[32].value}),(0,e.jsx)("td",{children:t.texts[33].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[34].value}),(0,e.jsx)("td",{children:t.texts[35].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[36].value}),(0,e.jsx)("td",{children:t.texts[37].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[38].value}),(0,e.jsx)("td",{children:t.texts[39].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[40].value}),(0,e.jsx)("td",{children:t.texts[41].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[42].value}),(0,e.jsx)("td",{children:t.texts[43].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[44].value}),(0,e.jsx)("td",{children:t.texts[45].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[46].value}),(0,e.jsx)("td",{children:t.texts[47].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[48].value}),(0,e.jsx)("td",{children:t.texts[49].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[50].value}),(0,e.jsx)("td",{children:t.texts[51].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[52].value}),(0,e.jsx)("td",{children:t.texts[53].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[54].value}),(0,e.jsx)("td",{children:t.texts[55].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[56].value}),(0,e.jsx)("td",{children:t.texts[57].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[58].value}),(0,e.jsx)("td",{children:t.texts[59].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[60].value}),(0,e.jsx)("td",{children:t.texts[61].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[62].value}),(0,e.jsx)("td",{children:t.texts[63].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[64].value}),(0,e.jsx)("td",{children:t.texts[65].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[66].value}),(0,e.jsx)("td",{children:t.texts[67].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[68].value}),(0,e.jsx)("td",{children:t.texts[69].value})]})]})]})]})})})})}d.default=x},619211:function(n,d,s){s.r(d),s.d(d,{texts:function(){return a}});const a=[{value:"The directory structure related to the server side of an initialized empty plugin is as follows:",paraId:0,tocIndex:0},{value:`|- /plugin-sample-hello
  |- /src
    |- /server      # Plugin server-side code
      |- plugin.ts  # Plugin class
      |- index.ts   # Server-side entry point
  |- server.d.ts
  |- server.js
`,paraId:1,tocIndex:0},{value:"plugin.ts",paraId:2,tocIndex:1},{value:" facilitates the invocation of various methods across the plugin lifecycle.",paraId:2,tocIndex:1},{value:`import { InstallOptions, Plugin } from '@nocobase/server';

export class PluginSampleHelloServer extends Plugin {
  afterAdd() {
    // After the plugin is registered with pm.add. Mainly used for placing listeners for the app beforeLoad event
    this.app.on('beforeLoad');
  }
  beforeLoad() {
    // Customize classes or methods
    this.db.registerFieldTypes();
    this.db.registerModels();
    this.db.registerRepositories();
    this.db.registerOperators();
    // Event listeners
    this.app.on();
    this.db.on();
  }
  async load() {
    // Define collection
    this.db.collection();
    // Import collection configurations
    this.db.import();
    this.db.addMigrations();

    // Define resource
    this.resourcer.define();
    // Register resource actions
    this.resourcer.registerActions();

    // Register middleware
    this.resourcer.use();
    this.acl.use();
    this.app.use();

    this.app.i18n;
    // Custom commands
    this.app.command();
  }
  async install(options?: InstallOptions) {
    // Installation logic
  }
  async afterEnable() {
    // After activation
  }
  async afterDisable() {
    // After deactivation
  }
  async remove() {
    // Deletion logic
  }
}

export default MyPlugin;
`,paraId:3,tocIndex:1},{value:"After the plugin is initialized, ",paraId:4,tocIndex:2},{value:"afterAdd",paraId:4,tocIndex:2},{value:" is triggered. In ",paraId:4,tocIndex:2},{value:"afterAdd",paraId:4,tocIndex:2},{value:", not all other plugins might have been instantiated.",paraId:4,tocIndex:2},{value:"In ",paraId:4,tocIndex:2},{value:"beforeLoad",paraId:4,tocIndex:2},{value:", all activated plugins have been instantiated, and their instances can be retrieved via ",paraId:4,tocIndex:2},{value:"app.pluginManager.get()",paraId:4,tocIndex:2},{value:".",paraId:4,tocIndex:2},{value:"In ",paraId:4,tocIndex:2},{value:"load",paraId:4,tocIndex:2},{value:", the ",paraId:4,tocIndex:2},{value:"beforeLoad",paraId:4,tocIndex:2},{value:" method of all plugins has been executed.",paraId:4,tocIndex:2},{value:"API",paraId:5,tocIndex:3},{value:"Tutorial",paraId:5,tocIndex:3},{value:"this.name",paraId:5,tocIndex:3},{value:"Plugin name",paraId:5,tocIndex:3},{value:"this.enabled",paraId:5,tocIndex:3},{value:"Activated",paraId:5,tocIndex:3},{value:"this.installed",paraId:5,tocIndex:3},{value:"Installed",paraId:5,tocIndex:3},{value:"this.app",paraId:5,tocIndex:3},{value:"Application instance",paraId:5,tocIndex:3},{value:"this.pm",paraId:5,tocIndex:3},{value:"Plugin manager instance",paraId:5,tocIndex:3},{value:"this.db",paraId:5,tocIndex:3},{value:"Database instance",paraId:5,tocIndex:3},{value:"this.resourcer",paraId:5,tocIndex:3},{value:"Resource manager",paraId:5,tocIndex:3},{value:"this.acl",paraId:5,tocIndex:3},{value:"Access control",paraId:5,tocIndex:3},{value:"this.log",paraId:5,tocIndex:3},{value:"Logging",paraId:5,tocIndex:3},{value:"this.app.i18n",paraId:5,tocIndex:3},{value:"Internationalization",paraId:5,tocIndex:3},{value:"this.db.registerFieldTypes()",paraId:5,tocIndex:3},{value:"Register field types",paraId:5,tocIndex:3},{value:"this.db.registerModels()",paraId:5,tocIndex:3},{value:"Register Models",paraId:5,tocIndex:3},{value:"this.db.registerRepositories()",paraId:5,tocIndex:3},{value:"Register Repositories",paraId:5,tocIndex:3},{value:"this.db.registerOperators()",paraId:5,tocIndex:3},{value:"Register custom operators",paraId:5,tocIndex:3},{value:"this.app.on()",paraId:5,tocIndex:3},{value:"Application events",paraId:5,tocIndex:3},{value:"this.db.on()",paraId:5,tocIndex:3},{value:"Database events",paraId:5,tocIndex:3},{value:"this.db.collection()",paraId:5,tocIndex:3},{value:"Configure data tables",paraId:5,tocIndex:3},{value:"this.db.import()",paraId:5,tocIndex:3},{value:"Import data table configurations",paraId:5,tocIndex:3},{value:"this.db.addMigrations()",paraId:5,tocIndex:3},{value:"Migrations",paraId:5,tocIndex:3},{value:"this.resourcer.registerActions()",paraId:5,tocIndex:3},{value:"Register resource actions",paraId:5,tocIndex:3},{value:"this.resourcer.use()",paraId:5,tocIndex:3},{value:"Middleware",paraId:5,tocIndex:3},{value:"this.acl.use()",paraId:5,tocIndex:3},{value:"Middleware",paraId:5,tocIndex:3},{value:"this.app.use()",paraId:5,tocIndex:3},{value:"Middleware",paraId:5,tocIndex:3},{value:"this.app.command()",paraId:5,tocIndex:3},{value:"Command line",paraId:5,tocIndex:3}]},222483:function(n,d,s){n.exports=s.p+"static/image.67961b7f.png"}}]);
