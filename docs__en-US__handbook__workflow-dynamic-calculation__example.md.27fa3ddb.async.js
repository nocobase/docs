"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[82149],{260873:function(_,n,t){t.r(n);var d=t(572269),c=t(793359),u=t(861788),s=t(719977),h=t(20190),x=t(24268),m=t(496057),P=t(585939),p=t(28484),v=t(635206),I=t(375553),E=t(156266),j=t(572333),f=t(841118),D=t(39297),O=t(868526),C=t(605019),a=t(614651),l=t(280936),r=t(667294),o=t(289861),e=t(785893);function i(){return(0,e.jsx)(a.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(l.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"example",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example"]}),(0,e.jsx)("p",{children:o.texts[0].value}),(0,e.jsxs)("ol",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[1].value}),(0,e.jsxs)("p",{children:[o.texts[2].value,(0,e.jsx)("code",{children:o.texts[3].value}),o.texts[4].value]})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[5].value}),(0,e.jsx)("p",{children:o.texts[6].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[7].value}),(0,e.jsxs)("p",{children:[o.texts[8].value,(0,e.jsx)("code",{children:o.texts[9].value}),o.texts[10].value,(0,e.jsx)("code",{children:o.texts[11].value}),o.texts[12].value]})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[13].value}),(0,e.jsx)("p",{children:o.texts[14].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[15].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/f181f75b10007afd5de068f3458d2e04.png",alt:"Trigger_CreateOrder"})})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[16].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/21ccc63e604dd90b7d26c3c33c12d671.png",alt:"SelectDynamicExpressionData"})}),(0,e.jsx)("p",{children:o.texts[17].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/afbffe9661539d26e4b175ae8a4b28f7.png",alt:"SelectVariableDataSource"})})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[18].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/5cc7ffb113c8d6a2fd3b1b34abe06dcc.png",alt:"UpdateOrderData"})})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("p",{children:o.texts[19].value}),(0,e.jsx)("p",{children:o.texts[20].value}),(0,e.jsx)("p",{children:o.texts[21].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/a5610aca292e79c4841c97457bd3cc7c.png",alt:"OrderTotalPrice_AfterCreation"})}),(0,e.jsx)(s.Z,{type:"info",title:"Tip",children:(0,e.jsx)("p",{children:o.texts[22].value})})]})]})]})})})})}n.default=i},289861:function(_,n,t){t.r(n),t.d(n,{texts:function(){return d}});const d=[{value:"Following the configuration steps outlined above, let's illustrate how to calculate the final price for different products by applying various Price Rules during the order placement process.",paraId:0,tocIndex:0},{value:"Set Up the Product Collection:",paraId:1,tocIndex:0},{value:`| Field Name     | Type                   |
| -------------- | ---------------------- |
| Product Name   | Text                   |
| Price | Number                 |
| Price Rule  | `,paraId:2,tocIndex:0},{value:"belongsTo",paraId:2,tocIndex:0},{value:" (Price Rule Collection) |",paraId:2,tocIndex:0},{value:"Set Up the Price Rule Collection (using the expression Collection template):",paraId:3,tocIndex:0},{value:`| Field Name      | Type                        |
| --------------- | --------------------------- |
| Rule Name       | Text                        |
| Collection      | Single Select (Data Collection)   |
| Calculation Engine | Single Select (mathjs/formulajs) |
| Expression      | Text                        |`,paraId:4,tocIndex:0},{value:"Input Price Rules:",paraId:5,tocIndex:0},{value:`| ID  | Name    | Collection | Calculation Engine | Expression                |
| --- |---------| ---------- | ------------------ | ------------------------- |
| 1   | 80% off | Product    | formula.js         | `,paraId:6,tocIndex:0},{value:"{{Product.Price}} * 0.8",paraId:6,tocIndex:0},{value:` |
| 2   | 90% off | Product    | formula.js         | `,paraId:6,tocIndex:0},{value:"{{Product.Price}} * 0.9",paraId:6,tocIndex:0},{value:" |",paraId:6,tocIndex:0},{value:"Create Products and Assign Price Rules:",paraId:7,tocIndex:0},{value:`| ID  | Product Name  | Price | Price Rule |
| --- | ------------- | ----- | ------------- |
| 1   | iPhone 14 Pro | 7999  | 2             |
| 2   | iPhone 13 Pro | 6999  | 1             |`,paraId:8,tocIndex:0},{value:"Set Up a Workflow Triggered by Order Creation:",paraId:9,tocIndex:0},{value:"Create a Dynamic Expression Calculation Node and Configure it Using Trigger Data/Product/Price Rule:",paraId:10,tocIndex:0},{value:"Set the variable data source to the product in the trigger data:",paraId:11,tocIndex:0},{value:"Add a Data Update Node to Update the Order Total Price with the Result from the Calculation Node:",paraId:12,tocIndex:0},{value:"Trigger the Workflow Upon Order Creation and Verify the Prices in the Order List:",paraId:13,tocIndex:0},{value:`| Order Product    | Price | Price Rule     | Total Price          |
| ---------------- | -------------- |----------------|----------------------|
| iPhone 14 Pro    | 7999           | Rule1: 90% off | 7999 * 0.9 = 7199.1 |
| iPhone 13 Pro    | 6999           | Rule2: 80% off | 6999 * 0.8 = 5599.2 |`,paraId:14,tocIndex:0},{value:"The final price displayed in the image below should match the calculated price in the Collection above:",paraId:15,tocIndex:0},{value:"Since the workflow operates asynchronously, the total price might not be immediately reflected in the Collection after the order is created. You may need to wait a moment before refreshing the page to see the updated total price.",paraId:16,tocIndex:0}]}}]);
