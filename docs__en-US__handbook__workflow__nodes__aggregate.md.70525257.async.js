"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[37992],{545630:function(i,n,a){a.r(n);var s=a(572269),h=a(793359),x=a(861788),o=a(719977),g=a(20190),m=a(24268),d=a(496057),I=a(585939),v=a(28484),f=a(635206),j=a(375553),p=a(156266),E=a(572333),r=a(841118),M=a(39297),P=a(868526),b=a(605019),l=a(614651),c=a(280936),_=a(667294),t=a(259369),e=a(785893);function u(){return(0,e.jsx)(l.dY,{children:(0,e.jsx)(_.Suspense,{fallback:(0,e.jsx)(c.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h1",{id:"aggregate-query",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#aggregate-query",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Aggregate Query"]})}),(0,e.jsx)(r.Z,{name:"workflow-aggregate",link:"/handbook/workflow-aggregate"}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsx)("p",{children:t.texts[0].value}),(0,e.jsx)("p",{children:t.texts[1].value}),(0,e.jsxs)("h2",{id:"installation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#installation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Installation"]}),(0,e.jsx)("p",{children:t.texts[2].value}),(0,e.jsxs)("h2",{id:"user-manual",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#user-manual",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"User Manual"]}),(0,e.jsxs)("h3",{id:"creating-a-node",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-node",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Creating a Node"]}),(0,e.jsx)("p",{children:t.texts[3].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/7f9d806ebf5064f80c30f8b67f316f0f.png",alt:"Create Aggregate Query Node"})}),(0,e.jsxs)("h3",{id:"node-configuration",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-configuration",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Node Configuration"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/57362f747b9992230567c6bb5e986fd2.png",alt:"Aggregate Query Node_Configuration"})}),(0,e.jsxs)("h4",{id:"aggregate-functions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#aggregate-functions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Aggregate Functions"]}),(0,e.jsxs)("p",{children:[t.texts[4].value,(0,e.jsx)("code",{children:t.texts[5].value}),t.texts[6].value,(0,e.jsx)("code",{children:t.texts[7].value}),t.texts[8].value,(0,e.jsx)("code",{children:t.texts[9].value}),t.texts[10].value,(0,e.jsx)("code",{children:t.texts[11].value}),t.texts[12].value,(0,e.jsx)("code",{children:t.texts[13].value}),t.texts[14].value]}),(0,e.jsxs)("h4",{id:"target-type",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#target-type",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Target Type"]}),(0,e.jsx)("p",{children:t.texts[15].value}),(0,e.jsxs)("h4",{id:"distinct",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#distinct",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Distinct"]}),(0,e.jsxs)("p",{children:[t.texts[16].value,(0,e.jsx)("code",{children:t.texts[17].value}),t.texts[18].value]}),(0,e.jsxs)("h4",{id:"filter-conditions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#filter-conditions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Filter Conditions"]}),(0,e.jsx)("p",{children:t.texts[19].value}),(0,e.jsxs)("h3",{id:"example",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example"]}),(0,e.jsx)("p",{children:t.texts[20].value}),(0,e.jsx)("p",{children:t.texts[21].value}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[22].value}),(0,e.jsx)("th",{children:t.texts[23].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[24].value}),(0,e.jsx)("td",{children:t.texts[25].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[26].value}),(0,e.jsx)("td",{children:t.texts[27].value})]})]})]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[28].value}),(0,e.jsx)("th",{children:t.texts[29].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[30].value}),(0,e.jsx)("td",{children:t.texts[31].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[32].value}),(0,e.jsx)("td",{children:t.texts[33].value})]})]})]}),(0,e.jsx)("p",{children:t.texts[34].value}),(0,e.jsx)("p",{children:t.texts[35].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/542272e638c6c0a567373d1b37ddda78.png",alt:"Aggregate Query Node_Example_Configuration"})}),(0,e.jsx)("p",{children:t.texts[36].value})]}),(0,e.jsx)(o.Z,{type:"info",title:"Tip",children:(0,e.jsx)("p",{children:t.texts[37].value})})]})})})}n.default=u},259369:function(i,n,a){a.r(n),a.d(n,{texts:function(){return s}});const s=[{value:"This plugin is designed to execute aggregate function queries on specific data within a table that meets defined conditions, returning the relevant statistical outcomes. It is particularly useful for generating statistical data for reports.",paraId:0},{value:"The node operates using database aggregate functions and currently supports querying a single field within a single data table. The resulting statistics are stored within the node\u2019s output, making them available for subsequent nodes in the workflow.",paraId:1},{value:"This is a built-in plugin, so no installation steps are required.",paraId:2,tocIndex:1},{value:'In the workflow configuration interface, click the plus ("+") button within the process flow to add an "Aggregate Query" node:',paraId:3,tocIndex:3},{value:"This plugin supports five SQL aggregate functions: ",paraId:4,tocIndex:5},{value:"COUNT",paraId:4,tocIndex:5},{value:", ",paraId:4,tocIndex:5},{value:"SUM",paraId:4,tocIndex:5},{value:", ",paraId:4,tocIndex:5},{value:"AVG",paraId:4,tocIndex:5},{value:", ",paraId:4,tocIndex:5},{value:"MIN",paraId:4,tocIndex:5},{value:", and ",paraId:4,tocIndex:5},{value:"MAX",paraId:4,tocIndex:5},{value:". You can select any one of these functions to perform the aggregate query on your data.",paraId:4,tocIndex:5},{value:"There are two methods for selecting the target of the aggregate query. The first is to directly select the target data table and one of its fields. The second is to choose a related data table and field from the existing data objects in the workflow context to perform the aggregate query.",paraId:5,tocIndex:6},{value:"This feature corresponds to the ",paraId:6,tocIndex:7},{value:"DISTINCT",paraId:6,tocIndex:7},{value:" keyword in SQL. The distinct field must be the same as the selected data table field, and currently, different fields cannot be selected for the distinct and target fields.",paraId:6,tocIndex:7},{value:"You can apply filter conditions similar to those in a standard data table query, using the workflow\u2019s context variables.",paraId:7,tocIndex:8},{value:`The aggregate target "Collection Table Data" is quite intuitive, so let's illustrate the usage of the aggregate target as "Related Collection Table Data" with the example of "counting the total number of articles in a category after adding a new article to that category."`,paraId:8,tocIndex:9},{value:'First, create two data tables: "Posts" and "Categories." The "Posts" collection includes a many-to-one relationship field pointing to the "Categories" collection, and a reverse relationship field that allows one category to contain multiple articles:',paraId:9,tocIndex:9},{value:"Field Name",paraId:10,tocIndex:9},{value:"Type",paraId:10,tocIndex:9},{value:"Title",paraId:10,tocIndex:9},{value:"Single Line Text",paraId:10,tocIndex:9},{value:"Category",paraId:10,tocIndex:9},{value:"Many-to-One (Category)",paraId:10,tocIndex:9},{value:"Field Name",paraId:11,tocIndex:9},{value:"Type",paraId:11,tocIndex:9},{value:"Category Name",paraId:11,tocIndex:9},{value:"Single Line Text",paraId:11,tocIndex:9},{value:"Posts",paraId:11,tocIndex:9},{value:"One-to-Many (Articles)",paraId:11,tocIndex:9},{value:'Next, create a workflow triggered by an event in the data table, specifically when new data is added to the "Articles" table.',paraId:12,tocIndex:9},{value:"Then, add an aggregate query node with the following configuration:",paraId:13,tocIndex:9},{value:"Once the workflow is triggered, the aggregate query node will calculate the total number of articles within the category of the newly added article and save this count as the node\u2019s output.",paraId:14,tocIndex:9},{value:'If you need to access related data in a collection table event trigger, ensure you configure the relevant fields for "Preload associations" in the trigger; otherwise, these fields won\u2019t be selectable.',paraId:15}]}}]);
