"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[53273],{788851:function(l,a,n){n.r(a);var d=n(572269),x=n(793359),h=n(861788),_=n(719977),v=n(20190),s=n(24268),r=n(496057),I=n(585939),p=n(28484),m=n(635206),j=n(375553),g=n(156266),f=n(572333),E=n(841118),b=n(39297),w=n(868526),y=n(605019),i=n(614651),o=n(280936),c=n(667294),t=n(812872),e=n(785893);function u(){return(0,e.jsx)(i.dY,{children:(0,e.jsx)(c.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"v0182023-12-21",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#v0182023-12-21",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"v0.18\uFF1A2023-12-21"]}),(0,e.jsxs)("h2",{id:"new-features",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#new-features",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"New Features"]}),(0,e.jsx)("p",{children:t.texts[0].value}),(0,e.jsxs)("h3",{id:"nocobasetest",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#nocobasetest",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"@nocobase/test"]}),(0,e.jsx)("p",{children:t.texts[1].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[2].value}),t.texts[3].value,(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[t.texts[4].value,(0,e.jsx)("code",{children:t.texts[5].value}),t.texts[6].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[7].value}),t.texts[8].value,(0,e.jsx)("code",{children:t.texts[9].value}),t.texts[10].value]})]})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[11].value}),t.texts[12].value,(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[13].value}),t.texts[14].value,(0,e.jsx)("code",{children:t.texts[15].value}),t.texts[16].value]})})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:t.texts[17].value}),t.texts[18].value,(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[t.texts[19].value,(0,e.jsx)("code",{children:t.texts[20].value}),t.texts[21].value]}),(0,e.jsx)("li",{children:t.texts[22].value})]})]})]}),(0,e.jsxs)("h3",{id:"testing-framework",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#testing-framework",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Testing framework"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:t.texts[23].value}),(0,e.jsx)("li",{children:t.texts[24].value}),(0,e.jsx)("li",{children:t.texts[25].value})]}),(0,e.jsxs)("h3",{id:"writing-tests",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#writing-tests",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Writing tests"]}),(0,e.jsxs)("h4",{id:"server-side-testing",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#server-side-testing",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Server-side testing"]}),(0,e.jsx)(s.Z,{lang:"typescript",children:t.texts[26].value}),(0,e.jsxs)("h4",{id:"client-side-testing",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#client-side-testing",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Client-side testing"]}),(0,e.jsx)(s.Z,{lang:"typescript",children:t.texts[27].value}),(0,e.jsxs)("h4",{id:"e2e-testing",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#e2e-testing",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"E2E testing"]}),(0,e.jsx)(s.Z,{lang:"typescript",children:t.texts[28].value}),(0,e.jsxs)("h3",{id:"run-the-vitest-test",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#run-the-vitest-test",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Run the Vitest test"]}),(0,e.jsx)(s.Z,{lang:"bash",children:t.texts[29].value}),(0,e.jsx)("p",{children:t.texts[30].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[t.texts[31].value,(0,e.jsx)("code",{children:t.texts[32].value}),t.texts[33].value]}),(0,e.jsxs)("li",{children:[t.texts[34].value,(0,e.jsx)("code",{children:t.texts[35].value}),t.texts[36].value,(0,e.jsx)("code",{children:t.texts[37].value}),t.texts[38].value]}),(0,e.jsxs)("li",{children:[t.texts[39].value,(0,e.jsx)("code",{children:t.texts[40].value}),t.texts[41].value,(0,e.jsx)("code",{children:t.texts[42].value}),t.texts[43].value]})]}),(0,e.jsxs)("h3",{id:"run-the-playwright-test",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#run-the-playwright-test",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Run the Playwright test"]}),(0,e.jsx)(s.Z,{lang:"bash",children:t.texts[44].value}),(0,e.jsxs)("h2",{id:"other-changes",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#other-changes",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Other changes"]}),(0,e.jsxs)("h3",{id:"optimization-of-auth-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#optimization-of-auth-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Optimization of auth plugin"]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[t.texts[45].value,(0,e.jsx)("a",{href:"https://docs.nocobase.com/plugins/auth/dev/guide",children:t.texts[46].value})]}),(0,e.jsxs)("li",{children:[t.texts[47].value,(0,e.jsx)("a",{href:"https://docs.nocobase.com/breaking-changes/v0-18-0-alpha-1",children:t.texts[48].value})]})]}),(0,e.jsxs)("h3",{id:"modular-decomposition-into-plugins",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#modular-decomposition-into-plugins",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Modular decomposition into plugins"]}),(0,e.jsx)("p",{children:t.texts[49].value}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[50].value}),(0,e.jsx)("th",{children:t.texts[51].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[52].value}),(0,e.jsx)("td",{children:t.texts[53].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[54].value}),(0,e.jsx)("td",{children:t.texts[55].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[56].value}),(0,e.jsx)("td",{children:t.texts[57].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[58].value}),(0,e.jsx)("td",{children:t.texts[59].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[60].value}),(0,e.jsx)("td",{children:t.texts[61].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[62].value}),(0,e.jsx)("td",{children:t.texts[63].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[64].value}),(0,e.jsx)("td",{children:t.texts[65].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[66].value}),(0,e.jsx)("td",{children:t.texts[67].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[68].value}),(0,e.jsx)("td",{children:t.texts[69].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[70].value}),(0,e.jsx)("td",{children:t.texts[71].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[72].value}),(0,e.jsx)("td",{children:t.texts[73].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[74].value}),(0,e.jsx)("td",{children:t.texts[75].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[76].value}),(0,e.jsx)("td",{children:t.texts[77].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[78].value}),(0,e.jsx)("td",{children:t.texts[79].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[80].value}),(0,e.jsx)("td",{children:t.texts[81].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[82].value}),(0,e.jsx)("td",{children:t.texts[83].value})]})]})]}),(0,e.jsxs)("p",{children:[t.texts[84].value,(0,e.jsx)("a",{href:"https://docs.nocobase.com/plugins",children:t.texts[85].value}),t.texts[86].value,(0,e.jsx)("a",{href:"https://github.com/nocobase/docs",children:t.texts[87].value}),t.texts[88].value]})]})})})})}a.default=u},812872:function(l,a,n){n.r(a),n.d(a,{texts:function(){return d}});const d=[{value:"To enhance the robustness of NocoBase, we have been supplementing E2E (end-to-end) testing throughout the fourth quarter. Concurrently, we have also been refining the entire testing system.",paraId:0,tocIndex:1},{value:"NocoBase test kit, include:",paraId:1,tocIndex:2},{value:"@nocobase/test/server",paraId:2,tocIndex:2},{value:` server-side testing
`,paraId:2,tocIndex:2},{value:"Integrated ",paraId:3,tocIndex:2},{value:"supertest",paraId:3,tocIndex:2},{value:" for interface testing.",paraId:3,tocIndex:2},{value:"mockDatabase",paraId:3,tocIndex:2},{value:" and ",paraId:3,tocIndex:2},{value:"mockServer",paraId:3,tocIndex:2},{value:" are built in.",paraId:3,tocIndex:2},{value:"@nocobase/test/client",paraId:2,tocIndex:2},{value:` Client-side testing
`,paraId:2,tocIndex:2},{value:"@testing-library/react",paraId:4,tocIndex:2},{value:" and ",paraId:4,tocIndex:2},{value:"@testing-library/user-event",paraId:4,tocIndex:2},{value:" are integrated.",paraId:4,tocIndex:2},{value:"@nocobase/test/e2e",paraId:2,tocIndex:2},{value:` E2E testing
`,paraId:2,tocIndex:2},{value:"Integration of ",paraId:5,tocIndex:2},{value:"@playwright/test",paraId:5,tocIndex:2},{value:".",paraId:5,tocIndex:2},{value:"Built-in common mock methods",paraId:5,tocIndex:2},{value:"Server-side testing, using the Vitest framework",paraId:6,tocIndex:3},{value:"Client-side testing, using the Vitest framework",paraId:6,tocIndex:3},{value:"E2E testing, using the Playwright framework",paraId:6,tocIndex:3},{value:`import { mockDatabase } from '@nocobase/test/server';

describe('my db suite', () => {
  let db;

  beforeEach(async () => {
    db = mockDatabase();
    db.collection({
      name: 'posts',
      fields: [
        {
          type: 'string',
          name: 'title',
        },
      ],
    });
    await db.sync();
  });

  afterEach(async () => {
    await db.close();
  });

  test('my case', async () => {
    const repository = db.getRepository('posts');
    const post = await repository.create({
      values: {
        title: 'hello',
      },
    });

    expect(post.get('title')).toEqual('hello');
  });
});
`,paraId:7,tocIndex:5},{value:`import { render, screen, userEvent, waitFor } from '@nocobase/test/client';

it('should display the value of user input', async () => {
  const { container } = render(<App1 />);
  const input = container.querySelector('input');
  await userEvent.type(input, 'Hello World');
  await waitFor(() => {
    expect(screen.getByText('Hello World')).toBeInTheDocument();
  });
});
`,paraId:8,tocIndex:6},{value:`import { test } from '@nocobase/test/e2e';

test('sign in', async ({ page }) => {
  await page.goto('/');
  await page.getByPlaceholder('Username/Email').click();
  await page.getByPlaceholder('Username/Email').fill('admin@nocobase.com');
  await page.getByPlaceholder('Password').click();
  await page.getByPlaceholder('Password').fill('admin123');
  await page.getByRole('button', { name: 'Sign in' }).click();
  await expect(
      page.getByTestId('user-center-button').getByText('Super Admin')
    ).toBeVisible();
});
`,paraId:9,tocIndex:7},{value:`# Run all tests with two parallel Vitest processes for both frontend and backend.
yarn test

# Run client test cases.
yarn test --client
# equal to
yarn cross-env TEST_ENV=client-side vitest

# Run server test cases.
yarn test --server
# equal to
yarn cross-env TEST_ENV=server-side vitest

# Specify a directory or file.
yarn test your/path/src/__tests__/test-file.test.ts
# Client-side files must include /client/ 
yarn test your/path/client/src/__tests__/test-file.test.ts
`,paraId:10,tocIndex:8},{value:"\u{1F4E2} Difference with running vitest directly",paraId:11,tocIndex:8},{value:"When you specify the path, you can automatically recognize the front-end and back-end, the front-end must include ",paraId:12,tocIndex:8},{value:"/client/",paraId:12,tocIndex:8},{value:".",paraId:12,tocIndex:8},{value:"Backend test is ",paraId:12,tocIndex:8},{value:"-single-thread",paraId:12,tocIndex:8},{value:" by default, if you want to turn it off, you can add ",paraId:12,tocIndex:8},{value:"-single-thread=false",paraId:12,tocIndex:8},{value:".",paraId:12,tocIndex:8},{value:"Default is ",paraId:12,tocIndex:8},{value:"--run",paraId:12,tocIndex:8},{value:", if you need to listen, add ",paraId:12,tocIndex:8},{value:"--watch",paraId:12,tocIndex:8},{value:".",paraId:12,tocIndex:8},{value:`# Install dependencies
yarn e2e install-deps

# Run tests
yarn e2e test

# UI mode
yarn e2e test --ui

# Specify the application's URL
yarn e2e test --url=http://localhost:20000

# Start an app. It reinstalls every time.
yarn e2e start-app
`,paraId:13,tocIndex:9},{value:"Auth extension development guide ",paraId:14,tocIndex:11},{value:"https://docs.nocobase.com/plugins/auth/dev/guide",paraId:14,tocIndex:11},{value:"Breaking changes ",paraId:14,tocIndex:11},{value:"https://docs.nocobase.com/breaking-changes/v0-18-0-alpha-1",paraId:14,tocIndex:11},{value:"In order to refine the kernel and make it more streamlined, certain functionalities have undergone a modularized separation. Recently, the plugins that have undergone this modularization include:",paraId:15,tocIndex:12},{value:"Plugin name",paraId:16,tocIndex:12},{value:"Package name",paraId:16,tocIndex:12},{value:"Action - Bulk edit",paraId:16,tocIndex:12},{value:"@nocobase/plugin-action-bulk-edit",paraId:16,tocIndex:12},{value:"Action - Bulk update",paraId:16,tocIndex:12},{value:"@nocobase/plugin-action-bulk-update",paraId:16,tocIndex:12},{value:"Action - Duplicate",paraId:16,tocIndex:12},{value:"@nocobase/plugin-action-duplicate",paraId:16,tocIndex:12},{value:"Kanban",paraId:16,tocIndex:12},{value:"@nocobase/plugin-kanban",paraId:16,tocIndex:12},{value:"Gantt",paraId:16,tocIndex:12},{value:"@nocobase/plugin-gantt",paraId:16,tocIndex:12},{value:"Workflow - Aggregate",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-aggregate",paraId:16,tocIndex:12},{value:"Workflow - Approval",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-approval",paraId:16,tocIndex:12},{value:"Workflow - Delay",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-delay",paraId:16,tocIndex:12},{value:"Workflow - Dynamic calculation",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-dynamic-calculation",paraId:16,tocIndex:12},{value:"Workflow - Form trigger",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-form-trigger",paraId:16,tocIndex:12},{value:"Workflow - JSON query",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-json-query",paraId:16,tocIndex:12},{value:"Workflow - Loop",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-loop",paraId:16,tocIndex:12},{value:"Workflow - Manual",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-manual",paraId:16,tocIndex:12},{value:"Workflow - Parallel",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-parallel",paraId:16,tocIndex:12},{value:"Workflow - Request",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-request",paraId:16,tocIndex:12},{value:"Workflow - SQL",paraId:16,tocIndex:12},{value:"@nocobase/plugin-workflow-sql",paraId:16,tocIndex:12},{value:"See ",paraId:17,tocIndex:12},{value:"complete list of plugins",paraId:17,tocIndex:12},{value:" for details. The document is currently under construction, with some content possibly missing or awaiting translation. You can follow ",paraId:17,tocIndex:12},{value:"nocobase/docs",paraId:17,tocIndex:12},{value:" for updates.",paraId:17,tocIndex:12}]}}]);
