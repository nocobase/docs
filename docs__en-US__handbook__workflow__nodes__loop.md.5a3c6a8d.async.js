"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[79240],{589702:function(s,n,a){a.r(n);var d=a(572269),h=a(793359),x=a(861788),_=a(719977),p=a(20190),v=a(24268),o=a(496057),I=a(585939),j=a(28484),m=a(635206),f=a(375553),g=a(156266),b=a(572333),l=a(841118),E=a(39297),y=a(868526),O=a(605019),i=a(614651),r=a(280936),c=a(667294),t=a(355151),e=a(785893);function u(){return(0,e.jsx)(i.dY,{children:(0,e.jsx)(c.Suspense,{fallback:(0,e.jsx)(r.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h1",{id:"loop",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#loop",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Loop"]})}),(0,e.jsx)(l.Z,{name:"workflow-loop",link:"/handbook/workflow-loop"}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("p",{children:[t.texts[0].value,(0,e.jsx)("code",{children:t.texts[1].value}),t.texts[2].value,(0,e.jsx)("code",{children:t.texts[3].value}),t.texts[4].value,(0,e.jsx)("code",{children:t.texts[5].value}),t.texts[6].value]}),(0,e.jsxs)("h2",{id:"installation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#installation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Installation"]}),(0,e.jsx)("p",{children:t.texts[7].value}),(0,e.jsxs)("h2",{id:"user-manual",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#user-manual",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"User Manual"]}),(0,e.jsxs)("h3",{id:"creating-node",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#creating-node",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Creating Node"]}),(0,e.jsx)("p",{children:t.texts[8].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/b3c8061a66bfff037f4b9509ab0aad75.png",alt:"Creating a Loop Node"})}),(0,e.jsxs)("p",{children:[t.texts[9].value,(0,e.jsx)("code",{children:t.texts[10].value}),t.texts[11].value]}),(0,e.jsxs)("h3",{id:"node-configuration",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-configuration",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Node Configuration"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20241016135326.png",alt:"20241016135326"})}),(0,e.jsxs)("h4",{id:"loop-object",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#loop-object",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Loop Object"]}),(0,e.jsx)("p",{children:t.texts[12].value}),(0,e.jsxs)("ol",{children:[(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:t.texts[13].value}),t.texts[14].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:t.texts[15].value}),t.texts[16].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:t.texts[17].value}),t.texts[18].value]})}),(0,e.jsx)("li",{children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:t.texts[19].value}),t.texts[20].value]})})]}),(0,e.jsxs)("p",{children:[t.texts[21].value,(0,e.jsx)("code",{children:t.texts[22].value}),t.texts[23].value,(0,e.jsx)("code",{children:t.texts[24].value}),t.texts[25].value,(0,e.jsx)("code",{children:t.texts[26].value}),t.texts[27].value,(0,e.jsx)("code",{children:t.texts[28].value}),t.texts[29].value,(0,e.jsx)("code",{children:t.texts[30].value}),t.texts[31].value]}),(0,e.jsxs)("h4",{id:"loop-condition",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#loop-condition",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Loop condition"]}),(0,e.jsxs)("p",{children:[t.texts[32].value,(0,e.jsx)("code",{children:t.texts[33].value}),t.texts[34].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[35].value})}),(0,e.jsx)("p",{children:t.texts[36].value}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[37].value})}),(0,e.jsxs)("p",{children:[t.texts[38].value,(0,e.jsx)("code",{children:t.texts[39].value}),t.texts[40].value,(0,e.jsx)("code",{children:t.texts[41].value}),t.texts[42].value]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:t.texts[43].value})}),(0,e.jsxs)("p",{children:[t.texts[44].value,(0,e.jsx)("code",{children:t.texts[45].value}),t.texts[46].value,(0,e.jsx)("code",{children:t.texts[47].value}),t.texts[48].value]}),(0,e.jsxs)("h4",{id:"error-handling-of-internal-nodes-in-loop",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#error-handling-of-internal-nodes-in-loop",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Error handling of internal nodes in loop"]}),(0,e.jsxs)("p",{children:[t.texts[49].value,(0,e.jsx)("code",{children:t.texts[50].value}),t.texts[51].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:t.texts[52].value}),(0,e.jsx)("li",{children:t.texts[53].value}),(0,e.jsx)("li",{children:t.texts[54].value})]}),(0,e.jsx)("p",{children:t.texts[55].value}),(0,e.jsxs)("h3",{id:"example",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example"]}),(0,e.jsx)("p",{children:t.texts[56].value}),(0,e.jsx)("ol",{children:(0,e.jsx)("li",{children:t.texts[57].value})}),(0,e.jsxs)(o.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[58].value}),(0,e.jsx)("th",{children:t.texts[59].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[60].value}),(0,e.jsx)("td",{children:t.texts[61].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[62].value}),(0,e.jsx)("td",{children:t.texts[63].value})]})]})]}),(0,e.jsxs)(o.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[64].value}),(0,e.jsx)("th",{children:t.texts[65].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[66].value}),(0,e.jsx)("td",{children:t.texts[67].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[68].value}),(0,e.jsx)("td",{children:t.texts[69].value})]})]})]}),(0,e.jsxs)(o.Z,{children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:t.texts[70].value}),(0,e.jsx)("th",{children:t.texts[71].value})]})}),(0,e.jsxs)("tbody",{children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[72].value}),(0,e.jsx)("td",{children:t.texts[73].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[74].value}),(0,e.jsx)("td",{children:t.texts[75].value})]}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:t.texts[76].value}),(0,e.jsx)("td",{children:t.texts[77].value})]})]})]}),(0,e.jsx)("ol",{start:"2",children:(0,e.jsx)("li",{children:t.texts[78].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/0086601c2fc0e17a64d046a4c86b49b7.png",alt:"Loop Node Example Trigger Configuration"})}),(0,e.jsx)("ol",{start:"3",children:(0,e.jsx)("li",{children:t.texts[79].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/2507becc32db5a9a0641c198605a20da.png",alt:"Loop Node Example Loop Node Configuration"})}),(0,e.jsx)("ol",{start:"4",children:(0,e.jsx)("li",{children:t.texts[80].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/a6d08d15786841e1a3512b38e4629852.png",alt:"Loop Node Example Condition Node Configuration"})}),(0,e.jsx)("ol",{start:"5",children:(0,e.jsx)("li",{children:t.texts[81].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/8df3604c71f8f8705b1552d3ebfe3b50.png",alt:"Loop Node Example Calculation Node Configuration"})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/2d84baa9b3b01bd85fccda9eec992378.png",alt:"Loop Node Example Update Inventory Node Configuration"})}),(0,e.jsx)("ol",{start:"6",children:(0,e.jsx)("li",{children:t.texts[82].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/4996613090c254c69a1d80f3b3a7fae2.png",alt:"Loop Node Example Update Order Details Node Configuration"})}),(0,e.jsx)("p",{children:t.texts[83].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/6f59ef246c1f19976344a7624c4c4151.png",alt:"Loop Node Example Process Structure"})}),(0,e.jsx)("p",{children:t.texts[84].value})]})]})})})}n.default=u},355151:function(s,n,a){a.r(n),a.d(n,{texts:function(){return d}});const d=[{value:"The loop functions in a manner akin to ",paraId:0},{value:"for",paraId:0},{value:", ",paraId:0},{value:"while",paraId:0},{value:", or ",paraId:0},{value:"forEach",paraId:0},{value:" constructs in programming languages. It\u2019s designed for situations where you need to repeat certain operations a specific number of times or iterate over a dataset (such as an array). The loop node is your go-to tool for such tasks.",paraId:0},{value:"This plugin comes pre-installed, so no additional setup is necessary.",paraId:1,tocIndex:1},{value:'In the workflow configuration interface, you can add a "Loop" node by clicking the plus sign ("+") in the process:',paraId:2,tocIndex:3},{value:"Once you create the loop node, an internal branch specifically for the loop is generated. You can then populate this branch with any number of nodes. These nodes will have access to not only the workflow context variables but also the local variables defined within the loop context\u2014such as the current data object or the iteration index (which starts at ",paraId:3,tocIndex:3},{value:"0",paraId:3,tocIndex:3},{value:"). These local variables are scoped exclusively to the loop. For nested loops, you can use variables specific to each loop level.",paraId:3,tocIndex:3},{value:"The loop node can handle various data types for the loop object, each in a different way:",paraId:4,tocIndex:5},{value:"Array",paraId:5,tocIndex:5},{value:": This is the most common use case. Typically, you'll select a workflow context variable, such as the results from a query node or preloaded data from a many-to-many relationship. If an array is selected, the loop node will iterate over each element, assigning the current element to a local variable within the loop context for each iteration.",paraId:5,tocIndex:5},{value:"Number",paraId:6,tocIndex:5},{value:": When the loop object is a number, it\u2019s treated as the number of iterations. The index within the local variable will match the loop object\u2019s value.",paraId:6,tocIndex:5},{value:"String",paraId:7,tocIndex:5},{value:": If the loop object is a string, the loop will iterate according to the string's length, processing each character by its index.",paraId:7,tocIndex:5},{value:"Others",paraId:8,tocIndex:5},{value:": Other data types (including objects) are treated as a single loop object, resulting in just one iteration\u2014typically not requiring a loop.",paraId:8,tocIndex:5},{value:"You can also input constants directly when working with numbers and strings. For instance, inputting ",paraId:9,tocIndex:5},{value:"5",paraId:9,tocIndex:5},{value:" (number type) will cause the loop to run 5 times, while inputting ",paraId:9,tocIndex:5},{value:"abc",paraId:9,tocIndex:5},{value:" (string type) will result in 3 iterations, processing ",paraId:9,tocIndex:5},{value:"a",paraId:9,tocIndex:5},{value:", ",paraId:9,tocIndex:5},{value:"b",paraId:9,tocIndex:5},{value:", and ",paraId:9,tocIndex:5},{value:"c",paraId:9,tocIndex:5},{value:" individually. The variable selection tool allows you to choose the type of constant you want to use.",paraId:9,tocIndex:5},{value:"From version ",paraId:10,tocIndex:6},{value:"v1.4.0-beta",paraId:10,tocIndex:6},{value:" on, loop condition options are added, and could be enabled in node configuration.",paraId:10,tocIndex:6},{value:"Condition",paraId:11,tocIndex:6},{value:"Similar to the configuration in a condition node, combination of conditions can be configured, and variables from the current loop, such as the loop item and loop index, can also be used.",paraId:12,tocIndex:6},{value:"Checkpoint",paraId:13,tocIndex:6},{value:"Similar to ",paraId:14,tocIndex:6},{value:"while",paraId:14,tocIndex:6},{value:" and ",paraId:14,tocIndex:6},{value:"do/while",paraId:14,tocIndex:6},{value:" in programming languages, conditions can be configured to be evaluated either before each loop iteration or after it ends. Post-condition evaluation can execute other nodes in the loop body first before performing the condition check.",paraId:14,tocIndex:6},{value:"When condition is not met",paraId:15,tocIndex:6},{value:"Similar to ",paraId:16,tocIndex:6},{value:"break",paraId:16,tocIndex:6},{value:" and ",paraId:16,tocIndex:6},{value:"continue",paraId:16,tocIndex:6},{value:" clause in programming languages, could be use to determine whether to break or continue the loop.",paraId:16,tocIndex:6},{value:"From version ",paraId:17,tocIndex:7},{value:"v1.4.0-beta",paraId:17,tocIndex:7},{value:" on, when an internal node in a loop fails to execute (due to unmet conditions, errors, etc.), the next step can be determined through this configuration. Three handling methods are supported:",paraId:17,tocIndex:7},{value:"Exit the process (default)",paraId:18,tocIndex:7},{value:"Exit the loop and continue the process",paraId:18,tocIndex:7},{value:"Continue to the next loop item",paraId:18,tocIndex:7},{value:"You can choose the appropriate method as needed.",paraId:19,tocIndex:7},{value:"Consider the following scenario: when placing an order, you need to check the inventory of each product in the order. If the inventory is sufficient, the stock is deducted; otherwise, the product in the order details is marked as invalid.",paraId:20,tocIndex:8},{value:"Create three collections: Product <-(1:m)-- Order Details --(m:1)-> Order , with the following data model:",paraId:21,tocIndex:8},{value:"Field Name",paraId:22,tocIndex:8},{value:"Field Type",paraId:22,tocIndex:8},{value:"Order Details",paraId:22,tocIndex:8},{value:"Many-to-One (Details)",paraId:22,tocIndex:8},{value:"Total Price",paraId:22,tocIndex:8},{value:"Number",paraId:22,tocIndex:8},{value:"Field Name",paraId:23,tocIndex:8},{value:"Field Type",paraId:23,tocIndex:8},{value:"Product",paraId:23,tocIndex:8},{value:"One-to-Many (Product)",paraId:23,tocIndex:8},{value:"Quantity",paraId:23,tocIndex:8},{value:"Number",paraId:23,tocIndex:8},{value:"Field Name",paraId:24,tocIndex:8},{value:"Field Type",paraId:24,tocIndex:8},{value:"Product Name",paraId:24,tocIndex:8},{value:"Single-line Text",paraId:24,tocIndex:8},{value:"Price",paraId:24,tocIndex:8},{value:"Number",paraId:24,tocIndex:8},{value:"Inventory",paraId:24,tocIndex:8},{value:"Integer",paraId:24,tocIndex:8},{value:'Create a workflow, selecting "Collection event" as the trigger, and choose the "Order" table with "Create record" as the trigger. Additionally, preload relationship data from the "Order Details" table and the Product Table under details:',paraId:25,tocIndex:8},{value:'Create a loop node, selecting the loop object as "Trigger Data / Order Details," which loops through each record in the order details table:',paraId:26,tocIndex:8},{value:'Inside the loop node, create a "Condition" node to check if the product inventory is sufficient:',paraId:27,tocIndex:8},{value:'If the inventory is sufficient, create a "Calculation" and an "Update record" node under the "Yes" branch to update the inventory after deduction:',paraId:28,tocIndex:8},{value:'If the inventory is insufficient, create an "Update record" node under the "No" branch to update the status of the order detail to "Invalid":',paraId:29,tocIndex:8},{value:"The complete process structure is illustrated below:",paraId:30,tocIndex:8},{value:"After configuration and activation of this workflow, every time a new order is created, the system will automatically check the inventory of each product in the order. If sufficient inventory is available, the stock will be deducted; otherwise, the product in the order details will be marked as invalid (helping to calculate the valid total order price).",paraId:31,tocIndex:8}]}}]);
