"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[35487],{398435:function(t,s,a){a.r(s);var l=a(572269),r=a(793359),c=a(861788),x=a(719977),h=a(20190),d=a(24268),I=a(496057),v=a(585939),m=a(28484),p=a(635206),j=a(375553),P=a(156266),E=a(572333),g=a(841118),D=a(39297),M=a(868526),f=a(605019),u=a(614651),o=a(280936),_=a(667294),n=a(7023),e=a(785893);function i(){return(0,e.jsx)(u.dY,{children:(0,e.jsx)(_.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"\u63D2\u4EF6\u7684\u751F\u547D\u5468\u671F",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u63D2\u4EF6\u7684\u751F\u547D\u5468\u671F",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u63D2\u4EF6\u7684\u751F\u547D\u5468\u671F"]}),(0,e.jsxs)("h2",{id:"\u751F\u547D\u5468\u671F",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u751F\u547D\u5468\u671F",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u751F\u547D\u5468\u671F"]}),(0,e.jsxs)("p",{children:[n.texts[0].value,(0,e.jsx)("code",{children:n.texts[1].value}),n.texts[2].value,(0,e.jsx)("code",{children:n.texts[3].value}),n.texts[4].value,(0,e.jsx)("code",{children:n.texts[5].value}),n.texts[6].value,(0,e.jsx)("code",{children:n.texts[7].value}),n.texts[8].value]}),(0,e.jsx)(d.Z,{lang:"typescript",children:n.texts[9].value}),(0,e.jsxs)("h3",{id:"afteradd",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#afteradd",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:n.texts[10].value})]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:n.texts[11].value}),(0,e.jsx)("li",{children:n.texts[12].value})]}),(0,e.jsx)(d.Z,{lang:"typescript",children:n.texts[13].value}),(0,e.jsxs)("h3",{id:"beforeload",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#beforeload",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:n.texts[14].value})]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:n.texts[15].value}),(0,e.jsxs)("li",{children:[n.texts[16].value,(0,e.jsx)("code",{children:n.texts[17].value}),n.texts[18].value]})]}),(0,e.jsxs)("h3",{id:"load",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#load",children:(0,e.jsx)("span",{className:"icon icon-link"})}),(0,e.jsx)("code",{children:n.texts[19].value})]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[n.texts[20].value,(0,e.jsx)("code",{children:n.texts[21].value}),n.texts[22].value]}),(0,e.jsx)("li",{children:n.texts[23].value})]}),(0,e.jsx)(d.Z,{lang:"typescript",children:n.texts[24].value}),(0,e.jsx)("p",{children:n.texts[25].value}),(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:n.texts[26].value}),n.texts[27].value,(0,e.jsx)("code",{children:n.texts[28].value}),n.texts[29].value,(0,e.jsx)("code",{children:n.texts[30].value}),n.texts[31].value,(0,e.jsx)("code",{children:n.texts[32].value})]}),(0,e.jsx)("p",{children:n.texts[33].value}),(0,e.jsxs)("h2",{id:"\u63D2\u4EF6\u7BA1\u7406\u5668",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u63D2\u4EF6\u7BA1\u7406\u5668",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u63D2\u4EF6\u7BA1\u7406\u5668"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:n.texts[34].value}),(0,e.jsx)("li",{children:n.texts[35].value}),(0,e.jsx)("li",{children:n.texts[36].value}),(0,e.jsxs)("li",{children:[n.texts[37].value,(0,e.jsx)("a",{href:"https://www.baidu.com",children:n.texts[38].value})]})]}),(0,e.jsxs)("h3",{id:"\u83B7\u53D6\u63D2\u4EF6",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u83B7\u53D6\u63D2\u4EF6",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u83B7\u53D6\u63D2\u4EF6"]}),(0,e.jsxs)("p",{children:[n.texts[39].value,(0,e.jsx)("code",{children:n.texts[40].value}),n.texts[41].value]}),(0,e.jsx)(d.Z,{lang:"typescript",children:n.texts[42].value}),(0,e.jsxs)("p",{children:[n.texts[43].value,(0,e.jsx)("code",{children:n.texts[44].value}),n.texts[45].value]}),(0,e.jsx)(d.Z,{lang:"typescript",children:n.texts[46].value}),(0,e.jsxs)("h3",{id:"\u6DFB\u52A0\u63D2\u4EF6",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6DFB\u52A0\u63D2\u4EF6",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6DFB\u52A0\u63D2\u4EF6"]}),(0,e.jsxs)("p",{children:[n.texts[47].value,(0,e.jsx)("code",{children:n.texts[48].value}),n.texts[49].value]}),(0,e.jsx)("p",{children:n.texts[50].value}),(0,e.jsx)(d.Z,{lang:"typescript",children:n.texts[51].value})]})})})})}s.default=i},7023:function(t,s,a){a.r(s),a.d(s,{texts:function(){return l}});const l=[{value:"\u4EE5\u4E0B\u662F ",paraId:0,tocIndex:1},{value:"Plugin",paraId:0,tocIndex:1},{value:" \u7C7B\u7684\u5B9A\u4E49\uFF0C\u6211\u4EEC\u770B\u5230\u5B83\u63D0\u4F9B\u4E86\u4E09\u4E2A\u751F\u547D\u5468\u671F\u65B9\u6CD5 ",paraId:0,tocIndex:1},{value:"afterAdd",paraId:0,tocIndex:1},{value:"\u3001",paraId:0,tocIndex:1},{value:"beforeLoad",paraId:0,tocIndex:1},{value:"\u3001",paraId:0,tocIndex:1},{value:"load",paraId:0,tocIndex:1},{value:"\u3002",paraId:0,tocIndex:1},{value:`export class Plugin<T = <em>any</em>> {
  constructor(
    protected options: T,
    protected app: Application,
  ) {}

  async afterAdd() {}

  async beforeLoad() {}

  async load() {}
}
`,paraId:1,tocIndex:1},{value:"afterAdd",paraId:2},{value:"\u8C03\u7528\u65F6\u673A\uFF1A\u63D2\u4EF6\u88AB\u6DFB\u52A0\u5E76\u5B9E\u4F8B\u5316\u540E\u7ACB\u5373\u8C03\u7528",paraId:3,tocIndex:2},{value:"\u4F5C\u7528\uFF1A\u7528\u4E8E\u52A0\u8F7D\u5176\u4ED6\u63D2\u4EF6",paraId:3,tocIndex:2},{value:`class Demo1Plugin extends Plugin {}
class Demo2Plugin extends Plugin {}

class MyPlugin extends Plugin {
  async afterrAdd() {
    // \u52A0\u8F7D\u5176\u4ED6\u63D2\u4EF6
    this.app.pluginManager.add(Demo1Plugin);
    this.app.pluginManager.add(Demo2Plugin);
  }
}

export default MyPlugin;
`,paraId:4,tocIndex:2},{value:"beforeLoad",paraId:2},{value:"\u8C03\u7528\u65F6\u673A\uFF1A\u5728\u5168\u90E8\u63D2\u4EF6\u88AB\u6DFB\u52A0\u540E\uFF0C\u4F46\u6267\u884C load \u524D",paraId:5,tocIndex:3},{value:"\u7528\u4E8E\uFF1A\u7528\u4E8E\u5904\u7406\u5728\u4E4B\u524D ",paraId:5,tocIndex:3},{value:"load",paraId:5,tocIndex:3},{value:" \u4E4B\u524D\u7684\u4E00\u4E9B\u7279\u6B8A\u903B\u8F91",paraId:5,tocIndex:3},{value:"load",paraId:2},{value:"\u8C03\u7528\u65F6\u673A\uFF1A\u5168\u90E8\u63D2\u4EF6\u6267\u884C\u5B8C ",paraId:6,tocIndex:4},{value:"beforeLoad",paraId:6,tocIndex:4},{value:" \u540E",paraId:6,tocIndex:4},{value:"\u4F5C\u7528\uFF1A\u5927\u591A\u6570\u5BF9 app \u5B9E\u4F8B\u7684\u64CD\u4F5C\u548C\u65B9\u6CD5\u7684\u8C03\u7528\u90FD\u5E94\u5728\u6B64\u58F0\u660E\u5468\u671F\u5185",paraId:6,tocIndex:4},{value:`class MyPlugin extends Plugin {
  async load() {
    // \u6DFB\u52A0\u8DEF\u7531
    this.app.router.add();

    // \u6DFB\u52A0\u5168\u5C40\u7EC4\u4EF6
    this.app.addComponents({});

    //  \u6DFB\u52A0\u63D2\u4EF6\u914D\u7F6E\u9875
    this.app.pluginSettingsManager({});

    // ...
  }
}

export default MyPlugin;
`,paraId:7,tocIndex:4},{value:"\u6574\u4F53\u6267\u884C\u6D41\u7A0B\u4E3A\uFF1A",paraId:8,tocIndex:4},{value:"app.mount()/app.getRootComponent()",paraId:9,tocIndex:4},{value:" -> ",paraId:9,tocIndex:4},{value:"pluginList.forEach(plugin.afterAdd)",paraId:9,tocIndex:4},{value:"-> ",paraId:9,tocIndex:4},{value:"pluginList.forEach(plugin.beforeLoad)",paraId:9,tocIndex:4},{value:"-> ",paraId:9,tocIndex:4},{value:"pluginList.forEach(plugin.load)",paraId:9,tocIndex:4},{value:"\u540C\u4E00\u4E2A\u7C7B\u578B\u7684\u751F\u547D\u5468\u671F\uFF0C\u63D2\u4EF6\u5217\u8868\u7684\u6267\u884C\u5E76\u65E0\u5148\u540E\u987A\u5E8F\u3002",paraId:10,tocIndex:4},{value:"\u4F5C\u7528\uFF1A\u5BF9\u63D2\u4EF6\u8FDB\u884C\u589E\u5220\u6539\u67E5",paraId:11,tocIndex:5},{value:"\u573A\u666F\uFF1A\u5F53\u63D2\u4EF6\u6709\u62C6\u5206\u548C\u805A\u5408\u9700\u6C42\u65F6",paraId:11,tocIndex:5},{value:"\u5B9E\u4F8B\u65B9\u6CD5\uFF1Aapp.pluginManager",paraId:11,tocIndex:5},{value:"API \u8BE6\u7EC6\u4ECB\u7ECD\uFF1A",paraId:11,tocIndex:5},{value:"\u63D2\u4EF6\u7BA1\u7406",paraId:11,tocIndex:5},{value:"\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 ",paraId:12,tocIndex:6},{value:"app.pluginManager.get",paraId:12,tocIndex:6},{value:" \u83B7\u53D6\u5BF9\u5E94\u63D2\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u5E76\u4FEE\u6539\u63D2\u4EF6\u5B9E\u4F8B\u5C5E\u6027\u6216\u8005\u8C03\u7528\u5B9E\u4F8B\u4E0A\u7684\u65B9\u6CD5\u3002",paraId:12,tocIndex:6},{value:`import { DemoPlugin } from 'my-demo-plugin';

class MyPlugin extends Plugin {
  async load() {
    // \u901A\u8FC7 Class \u7C7B\u83B7\u53D6\u5B9E\u4F8B
    const demoPluginInstance = this.pm.get(DemoPlugin);

    // \u5982\u679C add \u65F6\u4F20\u9012\u4E86 name\uFF0C\u5219\u53EF\u4EE5\u901A\u8FC7 name \u5B57\u7B26\u4E32\u83B7\u53D6
    const demoPluginInstance = this.pm.get('DemoPlugin');

    // \u5BF9\u5B9E\u4F8B\u8FDB\u884C\u5904\u7406 ...
  }
}
`,paraId:13,tocIndex:6},{value:"\u5982\u679C\u9700\u8981\u5728\u7EC4\u4EF6\u5185\u83B7\u53D6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:14,tocIndex:6},{value:"usePlugin()",paraId:14,tocIndex:6},{value:" \u83B7\u53D6\u3002",paraId:14,tocIndex:6},{value:`import { usePlugin } from '@nocobase/client';
const Demo = () => {
  const myPlugin = usePlugin(MyPlugin); // \u901A\u8FC7 Class \u7C7B\u83B7\u53D6\u5B9E\u4F8B

  const myPlugin = usePlugin('MyPlugin'); // \u901A\u8FC7 name \u83B7\u53D6\u5B9E\u4F8B
};
`,paraId:15,tocIndex:6},{value:"\u6DFB\u52A0\u63D2\u4EF6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u4F20\u9012\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF0C",paraId:16,tocIndex:7},{value:"name",paraId:16,tocIndex:7},{value:" \u65B9\u9762\u5176\u4ED6\u63D2\u4EF6\u83B7\u53D6\u3002",paraId:16,tocIndex:7},{value:"\u5927\u90E8\u5206\u60C5\u51B5\u4E0B\u662F\u4E0D\u9700\u8981\u4E86\u89E3\u8FD9\u4E2A\u80FD\u529B\u7684\uFF0C\u9664\u975E\u8981\u8FDB\u884C\u5C06\u4E00\u4E2A\u63D2\u4EF6\u62C6\u6210\u51E0\u4E2A\u3002",paraId:17,tocIndex:7},{value:`class MyPlugin extends Plugin {
  // \u6CE8\u610F\u8981\u5728 afterrAdd \u751F\u547D\u5468\u671F\u5185
  async afterrAdd() {
    this.app.pluginManager.add(DemoPlugin);
    this.app.pluginManager.add(DemoPlugin, { name: 'DemoPlugin' });
  }
}
`,paraId:18,tocIndex:7}]}}]);
