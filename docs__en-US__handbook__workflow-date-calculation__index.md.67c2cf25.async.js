"use strict";(self.webpackChunknocobase_docs=self.webpackChunknocobase_docs||[]).push([[33977],{709793:function(d,n,t){t.r(n);var l=t(572269),x=t(793359),h=t(861788),s=t(719977),v=t(20190),p=t(24268),I=t(496057),_=t(585939),m=t(28484),j=t(635206),f=t(375553),E=t(156266),g=t(572333),i=t(841118),b=t(39297),y=t(868526),D=t(605019),u=t(614651),o=t(280936),r=t(667294),a=t(302053),e=t(785893);function c(){return(0,e.jsx)(u.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"markdown",children:(0,e.jsxs)("h1",{id:"date-calculation",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#date-calculation",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Date Calculation"]})}),(0,e.jsx)(i.Z,{name:"workflow-date-calculation",link:"/handbook/workflow-date-calculation",commercial:"true"}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsx)("p",{children:a.texts[0].value}),(0,e.jsxs)("h2",{id:"user-manual",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#user-manual",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"User Manual"]}),(0,e.jsxs)("h3",{id:"creating-a-node",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-node",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Creating a Node"]}),(0,e.jsx)("p",{children:a.texts[1].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/%5B%E5%9B%BE%E7%89%87%5D.png",alt:"Create Node for Date Calculation"})}),(0,e.jsxs)("h3",{id:"node-configuration",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-configuration",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Node Configuration"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240817184423.png",alt:"Node Configuration for Date Calculation"})}),(0,e.jsxs)("h4",{id:"input-value",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#input-value",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Input Value"]}),(0,e.jsx)("p",{children:a.texts[2].value}),(0,e.jsxs)("h4",{id:"input-value-type",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#input-value-type",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Input Value Type"]}),(0,e.jsx)("p",{children:a.texts[3].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[4].value}),(0,e.jsx)("li",{children:a.texts[5].value})]}),(0,e.jsxs)("h4",{id:"calculation-steps",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#calculation-steps",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Calculation Steps"]}),(0,e.jsx)("p",{children:a.texts[6].value}),(0,e.jsx)("p",{children:a.texts[7].value}),(0,e.jsxs)("h3",{id:"calculation-functions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#calculation-functions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Calculation Functions"]}),(0,e.jsxs)("h4",{id:"add-a-range",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#add-a-range",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Add a range"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[8].value}),(0,e.jsxs)("li",{children:[a.texts[9].value,(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[10].value}),(0,e.jsx)("li",{children:a.texts[11].value})]})]}),(0,e.jsx)("li",{children:a.texts[12].value}),(0,e.jsxs)("li",{children:[a.texts[13].value,(0,e.jsx)("code",{children:a.texts[14].value}),a.texts[15].value,(0,e.jsx)("code",{children:a.texts[16].value}),a.texts[17].value,(0,e.jsx)("code",{children:a.texts[18].value}),a.texts[19].value]})]}),(0,e.jsxs)("h4",{id:"subtract-a-range",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#subtract-a-range",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Subtract a range"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[20].value}),(0,e.jsxs)("li",{children:[a.texts[21].value,(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[22].value}),(0,e.jsx)("li",{children:a.texts[23].value})]})]}),(0,e.jsx)("li",{children:a.texts[24].value}),(0,e.jsxs)("li",{children:[a.texts[25].value,(0,e.jsx)("code",{children:a.texts[26].value}),a.texts[27].value,(0,e.jsx)("code",{children:a.texts[28].value}),a.texts[29].value,(0,e.jsx)("code",{children:a.texts[30].value}),a.texts[31].value]})]}),(0,e.jsxs)("h4",{id:"get-difference-with-another-data-value",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#get-difference-with-another-data-value",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Get difference with another data value"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[32].value}),(0,e.jsxs)("li",{children:[a.texts[33].value,(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[34].value}),(0,e.jsx)("li",{children:a.texts[35].value}),(0,e.jsx)("li",{children:a.texts[36].value}),(0,e.jsx)("li",{children:a.texts[37].value})]})]}),(0,e.jsx)("li",{children:a.texts[38].value}),(0,e.jsxs)("li",{children:[a.texts[39].value,(0,e.jsx)("code",{children:a.texts[40].value}),a.texts[41].value,(0,e.jsx)("code",{children:a.texts[42].value}),a.texts[43].value,(0,e.jsx)("code",{children:a.texts[44].value}),a.texts[45].value]})]})]}),(0,e.jsx)(s.Z,{type:"info",title:"Note",children:(0,e.jsx)("p",{children:a.texts[46].value})}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h4",{id:"get-value-on-specific-unit-of-input-date",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#get-value-on-specific-unit-of-input-date",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Get value on specific unit of input date"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[47].value}),(0,e.jsxs)("li",{children:[a.texts[48].value,(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:a.texts[49].value})})]}),(0,e.jsx)("li",{children:a.texts[50].value}),(0,e.jsxs)("li",{children:[a.texts[51].value,(0,e.jsx)("code",{children:a.texts[52].value}),a.texts[53].value,(0,e.jsx)("code",{children:a.texts[54].value}),a.texts[55].value]})]}),(0,e.jsxs)("h4",{id:"set-to-time-of-unit-start",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#set-to-time-of-unit-start",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Set to time of unit start"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[56].value}),(0,e.jsxs)("li",{children:[a.texts[57].value,(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:a.texts[58].value})})]}),(0,e.jsx)("li",{children:a.texts[59].value}),(0,e.jsxs)("li",{children:[a.texts[60].value,(0,e.jsx)("code",{children:a.texts[61].value}),a.texts[62].value,(0,e.jsx)("code",{children:a.texts[63].value}),a.texts[64].value]})]}),(0,e.jsxs)("h4",{id:"set-to-time-of-unit-end",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#set-to-time-of-unit-end",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Set to time of unit end"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[65].value}),(0,e.jsxs)("li",{children:[a.texts[66].value,(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:a.texts[67].value})})]}),(0,e.jsx)("li",{children:a.texts[68].value}),(0,e.jsxs)("li",{children:[a.texts[69].value,(0,e.jsx)("code",{children:a.texts[70].value}),a.texts[71].value,(0,e.jsx)("code",{children:a.texts[72].value}),a.texts[73].value]})]}),(0,e.jsxs)("h4",{id:"is-leap-year",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#is-leap-year",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Is leap year"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[74].value}),(0,e.jsx)("li",{children:a.texts[75].value}),(0,e.jsx)("li",{children:a.texts[76].value}),(0,e.jsxs)("li",{children:[a.texts[77].value,(0,e.jsx)("code",{children:a.texts[78].value}),a.texts[79].value,(0,e.jsx)("code",{children:a.texts[80].value}),a.texts[81].value]})]}),(0,e.jsxs)("h4",{id:"format-to-string",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#format-to-string",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Format to String"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[82].value}),(0,e.jsxs)("li",{children:[a.texts[83].value,(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[a.texts[84].value,(0,e.jsx)("a",{href:"https://day.js.org/docs/zh-CN/display/format",children:a.texts[85].value}),a.texts[86].value]})})]}),(0,e.jsx)("li",{children:a.texts[87].value}),(0,e.jsxs)("li",{children:[a.texts[88].value,(0,e.jsx)("code",{children:a.texts[89].value}),a.texts[90].value,(0,e.jsx)("code",{children:a.texts[91].value}),a.texts[92].value,(0,e.jsx)("code",{children:a.texts[93].value}),a.texts[94].value]})]}),(0,e.jsxs)("h4",{id:"convert-unit",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#convert-unit",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Convert unit"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[95].value}),(0,e.jsxs)("li",{children:[a.texts[96].value,(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[97].value}),(0,e.jsx)("li",{children:a.texts[98].value}),(0,e.jsx)("li",{children:a.texts[99].value})]})]}),(0,e.jsx)("li",{children:a.texts[100].value}),(0,e.jsxs)("li",{children:[a.texts[101].value,(0,e.jsx)("code",{children:a.texts[102].value}),a.texts[103].value,(0,e.jsx)("code",{children:a.texts[104].value}),a.texts[105].value]})]}),(0,e.jsxs)("h3",{id:"example",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#example",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Example"]}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{src:"https://static-docs.nocobase.com/20240817184137.png",alt:"Example of Date Calculation Node"})}),(0,e.jsx)("p",{children:a.texts[106].value}),(0,e.jsxs)("ol",{children:[(0,e.jsx)("li",{children:a.texts[107].value}),(0,e.jsx)("li",{children:a.texts[108].value})]}),(0,e.jsx)("p",{children:a.texts[109].value})]})]})})})}n.default=c},302053:function(d,n,t){t.r(n),t.d(n,{texts:function(){return l}});const l=[{value:"The Date Calculation node offers a set of nine powerful functions, enabling operations such as adding or subtracting time periods, formatting time strings, and converting duration units. Each function is designed with specific input and output value types, and can seamlessly integrate the results from other nodes as parameter variables. By chaining these functions through a calculation pipeline, you can achieve the desired output with precision.",paraId:0},{value:'To add a "Date Calculation" node in the workflow configuration interface, simply click the plus (\u201C+\u201D) button within the process:',paraId:1,tocIndex:2},{value:"Input values can be either variables or date constants. Variables might include data that triggers the workflow or results from upstream nodes. Constants can be any selected date.",paraId:2,tocIndex:4},{value:"The input value type determines how the input will be processed and is categorized into two types:",paraId:3,tocIndex:5},{value:"Date Type: This includes any input that can be converted into a date-time format, such as numeric timestamps or strings representing time.",paraId:4,tocIndex:5},{value:"Number Type: The input value type influences the selection of time calculation steps, so it\u2019s crucial to choose the correct type.",paraId:4,tocIndex:5},{value:"Each calculation step consists of a specific function and its parameter configuration. The pipeline design allows the output of one function to feed directly into the next, enabling a sequence of time calculations and conversions.",paraId:5,tocIndex:6},{value:"The output type after each step is fixed, which in turn determines the functions available for the next step. If the types are compatible, the calculation continues; if not, the result of the current step becomes the final output of the node.",paraId:6,tocIndex:6},{value:"Accepted Input Value Type: Date",paraId:7,tocIndex:8},{value:`Parameters:
`,paraId:7,tocIndex:8},{value:"The amount to add, which can be a numeric value or a variable from within the node.",paraId:8,tocIndex:8},{value:"The time unit (e.g., days, hours).",paraId:8,tocIndex:8},{value:"Output Value Type: Date",paraId:7,tocIndex:8},{value:"Example: If the input value is ",paraId:7,tocIndex:8},{value:"2024-7-15 00:00:00",paraId:7,tocIndex:8},{value:", the amount is ",paraId:7,tocIndex:8},{value:"1",paraId:7,tocIndex:8},{value:', and the unit is "days," the output will be ',paraId:7,tocIndex:8},{value:"2024-7-16 00:00:00",paraId:7,tocIndex:8},{value:".",paraId:7,tocIndex:8},{value:"Accepted Input Value Type: Date",paraId:9,tocIndex:9},{value:`Parameters:
`,paraId:9,tocIndex:9},{value:"The amount to subtract, which can be a numeric value or a variable from within the node.",paraId:10,tocIndex:9},{value:"The time unit (e.g., days, hours).",paraId:10,tocIndex:9},{value:"Output Value Type: Date",paraId:9,tocIndex:9},{value:"Example: If the input value is ",paraId:9,tocIndex:9},{value:"2024-7-15 00:00:00",paraId:9,tocIndex:9},{value:", the amount is ",paraId:9,tocIndex:9},{value:"1",paraId:9,tocIndex:9},{value:', and the unit is "days," the output will be ',paraId:9,tocIndex:9},{value:"2024-7-14 00:00:00",paraId:9,tocIndex:9},{value:".",paraId:9,tocIndex:9},{value:"Accepted Input Value Type: Date",paraId:11,tocIndex:10},{value:`Parameters:
`,paraId:11,tocIndex:10},{value:"The date for comparison, which can be a constant or a variable in the workflow context.",paraId:12,tocIndex:10},{value:"The time unit (e.g., days, hours).",paraId:12,tocIndex:10},{value:"Whether to take the absolute value.",paraId:12,tocIndex:10},{value:"Rounding options: retain decimals, round off, round up, or round down.",paraId:12,tocIndex:10},{value:"Output Value Type: Numeric",paraId:11,tocIndex:10},{value:"Example: If the input value is ",paraId:11,tocIndex:10},{value:"2024-7-15 00:00:00",paraId:11,tocIndex:10},{value:", and you compare it with ",paraId:11,tocIndex:10},{value:"2024-7-16 06:00:00",paraId:11,tocIndex:10},{value:', using "days" as the unit, without taking the absolute value and retaining decimals, the output will be ',paraId:11,tocIndex:10},{value:"-1.25",paraId:11,tocIndex:10},{value:".",paraId:11,tocIndex:10},{value:"If both absolute value and rounding are selected, the absolute value is applied first, followed by rounding.",paraId:13},{value:"Accepted Input Value Type: Date",paraId:14,tocIndex:11},{value:`Parameters:
`,paraId:14,tocIndex:11},{value:"The time unit (e.g., days, hours).",paraId:15,tocIndex:11},{value:"Output Value Type: Numeric",paraId:14,tocIndex:11},{value:"Example: If the input value is ",paraId:14,tocIndex:11},{value:"2024-7-15 00:00:00",paraId:14,tocIndex:11},{value:' and the unit is "days," the output will be ',paraId:14,tocIndex:11},{value:"15",paraId:14,tocIndex:11},{value:".",paraId:14,tocIndex:11},{value:"Accepted Input Value Type: Date",paraId:16,tocIndex:12},{value:`Parameters:
`,paraId:16,tocIndex:12},{value:"The time unit (e.g., days, hours).",paraId:17,tocIndex:12},{value:"Output Value Type: Date",paraId:16,tocIndex:12},{value:"Example: If the input value is ",paraId:16,tocIndex:12},{value:"2024-7-15 14:26:30",paraId:16,tocIndex:12},{value:' and the unit is "days," the output will be ',paraId:16,tocIndex:12},{value:"2024-7-15 00:00:00",paraId:16,tocIndex:12},{value:".",paraId:16,tocIndex:12},{value:"Accepted Input Value Type: Date",paraId:18,tocIndex:13},{value:`Parameters:
`,paraId:18,tocIndex:13},{value:"The time unit (e.g., days, hours).",paraId:19,tocIndex:13},{value:"Output Value Type: Date",paraId:18,tocIndex:13},{value:"Example: If the input value is ",paraId:18,tocIndex:13},{value:"2024-7-15 14:26:30",paraId:18,tocIndex:13},{value:' and the unit is "days," the output will be ',paraId:18,tocIndex:13},{value:"2024-7-15 23:59:59",paraId:18,tocIndex:13},{value:".",paraId:18,tocIndex:13},{value:"Accepted Input Value Type: Date",paraId:20,tocIndex:14},{value:"Parameters: None",paraId:20,tocIndex:14},{value:"Output Value Type: Boolean",paraId:20,tocIndex:14},{value:"Example: If the input value is ",paraId:20,tocIndex:14},{value:"2024-7-15 14:26:30",paraId:20,tocIndex:14},{value:", the output will be ",paraId:20,tocIndex:14},{value:"true",paraId:20,tocIndex:14},{value:".",paraId:20,tocIndex:14},{value:"Accepted Input Value Type: Date",paraId:21,tocIndex:15},{value:`Parameters:
`,paraId:21,tocIndex:15},{value:"The format, as specified in ",paraId:22,tocIndex:15},{value:"Day.js: Format",paraId:22,tocIndex:15},{value:".",paraId:22,tocIndex:15},{value:"Output Value Type: String",paraId:21,tocIndex:15},{value:"Example: If the input value is ",paraId:21,tocIndex:15},{value:"2024-7-15 14:26:30",paraId:21,tocIndex:15},{value:" and the format is ",paraId:21,tocIndex:15},{value:"the time is YYYY/MM/DD HH:mm:ss",paraId:21,tocIndex:15},{value:", the output will be ",paraId:21,tocIndex:15},{value:"the time is 2024/07/15 14:26:30",paraId:21,tocIndex:15},{value:".",paraId:21,tocIndex:15},{value:"Accepted Input Value Type: Numeric",paraId:23,tocIndex:16},{value:`Parameters:
`,paraId:23,tocIndex:16},{value:"The original time unit.",paraId:24,tocIndex:16},{value:"The target time unit.",paraId:24,tocIndex:16},{value:"Rounding options: retain decimals, round off, round up, or round down.",paraId:24,tocIndex:16},{value:"Output Value Type: Numeric",paraId:23,tocIndex:16},{value:"Example: If the input value is ",paraId:23,tocIndex:16},{value:"2",paraId:23,tocIndex:16},{value:', the original unit is "weeks," the target unit is "days," and no decimals are retained, the output will be ',paraId:23,tocIndex:16},{value:"14",paraId:23,tocIndex:16},{value:".",paraId:23,tocIndex:16},{value:"Imagine a promotional activity where you want to automatically set an end time for the promotion when a product is created. This end time would be the last day of the following week at 23:59:59. To achieve this, you can create two time functions and link them in a pipeline:",paraId:25,tocIndex:17},{value:"Calculate the date for the following week.",paraId:26,tocIndex:17},{value:"Adjust the date to the last day of that week at 23:59:59.",paraId:26,tocIndex:17},{value:"By doing this, you'll generate the desired time value, which can then be passed to the next node, such as a data table modification node, to set the promotion end time in the database.",paraId:27,tocIndex:17}]}}]);
